<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.controls/src/test/java/test/javafx/scene/control/skin/LabelSkinTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 /*
<a name="1" id="anc1"></a><span class="line-modified">   2  * Copyright (c) 2011, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
  23  * questions.
  24  */
  25 
  26 package test.javafx.scene.control.skin;
  27 
  28 import static org.junit.Assert.assertEquals;
  29 import static org.junit.Assert.assertFalse;
  30 import static org.junit.Assert.assertTrue;
  31 
  32 import com.sun.javafx.scene.control.skin.Utils;
  33 import javafx.beans.value.ObservableValue;
  34 import javafx.geometry.Insets;
  35 import javafx.geometry.Pos;
  36 import javafx.scene.control.ContentDisplay;
  37 import javafx.scene.control.Label;
  38 import javafx.scene.control.OverrunStyle;
  39 import javafx.scene.control.SkinBaseShim;
  40 import javafx.scene.control.skin.LabelSkin;
  41 import javafx.scene.control.skin.LabeledSkinBaseShim;
  42 import javafx.scene.effect.BlendMode;
  43 import javafx.scene.paint.Color;
  44 import javafx.scene.shape.Rectangle;
  45 import javafx.scene.text.Font;
  46 import javafx.scene.text.Text;
  47 import javafx.scene.text.TextAlignment;
  48 import com.sun.javafx.tk.Toolkit;
  49 import javafx.scene.Group;
  50 import javafx.scene.Scene;
  51 import javafx.stage.Stage;
  52 
  53 import org.junit.Before;
  54 import org.junit.Test;
  55 
  56 /**
  57  * Need to test:
  58  *  - String truncation works correctly
  59  *  - min/max/pref width/height when multiline text is turned on
  60  */
  61 public class LabelSkinTest {
  62     private Label label;
  63     private LabelSkinMock skin;
  64     private Text text;
  65 
  66     @Before public void setup() {
  67         label = new Label();
  68         skin = new LabelSkinMock(label);
  69         // Set some padding so that any places where padding was being
  70         // computed but wasn&#39;t expected will be caught.
  71         label.setPadding(new Insets(10, 10, 10, 10));
  72         label.setSkin(skin);
  73         // It so happens that a brand new LabelSkin on a plain Label
  74         // will have as its only child the Text node
  75         text = (Text) SkinBaseShim.getChildren(skin).get(0);
  76     }
  77 
  78     /****************************************************************************
  79      *                                                                          *
  80      * Tests for change notification                                            *
  81      *                                                                          *
  82      ***************************************************************************/
  83 
  84     @Test public void sizeChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
  85         skin.addWatchedProperty(label.widthProperty());
  86         skin.addWatchedProperty(label.heightProperty());
  87         assertFalse(skin.propertyChanged); // sanity check
  88         label.resize(500, label.getHeight());
  89         assertTrue(skin.propertyChanged);
  90         assertEquals(1, skin.propertyChangeCount); // sanity check
  91         label.resize(label.getWidth(), label.prefHeight(label.getWidth()));
  92         assertEquals(2, skin.propertyChangeCount); // sanity check
  93     }
  94 
  95     @Test public void textFillChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
  96         skin.addWatchedProperty(label.textFillProperty());
  97         label.setTextFill(Color.PURPLE);
  98         assertTrue(skin.propertyChanged);
  99     }
 100 
 101     @Test public void fontChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 102         skin.addWatchedProperty(label.fontProperty());
 103         final Font f = Font.font(&quot;Arial&quot;, 64);
 104         label.setFont(f);
 105         assertTrue(skin.propertyChanged);
 106     }
 107 
 108     @Test public void graphicChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 109         skin.addWatchedProperty(label.graphicProperty());
 110         label.setGraphic(new Rectangle());
 111         assertTrue(skin.propertyChanged);
 112     }
 113 
 114     @Test public void contentDisplayChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 115         skin.addWatchedProperty(label.contentDisplayProperty());
 116         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
 117         assertTrue(skin.propertyChanged);
 118     }
 119 
 120     @Test public void graphicTextGapChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 121         skin.addWatchedProperty(label.graphicTextGapProperty());
 122         label.setGraphicTextGap(60.34);
 123         assertTrue(skin.propertyChanged);
 124     }
 125 
 126     @Test public void hposChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 127         skin.addWatchedProperty(label.alignmentProperty());
 128         label.setAlignment(Pos.CENTER_RIGHT);
 129         label.setAlignment(Pos.CENTER_RIGHT);
 130         assertTrue(skin.propertyChanged);
 131     }
 132 
 133     @Test public void vposChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 134         skin.addWatchedProperty(label.alignmentProperty());
 135         label.setAlignment(Pos.TOP_CENTER);
 136         assertTrue(skin.propertyChanged);
 137     }
 138 
 139     @Test public void lineSpacingChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 140         skin.addWatchedProperty(label.lineSpacingProperty());
 141         label.setLineSpacing(1.0);
 142         assertTrue(skin.propertyChanged);
 143     }
 144 
 145     @Test public void textChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 146         skin.addWatchedProperty(label.textProperty());
 147         label.setText(&quot;Bust my buffers!&quot;);
 148         assertTrue(skin.propertyChanged);
 149     }
 150 
 151     @Test public void textAlignmentChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 152         skin.addWatchedProperty(label.textAlignmentProperty());
 153         label.setTextAlignment(TextAlignment.JUSTIFY);
 154         assertTrue(skin.propertyChanged);
 155     }
 156 
 157     @Test public void textOverrunChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 158         skin.addWatchedProperty(label.textOverrunProperty());
 159         label.setTextOverrun(OverrunStyle.CENTER_WORD_ELLIPSIS);
 160         assertTrue(skin.propertyChanged);
 161     }
 162 
 163     @Test public void wrapTextChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 164         skin.addWatchedProperty(label.wrapTextProperty());
 165         label.setWrapText(true);
 166         assertTrue(skin.propertyChanged);
 167     }
 168 
 169     @Test public void underlineChangesOnLabelShouldInvoke_handleControlPropertyChanged() {
 170         skin.addWatchedProperty(label.underlineProperty());
 171         label.setUnderline(true);
 172         assertTrue(skin.propertyChanged);
 173     }
 174 
 175     @Test public void uninterestingChangesOnLabelShouldNotInvoke_handleControlPropertyChanged() {
 176         label.setBlendMode(BlendMode.BLUE);
 177         assertFalse(skin.propertyChanged);
 178     }
 179 
 180     /****************************************************************************
 181      *                                                                          *
 182      * Tests for invalidation. When each of various properties change, we need  *
 183      * to invalidate some state, such as via requestLayout().                   *
 184      *                                                                          *
 185      ***************************************************************************/
 186 
 187     @Test public void graphicLayoutBoundsChangeShouldInvalidateLayoutAndDisplayText() {
 188         final Rectangle r = new Rectangle(20, 20);
 189         label.setGraphic(r);
 190         label.layout();
 191         skin.updateDisplayedText();
 192 
 193         r.setWidth(30);
 194         assertTrue(label.isNeedsLayout());
 195         assertTrue(skin.get_invalidText());
 196     }
 197 
 198     @Test public void widthChangesOnLabelShouldInvalidateLayoutAndDisplayText() {
 199         label.layout();
 200         skin.updateDisplayedText();
 201 
 202         label.resize(500, label.getHeight());
 203         assertTrue(label.isNeedsLayout());
 204         assertTrue(skin.get_invalidText());
 205     }
 206 
 207     @Test public void widthChangesWhenWrapTextIsTrueUpdatesTheWrappingWidth() {
 208         // Assert that the wrapping width changes with the label width if wrapText is true.
 209         // However, this will only be required if the longest line in the text is itself
 210         // wider than the label&#39;s available width.
 211         label.setText(&quot;A long line which is wider than 100 pixels.&quot;);
 212         label.setWrapText(true);
 213         label.autosize();
 214         //label.layout();
 215         skin.updateDisplayedText();
 216 
 217         final double oldWrappingWidth = text.getWrappingWidth();
 218         label.resize(100, label.getHeight());
 219         skin.updateDisplayedText();
 220         assertFalse(oldWrappingWidth == text.getWrappingWidth());
 221         assertTrue(text.getWrappingWidth() &gt; 0);
 222     }
 223 
 224     @Test public void widthChangesWhenWrapTextIsFalseKeepsWrappingWidthAtZero() {
 225         label.layout();
 226         skin.updateDisplayedText();
 227 
 228         label.resize(500, label.getHeight());
 229         assertEquals(0, text.getWrappingWidth(), 0);
 230     }
 231 
 232     @Test public void fontChangesOnLabelShouldInvalidateLayoutAndDisplayTextAndEllipsesWidthAndTextWidth() {
 233         label.layout();
 234         skin.updateDisplayedText();
 235 
 236         label.setFont(Font.font(&quot;Arial&quot;, 37));
 237         assertTrue(label.isNeedsLayout());
 238         assertTrue(skin.get_invalidText());
 239         assertEquals(Double.NEGATIVE_INFINITY, skin.get_textWidth(), 0);
 240         assertEquals(Double.NEGATIVE_INFINITY, skin.get_ellipsisWidth(), 0);
 241     }
 242 
 243     @Test public void graphicChangesOnLabelShouldInvalidateLayoutAndDisplayText() {
 244         label.layout();
 245         skin.updateDisplayedText();
 246 
 247         label.setGraphic(new Rectangle(20, 20));
 248         assertTrue(label.isNeedsLayout());
 249         assertTrue(skin.get_invalidText());
 250     }
 251 
 252     @Test public void contentDisplayChangesOnLabelShouldInvalidateLayoutAndDisplayText() {
 253         label.layout();
 254         skin.updateDisplayedText();
 255 
 256         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
 257         assertTrue(label.isNeedsLayout());
 258         assertTrue(skin.get_invalidText());
 259     }
 260 
 261     @Test public void graphicTextGapChangesOnLabelShouldInvalidateLayoutAndDisplayText() {
 262         label.layout();
 263         skin.updateDisplayedText();
 264 
 265         label.setGraphicTextGap(8.37);
 266         assertTrue(label.isNeedsLayout());
 267         assertTrue(skin.get_invalidText());
 268     }
 269 
 270     @Test public void hposChangesOnLabelShouldInvalidateLayout() {
 271         label.layout();
 272         skin.updateDisplayedText();
 273 
 274         label.setAlignment(Pos.CENTER_RIGHT);
 275         assertTrue(label.isNeedsLayout());
 276         assertFalse(skin.get_invalidText());
 277     }
 278 
 279     @Test public void vposChangesOnLabelShouldInvalidateLayout() {
 280         label.layout();
 281         skin.updateDisplayedText();
 282 
 283         label.setAlignment(Pos.TOP_CENTER);
 284         assertTrue(label.isNeedsLayout());
 285         assertFalse(skin.get_invalidText());
 286     }
 287 
 288     @Test public void lineSpacingChangesOnLabelShouldInvalidateLayoutAndDisplayText() {
 289         label.layout();
 290         skin.updateDisplayedText();
 291 
 292         label.setLineSpacing(1.0);
 293         assertTrue(label.isNeedsLayout());
 294         assertTrue(skin.get_invalidText());
 295     }
 296 
 297     @Test public void textChangesOnLabelShouldInvalidateLayoutAndDisplayTextAndTextWidth() {
 298         label.layout();
 299         skin.updateDisplayedText();
 300 
 301         label.setText(&quot;Apples and Oranges&quot;);
 302         assertTrue(label.isNeedsLayout());
 303         assertTrue(skin.get_invalidText());
 304         assertEquals(Double.NEGATIVE_INFINITY, skin.get_textWidth(), 0);
 305     }
 306 // TODO(aim): changing textAlignment doesn&#39;t actually change Text layoutBounds
 307 //
 308 //    @Test public void textAlignmentChangesOnLabelShouldInvalidateLayout() {
 309 //        label.layout();
 310 //        skin.updateDisplayedText();
 311 //
 312 //        label.setTextAlignment(TextAlignment.JUSTIFY);
 313 //        assertTrue(label.isNeedsLayout());
 314 //        assertFalse(skin.invalidText());
 315 //    }
 316 
 317     @Test public void textOverrunChangesOnLabelShouldInvalidateLayoutAndDisplayText() {
 318         label.layout();
 319         skin.updateDisplayedText();
 320 
 321         label.setTextOverrun(OverrunStyle.CENTER_WORD_ELLIPSIS);
 322         assertTrue(label.isNeedsLayout());
 323         assertTrue(skin.get_invalidText());
 324     }
 325 
 326     @Test public void wrapTextChangesOnLabelShouldInvalidateLayoutAndDisplayTextAndWrappingWidth() {
 327         label.setText(&quot;A long line which is wider than 100 pixels.&quot;);
 328         label.resize(100, 30);
 329         label.layout();
 330         skin.updateDisplayedText();
 331 
 332         final double oldWrappingWidth = text.getWrappingWidth();
 333         label.setWrapText(true);
 334         assertTrue(label.isNeedsLayout());
 335         assertTrue(skin.get_invalidText());
 336         assertFalse(oldWrappingWidth == text.getWrappingWidth());
 337         assertTrue(text.getWrappingWidth() &gt; 0);
 338     }
 339 
 340     @Test public void underlineChangesOnLabelShouldInvalidateLayoutAndDisplayText() {
 341         label.layout();
 342         skin.updateDisplayedText();
 343 
 344         label.setUnderline(true);
 345         assertTrue(label.isNeedsLayout());
 346         assertTrue(skin.get_invalidText());
 347     }
 348 
 349     /****************************************************************************
 350      *                                                                          *
 351      * Tests for minWidth                                                       *
 352      *                                                                          *
 353      ***************************************************************************/
 354 
 355     @Test public void whenTextIsNullAndNoGraphic_computeMinWidth_ReturnsZero() {
 356         label.setPadding(new Insets(7, 7, 7, 7));
 357         label.setText(null);
 358         assertEquals(0.0 + 14, label.minWidth(-1), 0);
 359     }
 360 
 361     @Test public void whenTextIsEmptyAndNoGraphic_computeMinWidth_ReturnsZero() {
 362         label.setPadding(new Insets(7, 7, 7, 7));
 363         label.setText(&quot;&quot;);
 364         assertEquals(0.0 + 14, label.minWidth(-1), 0);
 365     }
 366 
 367     @Test public void whenTextIsShorterThanEllipsisAndNoGraphic_computeMinWidth_ReturnsTextWidth() {
 368         label.setPadding(new Insets(7, 7, 7, 7));
 369         label.setText(&quot;.&quot;);
 370         assertTrue(label.minWidth(-1) &gt;= 0);
 371         assertEquals(skin.get_textWidth() + 14, label.minWidth(-1), 0);
 372     }
 373 
 374     @Test public void whenTextIsGreaterThanEllipsisAndNoGraphic_computeMinWidth_ReturnsEllipsisWidth() {
 375         label.setPadding(new Insets(7, 7, 7, 7));
 376         label.setText(&quot;These are the times that try men&#39;s souls.&quot;);
 377         assertTrue(label.minWidth(-1) &gt;= 0);
 378         assertEquals(skin.get_ellipsisWidth() + 14, label.minWidth(-1), 0);
 379     }
 380 
 381     @Test public void whenTextIsNullAndGraphicIsUnmanaged_computeMinWidth_ReturnsZero() {
 382         label.setPadding(new Insets(7, 7, 7, 7));
 383         Rectangle r = new Rectangle(23, 500);
 384         r.setManaged(false);
 385         label.setGraphic(r);
 386         label.setText(null);
 387         assertEquals(0.0 + 14, label.minWidth(-1), 0);
 388     }
 389 
 390     @Test public void whenTextIsEmptyAndGraphicIsUnmanaged_computeMinWidth_ReturnsZero() {
 391         label.setPadding(new Insets(7, 7, 7, 7));
 392         Rectangle r = new Rectangle(23, 500);
 393         r.setManaged(false);
 394         label.setGraphic(r);
 395         label.setText(&quot;&quot;);
 396         assertEquals(0.0 + 14, label.minWidth(-1), 0);
 397     }
 398 
 399     @Test public void whenTextIsShorterThanEllipsisAndGraphicIsUnmanaged_computeMinWidth_ReturnsTextWidth() {
 400         label.setPadding(new Insets(7, 7, 7, 7));
 401         Rectangle r = new Rectangle(23, 500);
 402         r.setManaged(false);
 403         label.setGraphic(r);
 404         label.setText(&quot;.&quot;);
 405         assertTrue(label.minWidth(-1) &gt;= 0);
 406         assertEquals(skin.get_textWidth() + 14, label.minWidth(-1), 0);
 407     }
 408 
 409     @Test public void whenTextIsGreaterThanEllipsisAndGraphicIsUnmanaged_computeMinWidth_ReturnsEllipsisWidth() {
 410         label.setPadding(new Insets(7, 7, 7, 7));
 411         Rectangle r = new Rectangle(23, 500);
 412         r.setManaged(false);
 413         label.setGraphic(r);
 414         label.setText(&quot;These are the times that try men&#39;s souls.&quot;);
 415         assertTrue(label.minWidth(-1) &gt;= 0);
 416         assertEquals(skin.get_ellipsisWidth() + 14, label.minWidth(-1), 0);
 417     }
 418 
 419     @Test public void whenTextIsNullAndGraphicIsSet_computeMinWidth_ReturnsGraphicWidth() {
 420         label.setPadding(new Insets(7, 7, 7, 7));
 421         Rectangle r = new Rectangle(23, 23);
 422         label.setGraphic(r);
 423         label.setText(null);
 424         assertTrue(label.minWidth(-1) &gt;= 0);
 425         assertEquals(23 + 14, label.minWidth(-1), 0);
 426     }
 427 
 428     @Test public void whenTextIsEmptyAndGraphicIsSet_computeMinWidth_ReturnsGraphicWidth() {
 429         label.setPadding(new Insets(7, 7, 7, 7));
 430         Rectangle r = new Rectangle(23, 23);
 431         label.setGraphic(r);
 432         label.setText(&quot;&quot;);
 433         assertTrue(label.minWidth(-1) &gt;= 0);
 434         assertEquals(23 + 14, label.minWidth(-1), 0);
 435     }
 436 
 437     @Test public void whenTextIsShorterThanEllipsisAndGraphicIsSetAndContentDisplayIsLEFT_computeMinWidth_ReturnsGraphicWidthPlusGraphicTextGapPlusTextWidth() {
 438         label.setPadding(new Insets(7, 7, 7, 7));
 439         Rectangle r = new Rectangle(23, 23);
 440         label.setGraphicTextGap(2);
 441         label.setGraphic(r);
 442         label.setContentDisplay(ContentDisplay.LEFT);
 443         label.setText(&quot;.&quot;);
 444         assertTrue(label.minWidth(-1) &gt;= 0);
 445         assertEquals(23 + 2 + skin.get_textWidth() + 14, label.minWidth(-1), 0);
 446     }
 447 
 448     @Test public void whenTextIsLongThanEllipsisAndGraphicIsSetAndContentDisplayIsLEFT_computeMinWidth_ReturnsGraphicWidthPlusGraphicTextGapPlusEllipsisWidth() {
 449         label.setPadding(new Insets(7, 7, 7, 7));
 450         Rectangle r = new Rectangle(23, 23);
 451         label.setGraphicTextGap(2);
 452         label.setGraphic(r);
 453         label.setContentDisplay(ContentDisplay.LEFT);
 454         label.setText(&quot;Wherefore art thou Romeo?&quot;);
 455         assertTrue(label.minWidth(-1) &gt;= 0);
 456         assertEquals(23 + 2 + skin.get_ellipsisWidth() + 14, label.minWidth(-1), 0);
 457     }
 458 
 459     @Test public void whenTextIsShorterThanEllipsisAndGraphicIsSetAndContentDisplayIsRIGHT_computeMinWidth_ReturnsGraphicWidthPlusGraphicTextGapPlusTextWidth() {
 460         label.setPadding(new Insets(7, 7, 7, 7));
 461         Rectangle r = new Rectangle(23, 23);
 462         label.setGraphicTextGap(2);
 463         label.setGraphic(r);
 464         label.setContentDisplay(ContentDisplay.RIGHT);
 465         label.setText(&quot;.&quot;);
 466         assertTrue(label.minWidth(-1) &gt;= 0);
 467         assertEquals(23 + 2 + skin.get_textWidth() + 14, label.minWidth(-1), 0);
 468     }
 469 
 470     @Test public void whenTextIsLongThanEllipsisAndGraphicIsSetAndContentDisplayIsRIGHT_computeMinWidth_ReturnsGraphicWidthPlusGraphicTextGapPlusEllipsisWidth() {
 471         label.setPadding(new Insets(7, 7, 7, 7));
 472         Rectangle r = new Rectangle(23, 23);
 473         label.setGraphicTextGap(2);
 474         label.setGraphic(r);
 475         label.setContentDisplay(ContentDisplay.RIGHT);
 476         label.setText(&quot;Wherefore art thou Romeo?&quot;);
 477         assertTrue(label.minWidth(-1) &gt;= 0);
 478         assertEquals(23 + 2 + skin.get_ellipsisWidth() + 14, label.minWidth(-1), 0);
 479     }
 480 
 481     @Test public void whenTextIsShorterThanEllipsisAndGraphicIsSetAndContentDisplayIsCENTER_computeMinWidth_ReturnsRightAnswer() {
 482         label.setPadding(new Insets(7, 7, 7, 7));
 483         Rectangle r = new Rectangle(23, 23);
 484         label.setGraphicTextGap(2);
 485         label.setGraphic(r);
 486         label.setContentDisplay(ContentDisplay.CENTER);
 487         label.setText(&quot;.&quot;);
 488         assertTrue(label.minWidth(-1) &gt;= 0);
 489         assertEquals(Math.max(23, skin.get_textWidth()) + 14, label.minWidth(-1), 0);
 490     }
 491 
 492     @Test public void whenTextIsLongThanEllipsisAndGraphicIsSetAndContentDisplayIsCENTER_computeMinWidth_ReturnsRightAnswer() {
 493         label.setPadding(new Insets(7, 7, 7, 7));
 494         Rectangle r = new Rectangle(23, 23);
 495         label.setGraphicTextGap(2);
 496         label.setGraphic(r);
 497         label.setContentDisplay(ContentDisplay.CENTER);
 498         label.setText(&quot;Wherefore art thou Romeo?&quot;);
 499         assertTrue(label.minWidth(-1) &gt;= 0);
 500         assertEquals(Math.max(23, skin.get_ellipsisWidth()) + 14, label.minWidth(-1), 0);
 501     }
 502 
 503     @Test public void whenTextIsShorterThanEllipsisAndGraphicIsSetAndContentDisplayIsTOP_computeMinWidth_ReturnsRightAnswer() {
 504         label.setPadding(new Insets(7, 7, 7, 7));
 505         Rectangle r = new Rectangle(23, 23);
 506         label.setGraphicTextGap(2);
 507         label.setGraphic(r);
 508         label.setContentDisplay(ContentDisplay.TOP);
 509         label.setText(&quot;.&quot;);
 510         assertTrue(label.minWidth(-1) &gt;= 0);
 511         assertEquals(Math.max(23, skin.get_textWidth()) + 14, label.minWidth(-1), 0);
 512     }
 513 
 514     @Test public void whenTextIsLongThanEllipsisAndGraphicIsSetAndContentDisplayIsTOP_computeMinWidth_ReturnsRightAnswer() {
 515         label.setPadding(new Insets(7, 7, 7, 7));
 516         Rectangle r = new Rectangle(23, 23);
 517         label.setGraphicTextGap(2);
 518         label.setGraphic(r);
 519         label.setContentDisplay(ContentDisplay.TOP);
 520         label.setText(&quot;Wherefore art thou Romeo?&quot;);
 521         assertTrue(label.minWidth(-1) &gt;= 0);
 522         assertEquals(Math.max(23, skin.get_ellipsisWidth()) + 14, label.minWidth(-1), 0);
 523     }
 524 
 525     @Test public void whenTextIsShorterThanEllipsisAndGraphicIsSetAndContentDisplayIsBOTTOM_computeMinWidth_ReturnsRightAnswer() {
 526         label.setPadding(new Insets(7, 7, 7, 7));
 527         Rectangle r = new Rectangle(23, 23);
 528         label.setGraphicTextGap(2);
 529         label.setGraphic(r);
 530         label.setContentDisplay(ContentDisplay.BOTTOM);
 531         label.setText(&quot;.&quot;);
 532         assertTrue(label.minWidth(-1) &gt;= 0);
 533         assertEquals(Math.max(23, skin.get_textWidth()) + 14, label.minWidth(-1), 0);
 534     }
 535 
 536     @Test public void whenTextIsLongThanEllipsisAndGraphicIsSetAndContentDisplayIsBOTTOM_computeMinWidth_ReturnsRightAnswer() {
 537         label.setPadding(new Insets(7, 7, 7, 7));
 538         Rectangle r = new Rectangle(23, 23);
 539         label.setGraphicTextGap(2);
 540         label.setGraphic(r);
 541         label.setContentDisplay(ContentDisplay.BOTTOM);
 542         label.setText(&quot;Wherefore art thou Romeo?&quot;);
 543         assertTrue(label.minWidth(-1) &gt;= 0);
 544         assertEquals(Math.max(23, skin.get_ellipsisWidth()) + 14, label.minWidth(-1), 0);
 545     }
 546 
 547     @Test public void whenTextIsShorterThanEllipsisAndGraphicIsSetAndContentDisplayIsGRAPHIC_ONLY_computeMinWidth_ReturnsRightAnswer() {
 548         label.setPadding(new Insets(7, 7, 7, 7));
 549         Rectangle r = new Rectangle(3, 3);
 550         label.setGraphicTextGap(2);
 551         label.setGraphic(r);
 552         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
 553         label.setText(&quot;.&quot;);
 554         assertTrue(label.minWidth(-1) &gt;= 0);
 555         assertEquals(3 + 14, label.minWidth(-1), 0);
 556     }
 557 
 558     @Test public void whenTextIsLongThanEllipsisAndGraphicIsSetAndContentDisplayIsGRAPHIC_ONLY_computeMinWidth_ReturnsRightAnswer() {
 559         label.setPadding(new Insets(7, 7, 7, 7));
 560         Rectangle r = new Rectangle(3, 3);
 561         label.setGraphicTextGap(2);
 562         label.setGraphic(r);
 563         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
 564         label.setText(&quot;Wherefore art thou Romeo?&quot;);
 565         assertTrue(label.minWidth(-1) &gt;= 0);
 566         assertEquals(3 + 14, label.minWidth(-1), 0);
 567     }
 568 
 569     @Test public void whenTextIsShorterThanEllipsisAndGraphicIsSetAndContentDisplayIsTEXT_ONLY_computeMinWidth_ReturnsRightAnswer() {
 570         label.setPadding(new Insets(7, 7, 7, 7));
 571         Rectangle r = new Rectangle(230, 230);
 572         label.setGraphicTextGap(2);
 573         label.setGraphic(r);
 574         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
 575         label.setText(&quot;.&quot;);
 576         assertTrue(label.minWidth(-1) &gt;= 0);
 577         assertEquals(skin.get_textWidth() + 14, label.minWidth(-1), 0);
 578     }
 579 
 580     @Test public void whenTextIsLongThanEllipsisAndGraphicIsSetAndContentDisplayIsTEXT_ONLY_computeMinWidth_ReturnsRightAnswer() {
 581         label.setPadding(new Insets(7, 7, 7, 7));
 582         Rectangle r = new Rectangle(230, 230);
 583         label.setGraphicTextGap(2);
 584         label.setGraphic(r);
 585         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
 586         label.setText(&quot;Wherefore art thou Romeo?&quot;);
 587         assertTrue(label.minWidth(-1) &gt;= 0);
 588         assertEquals(skin.get_ellipsisWidth() + 14, label.minWidth(-1), 0);
 589     }
 590 
 591     /****************************************************************************
 592      *                                                                          *
 593      * Tests for minHeight                                                      *
 594      *                                                                          *
 595      ***************************************************************************/
 596 
 597     @Test public void whenTextIsNullAndNoGraphic_computeMinHeight_ReturnsSingleLineStringHeight() {
 598         label.setText(null);
 599         label.setPadding(new Insets(7, 7, 7, 7));
 600         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 601         assertEquals(lineHeight + 14, label.minHeight(-1), 0);
 602     }
 603 
 604     @Test public void whenTextIsEmptyAndNoGraphic_computeMinHeight_ReturnsSingleLineStringHeight() {
 605         label.setText(&quot;&quot;);
 606         label.setPadding(new Insets(7, 7, 7, 7));
 607         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 608         assertEquals(lineHeight + 14, label.minHeight(-1), 0);
 609     }
 610 
 611     @Test public void whenTextIsSetAndNoGraphic_computeMinHeight_ReturnsSingleLineStringHeight() {
 612         label.setText(&quot;Howdy Pardner&quot;);
 613         label.setPadding(new Insets(7, 7, 7, 7));
 614         assertTrue(label.minHeight(-1) &gt;= 0);
 615         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 616         assertEquals(lineHeight + 14, label.minHeight(-1), 0);
 617     }
 618 
 619     @Test public void whenTextIsNullAndUnmanagedGraphic_computeMinHeight_ReturnsSingleLineStringHeight() {
 620         label.setText(null);
 621         label.setPadding(new Insets(7, 7, 7, 7));
 622         Rectangle r = new Rectangle(23, 500);
 623         r.setManaged(false);
 624         label.setGraphic(r);
 625         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 626         assertEquals(lineHeight + 14, label.minHeight(-1), 0);
 627     }
 628 
 629     @Test public void whenTextIsEmptyAndUnmanagedGraphic_computeMinHeight_ReturnsSingleLineStringHeight() {
 630         label.setText(&quot;&quot;);
 631         label.setPadding(new Insets(7, 7, 7, 7));
 632         Rectangle r = new Rectangle(23, 500);
 633         r.setManaged(false);
 634         label.setGraphic(r);
 635         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 636         assertEquals(lineHeight + 14, label.minHeight(-1), 0);
 637     }
 638 
 639     @Test public void whenTextIsSetAndUnmanagedGraphic_computeMinHeight_ReturnsSingleLineStringHeight() {
 640         label.setText(&quot;Howdy Pardner&quot;);
 641         label.setPadding(new Insets(7, 7, 7, 7));
 642         Rectangle r = new Rectangle(23, 500);
 643         r.setManaged(false);
 644         label.setGraphic(r);
 645         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 646         assertTrue(label.minHeight(-1) &gt;= 0);
 647         assertEquals(lineHeight + 14, label.minHeight(-1), 0);
 648     }
 649 
 650     @Test public void whenTextIsNullAndGraphicIsSetWithTOPContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 651         label.setText(null);
 652         label.setPadding(new Insets(7, 7, 7, 7));
 653         Rectangle r = new Rectangle(23, 23);
 654         label.setGraphicTextGap(2);
 655         label.setGraphic(r);
 656         label.setContentDisplay(ContentDisplay.TOP);
 657         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 658         assertEquals(23 + lineHeight + 2 + 14, label.minHeight(-1), 0);
 659     }
 660 
 661     @Test public void whenTextIsEmptyAndGraphicIsSetWithTOPContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 662         label.setText(&quot;&quot;);
 663         label.setPadding(new Insets(7, 7, 7, 7));
 664         Rectangle r = new Rectangle(23, 23);
 665         label.setGraphicTextGap(2);
 666         label.setGraphic(r);
 667         label.setContentDisplay(ContentDisplay.TOP);
 668         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 669         assertEquals(23 + lineHeight + 2 + 14, label.minHeight(-1), 0);
 670     }
 671 
 672     @Test public void whenTextIsSetAndGraphicIsSetWithTOPContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 673         label.setText(&quot;For crying in the mud&quot;);
 674         label.setPadding(new Insets(7, 7, 7, 7));
 675         Rectangle r = new Rectangle(23, 23);
 676         label.setGraphic(r);
 677         label.setGraphicTextGap(2);
 678         label.setContentDisplay(ContentDisplay.TOP);
 679         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 680         assertEquals(23 + lineHeight + 2 + 14, label.minHeight(-1), 0);
 681     }
 682 
 683     @Test public void whenTextIsNullAndGraphicIsSetWithRIGHTContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 684         label.setText(null);
 685         label.setPadding(new Insets(7, 7, 7, 7));
 686         Rectangle r = new Rectangle(23, 23);
 687         label.setGraphic(r);
 688         label.setContentDisplay(ContentDisplay.RIGHT);
 689         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 690         assertEquals(Math.max(23, lineHeight) + 14, label.minHeight(-1), 0);
 691     }
 692 
 693     @Test public void whenTextIsEmptyAndGraphicIsSetWithRIGHTContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 694         label.setText(&quot;&quot;);
 695         label.setPadding(new Insets(7, 7, 7, 7));
 696         Rectangle r = new Rectangle(23, 23);
 697         label.setGraphic(r);
 698         label.setContentDisplay(ContentDisplay.RIGHT);
 699         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 700         assertEquals(Math.max(23, lineHeight) + 14, label.minHeight(-1), 0);
 701     }
 702 
 703     @Test public void whenTextIsSetAndGraphicIsSetWithRIGHTContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 704         label.setText(&quot;For crying in the mud&quot;);
 705         label.setPadding(new Insets(7, 7, 7, 7));
 706         Rectangle r = new Rectangle(23, 23);
 707         label.setGraphic(r);
 708         label.setContentDisplay(ContentDisplay.RIGHT);
 709         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 710         assertEquals(Math.max(23, lineHeight) + 14, label.minHeight(-1), 0);
 711     }
 712 
 713     @Test public void whenTextIsNullAndGraphicIsSetWithBOTTOMContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 714         label.setText(null);
 715         label.setPadding(new Insets(7, 7, 7, 7));
 716         Rectangle r = new Rectangle(23, 23);
 717         label.setGraphicTextGap(2);
 718         label.setGraphic(r);
 719         label.setContentDisplay(ContentDisplay.BOTTOM);
 720         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 721         assertEquals(23 + lineHeight + 2 + 14, label.minHeight(-1), 0);
 722     }
 723 
 724     @Test public void whenTextIsEmptyAndGraphicIsSetWithBOTTOMContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 725         label.setText(&quot;&quot;);
 726         label.setPadding(new Insets(7, 7, 7, 7));
 727         Rectangle r = new Rectangle(23, 23);
 728         label.setGraphicTextGap(2);
 729         label.setGraphic(r);
 730         label.setContentDisplay(ContentDisplay.BOTTOM);
 731         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 732         assertEquals(23 + lineHeight + 2 + 14, label.minHeight(-1), 0);
 733     }
 734 
 735     @Test public void whenTextIsSetAndGraphicIsSetWithBOTTOMContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 736         label.setText(&quot;For crying in the mud&quot;);
 737         label.setPadding(new Insets(7, 7, 7, 7));
 738         Rectangle r = new Rectangle(23, 23);
 739         label.setGraphic(r);
 740         label.setGraphicTextGap(2);
 741         label.setContentDisplay(ContentDisplay.BOTTOM);
 742         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 743         assertEquals(23 + lineHeight + 2 + 14, label.minHeight(-1), 0);
 744     }
 745 
 746     @Test public void whenTextIsNullAndGraphicIsSetWithLEFTContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 747         label.setText(null);
 748         label.setPadding(new Insets(7, 7, 7, 7));
 749         Rectangle r = new Rectangle(23, 23);
 750         label.setGraphic(r);
 751         label.setContentDisplay(ContentDisplay.LEFT);
 752         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 753         assertEquals(Math.max(23, lineHeight) + 14, label.minHeight(-1), 0);
 754     }
 755 
 756     @Test public void whenTextIsEmptyAndGraphicIsSetWithLEFTContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 757         label.setText(&quot;&quot;);
 758         label.setPadding(new Insets(7, 7, 7, 7));
 759         Rectangle r = new Rectangle(23, 23);
 760         label.setGraphic(r);
 761         label.setContentDisplay(ContentDisplay.LEFT);
 762         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 763         assertEquals(Math.max(23, lineHeight) + 14, label.minHeight(-1), 0);
 764     }
 765 
 766     @Test public void whenTextIsSetAndGraphicIsSetWithLEFTContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 767         label.setText(&quot;For crying in the mud&quot;);
 768         label.setPadding(new Insets(7, 7, 7, 7));
 769         Rectangle r = new Rectangle(23, 23);
 770         label.setGraphic(r);
 771         label.setContentDisplay(ContentDisplay.LEFT);
 772         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 773         assertEquals(Math.max(23, lineHeight) + 14, label.minHeight(-1), 0);
 774     }
 775 
 776     @Test public void whenTextIsNullAndGraphicIsSetWithCENTERContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 777         label.setText(null);
 778         label.setPadding(new Insets(7, 7, 7, 7));
 779         Rectangle r = new Rectangle(23, 23);
 780         label.setGraphic(r);
 781         label.setContentDisplay(ContentDisplay.CENTER);
 782         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 783         assertEquals(Math.max(23, lineHeight) + 14, label.minHeight(-1), 0);
 784     }
 785 
 786     @Test public void whenTextIsEmptyAndGraphicIsSetWithCENTERContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 787         label.setText(&quot;&quot;);
 788         label.setPadding(new Insets(7, 7, 7, 7));
 789         Rectangle r = new Rectangle(23, 23);
 790         label.setGraphic(r);
 791         label.setContentDisplay(ContentDisplay.CENTER);
 792         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 793         assertEquals(Math.max(23, lineHeight) + 14, label.minHeight(-1), 0);
 794     }
 795 
 796     @Test public void whenTextIsSetAndGraphicIsSetWithCENTERContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 797         label.setText(&quot;For crying in the mud&quot;);
 798         label.setPadding(new Insets(7, 7, 7, 7));
 799         Rectangle r = new Rectangle(23, 23);
 800         label.setGraphic(r);
 801         label.setContentDisplay(ContentDisplay.CENTER);
 802         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 803         assertEquals(Math.max(23, lineHeight) + 14, label.minHeight(-1), 0);
 804     }
 805 
 806     @Test public void whenTextIsNullAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 807         label.setText(null);
 808         label.setPadding(new Insets(7, 7, 7, 7));
 809         Rectangle r = new Rectangle(23, 23);
 810         label.setGraphic(r);
 811         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
 812         assertEquals(23 + 14, label.minHeight(-1), 0);
 813     }
 814 
 815     @Test public void whenTextIsEmptyAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 816         label.setText(&quot;&quot;);
 817         label.setPadding(new Insets(7, 7, 7, 7));
 818         Rectangle r = new Rectangle(23, 23);
 819         label.setGraphic(r);
 820         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
 821         assertEquals(23 + 14, label.minHeight(-1), 0);
 822     }
 823 
 824     @Test public void whenTextIsSetAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 825         label.setText(&quot;For crying in the mud&quot;);
 826         label.setPadding(new Insets(7, 7, 7, 7));
 827         Rectangle r = new Rectangle(23, 23);
 828         label.setGraphic(r);
 829         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
 830         assertEquals(23 + 14, label.minHeight(-1), 0);
 831     }
 832 
 833     @Test public void whenTextIsNullAndGraphicIsSetWithTEXT_ONLYContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 834         label.setText(null);
 835         label.setPadding(new Insets(7, 7, 7, 7));
 836         Rectangle r = new Rectangle(23, 23);
 837         label.setGraphic(r);
 838         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
 839         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 840         assertEquals(lineHeight + 14, label.minHeight(-1), 0);
 841     }
 842 
 843     @Test public void whenTextIsEmptyAndGraphicIsSetWithTEXT_ONLYContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 844         label.setText(&quot;&quot;);
 845         label.setPadding(new Insets(7, 7, 7, 7));
 846         Rectangle r = new Rectangle(23, 23);
 847         label.setGraphic(r);
 848         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
 849         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 850         assertEquals(lineHeight + 14, label.minHeight(-1), 0);
 851     }
 852 
 853     @Test public void whenTextIsSetAndGraphicIsSetWithTEXT_ONLYContentDisplay_computeMinHeight_ReturnsRightAnswer() {
 854         label.setText(&quot;For crying in the mud&quot;);
 855         label.setPadding(new Insets(7, 7, 7, 7));
 856         Rectangle r = new Rectangle(23, 23);
 857         label.setGraphic(r);
 858         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
 859         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
 860         assertEquals(lineHeight + 14, label.minHeight(-1), 0);
 861     }
 862 
 863     /****************************************************************************
 864      *                                                                          *
 865      * Tests for prefWidth                                                      *
 866      *                                                                          *
 867      ***************************************************************************/
 868 
 869     @Test public void whenTextIsNullAndNoGraphic_computePrefWidth_ReturnsPadding() {
 870         label.setText(null);
 871         label.setPadding(new Insets(7, 7, 7, 7));
 872         assertEquals(14, label.prefWidth(-1), 0);
 873     }
 874 
 875     @Test public void whenTextIsEmptyAndNoGraphic_computePrefWidth_ReturnsPadding() {
 876         label.setText(&quot;&quot;);
 877         label.setPadding(new Insets(7, 7, 7, 7));
 878         assertEquals(14, label.prefWidth(-1), 0);
 879     }
 880 
 881     @Test public void whenTextIsSetAndNoGraphic_computePrefWidth_ReturnsTextWidthPlusPadding() {
 882         label.setText(&quot;Lollipop&quot;);
 883         label.setPadding(new Insets(7, 7, 7, 7));
 884         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;Lollipop&quot;, 0);
 885         assertEquals(14 + textWidth, label.prefWidth(-1), 0);
 886     }
 887 
 888     @Test public void whenTextIsNullAndUnmanagedGraphic_computePrefWidth_ReturnsPadding() {
 889         label.setText(null);
 890         Rectangle r = new Rectangle(0, 0, 50, 50);
 891         r.setManaged(false);
 892         label.setGraphic(r);
 893         label.setPadding(new Insets(7, 7, 7, 7));
 894         assertEquals(14, label.prefWidth(-1), 0);
 895     }
 896 
 897     @Test public void whenTextIsEmptyAndUnmanagedGraphic_computePrefWidth_ReturnsPadding() {
 898         label.setText(&quot;&quot;);
 899         Rectangle r = new Rectangle(0, 0, 50, 50);
 900         r.setManaged(false);
 901         label.setGraphic(r);
 902         label.setPadding(new Insets(7, 7, 7, 7));
 903         assertEquals(14, label.prefWidth(-1), 0);
 904     }
 905 
 906     @Test public void whenTextIsSetAndUnmanagedGraphic_computePrefWidth_ReturnsTextWidthPlusPadding() {
 907         label.setText(&quot;Lollipop&quot;);
 908         Rectangle r = new Rectangle(0, 0, 50, 50);
 909         r.setManaged(false);
 910         label.setGraphic(r);
 911         label.setPadding(new Insets(7, 7, 7, 7));
 912         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;Lollipop&quot;, 0);
 913         assertEquals(14 + textWidth, label.prefWidth(-1), 0);
 914     }
 915 
 916     @Test public void whenTextIsNullAndGraphicIsSetWithTOPContentDisplay_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
 917         label.setText(null);
 918         label.setGraphic(new Rectangle(0, 0, 20, 20));
 919         label.setGraphicTextGap(6.5);
 920         label.setContentDisplay(ContentDisplay.TOP);
 921         label.setPadding(new Insets(7, 7, 7, 7));
 922         assertEquals(14 + 20, label.prefWidth(-1), 0);
 923     }
 924 
 925     @Test public void whenTextIsEmptyAndGraphicIsSetWithTOPContentDisplay_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
 926         label.setText(&quot;&quot;);
 927         label.setGraphic(new Rectangle(0, 0, 20, 20));
 928         label.setGraphicTextGap(6.5);
 929         label.setContentDisplay(ContentDisplay.TOP);
 930         label.setPadding(new Insets(7, 7, 7, 7));
 931         assertEquals(14 + 20, label.prefWidth(-1), 0);
 932     }
 933 
 934     @Test public void whenTextIsSetAndGraphicIsSetWithTOPContentDisplayAndGraphicIsWider_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
 935         label.setText(&quot;Lollipop&quot;);
 936         label.setGraphic(new Rectangle(0, 0, 200, 20));
 937         label.setGraphicTextGap(6.5);
 938         label.setContentDisplay(ContentDisplay.TOP);
 939         label.setPadding(new Insets(7, 7, 7, 7));
 940         assertEquals(14 + 200, label.prefWidth(-1), 0);
 941     }
 942 
 943     @Test public void whenTextIsSetAndGraphicIsSetWithTOPContentDisplayAndTextIsWider_computePrefWidth_ReturnsTextWidthPlusPadding() {
 944         label.setText(&quot;This is the right place&quot;);
 945         label.setGraphic(new Rectangle(0, 0, 20, 20));
 946         label.setGraphicTextGap(6.5);
 947         label.setContentDisplay(ContentDisplay.TOP);
 948         label.setPadding(new Insets(7, 7, 7, 7));
 949         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;This is the right place&quot;, 0);
 950         assertEquals(14 + textWidth, label.prefWidth(-1), 0);
 951     }
 952 
 953     @Test public void whenTextIsNullAndGraphicIsSetWithRIGHTContentDisplay_computePrefWidth_ReturnsGraphicPlusPaddingNotIncludingGap() {
 954         label.setText(null);
 955         label.setGraphic(new Rectangle(0, 0, 20, 20));
 956         label.setGraphicTextGap(6.5);
 957         label.setContentDisplay(ContentDisplay.RIGHT);
 958         label.setPadding(new Insets(7, 7, 7, 7));
 959         assertEquals(20 + 14, label.prefWidth(-1), 0);
 960     }
 961 
 962     @Test public void whenTextIsEmptyAndGraphicIsSetWithRIGHTContentDisplay_computePrefWidth_ReturnsGraphicPlusPaddingNotIncludingGap() {
 963         label.setText(&quot;&quot;);
 964         label.setGraphic(new Rectangle(0, 0, 20, 20));
 965         label.setGraphicTextGap(6.5);
 966         label.setContentDisplay(ContentDisplay.RIGHT);
 967         label.setPadding(new Insets(7, 7, 7, 7));
 968         assertEquals(20 + 14, label.prefWidth(-1), 0);
 969     }
 970 
 971     @Test public void whenTextIsSetAndGraphicIsSetWithRIGHTContentDisplay_computePrefWidth_ReturnsTextWidthPlusGraphicWidthPlusGapPlusPadding() {
 972         label.setText(&quot;Howdy&quot;);
 973         label.setGraphic(new Rectangle(0, 0, 20, 20));
 974         label.setGraphicTextGap(6.5);
 975         label.setContentDisplay(ContentDisplay.RIGHT);
 976         label.setPadding(new Insets(7, 7, 7, 7));
 977         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;Howdy&quot;, 0);
 978         assertEquals(14 + textWidth + 6.5 + 20, label.prefWidth(-1), 0);
 979     }
 980 
 981     @Test public void whenTextIsNullAndGraphicIsSetWithBOTTOMContentDisplay_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
 982         label.setText(null);
 983         label.setGraphic(new Rectangle(0, 0, 20, 20));
 984         label.setGraphicTextGap(6.5);
 985         label.setContentDisplay(ContentDisplay.BOTTOM);
 986         label.setPadding(new Insets(7, 7, 7, 7));
 987         assertEquals(14 + 20, label.prefWidth(-1), 0);
 988     }
 989 
 990     @Test public void whenTextIsEmptyAndGraphicIsSetWithBOTTOMContentDisplay_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
 991         label.setText(null);
 992         label.setGraphic(new Rectangle(0, 0, 20, 20));
 993         label.setGraphicTextGap(6.5);
 994         label.setContentDisplay(ContentDisplay.BOTTOM);
 995         label.setPadding(new Insets(7, 7, 7, 7));
 996         assertEquals(14 + 20, label.prefWidth(-1), 0);
 997     }
 998 
 999     @Test public void whenTextIsSetAndGraphicIsSetWithBOTTOMContentDisplayAndGraphicIsWider_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
1000         label.setText(&quot;Lollipop&quot;);
1001         label.setGraphic(new Rectangle(0, 0, 200, 20));
1002         label.setGraphicTextGap(6.5);
1003         label.setContentDisplay(ContentDisplay.BOTTOM);
1004         label.setPadding(new Insets(7, 7, 7, 7));
1005         assertEquals(14 + 200, label.prefWidth(-1), 0);
1006     }
1007 
1008     @Test public void whenTextIsSetAndGraphicIsSetWithBOTTOMContentDisplayAndTextIsWider_computePrefWidth_ReturnsTextWidthPlusPadding() {
1009         label.setText(&quot;This is the right place&quot;);
1010         label.setGraphic(new Rectangle(0, 0, 20, 20));
1011         label.setGraphicTextGap(6.5);
1012         label.setContentDisplay(ContentDisplay.BOTTOM);
1013         label.setPadding(new Insets(7, 7, 7, 7));
1014         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;This is the right place&quot;, 0);
1015         assertEquals(14 + textWidth, label.prefWidth(-1), 0);
1016     }
1017 
1018     @Test public void whenTextIsNullAndGraphicIsSetWithLEFTContentDisplay_computePrefWidth_ReturnsGraphicPlusPaddingNotIncludingGap() {
1019         label.setText(null);
1020         label.setGraphic(new Rectangle(0, 0, 20, 20));
1021         label.setGraphicTextGap(6.5);
1022         label.setContentDisplay(ContentDisplay.LEFT);
1023         label.setPadding(new Insets(7, 7, 7, 7));
1024         assertEquals(20 + 14, label.prefWidth(-1), 0);
1025     }
1026 
1027     @Test public void whenTextIsEmptyAndGraphicIsSetWithLEFTContentDisplay_computePrefWidth_ReturnsGraphicPlusPaddingNotIncludingGap() {
1028         label.setText(&quot;&quot;);
1029         label.setGraphic(new Rectangle(0, 0, 20, 20));
1030         label.setGraphicTextGap(6.5);
1031         label.setContentDisplay(ContentDisplay.LEFT);
1032         label.setPadding(new Insets(7, 7, 7, 7));
1033         assertEquals(20 + 14, label.prefWidth(-1), 0);
1034     }
1035 
1036     @Test public void whenTextIsSetAndGraphicIsSetWithLEFTContentDisplay_computePrefWidth_ReturnsTextWidthPlusGraphicWidthPlusGapPlusPadding() {
1037         label.setText(&quot;Howdy&quot;);
1038         label.setGraphic(new Rectangle(0, 0, 20, 20));
1039         label.setGraphicTextGap(6.5);
1040         label.setContentDisplay(ContentDisplay.LEFT);
1041         label.setPadding(new Insets(7, 7, 7, 7));
1042         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;Howdy&quot;, 0);
1043         assertEquals(14 + textWidth + 6.5 + 20, label.prefWidth(-1), 0);
1044     }
1045 
1046     @Test public void whenTextIsNullAndGraphicIsSetWithCENTERContentDisplay_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
1047         label.setText(null);
1048         label.setGraphic(new Rectangle(0, 0, 20, 20));
1049         label.setGraphicTextGap(6.5);
1050         label.setContentDisplay(ContentDisplay.CENTER);
1051         label.setPadding(new Insets(7, 7, 7, 7));
1052         assertEquals(14 + 20, label.prefWidth(-1), 0);
1053     }
1054 
1055     @Test public void whenTextIsEmptyAndGraphicIsSetWithCENTERContentDisplay_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
1056         label.setText(&quot;&quot;);
1057         label.setGraphic(new Rectangle(0, 0, 20, 20));
1058         label.setGraphicTextGap(6.5);
1059         label.setContentDisplay(ContentDisplay.CENTER);
1060         label.setPadding(new Insets(7, 7, 7, 7));
1061         assertEquals(14 + 20, label.prefWidth(-1), 0);
1062     }
1063 
1064     @Test public void whenTextIsSetAndGraphicIsSetWithCENTERContentDisplayAndGraphicIsWider_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
1065         label.setText(&quot;Lollipop&quot;);
1066         label.setGraphic(new Rectangle(0, 0, 200, 20));
1067         label.setGraphicTextGap(6.5);
1068         label.setContentDisplay(ContentDisplay.CENTER);
1069         label.setPadding(new Insets(7, 7, 7, 7));
1070         assertEquals(14 + 200, label.prefWidth(-1), 0);
1071     }
1072 
1073     @Test public void whenTextIsSetAndGraphicIsSetWithCENTERContentDisplayAndTextIsWider_computePrefWidth_ReturnsTextWidthPlusPadding() {
1074         label.setText(&quot;This is the right place&quot;);
1075         label.setGraphic(new Rectangle(0, 0, 20, 20));
1076         label.setGraphicTextGap(6.5);
1077         label.setContentDisplay(ContentDisplay.CENTER);
1078         label.setPadding(new Insets(7, 7, 7, 7));
1079         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;This is the right place&quot;, 0);
1080         assertEquals(14 + textWidth, label.prefWidth(-1), 0);
1081     }
1082 
1083     @Test public void whenTextIsNullAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
1084         label.setText(null);
1085         label.setGraphic(new Rectangle(0, 0, 20, 20));
1086         label.setGraphicTextGap(6.5);
1087         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1088         label.setPadding(new Insets(7, 7, 7, 7));
1089         assertEquals(14 + 20, label.prefWidth(-1), 0);
1090     }
1091 
1092     @Test public void whenTextIsEmptyAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
1093         label.setText(&quot;&quot;);
1094         label.setGraphic(new Rectangle(0, 0, 20, 20));
1095         label.setGraphicTextGap(6.5);
1096         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1097         label.setPadding(new Insets(7, 7, 7, 7));
1098         assertEquals(14 + 20, label.prefWidth(-1), 0);
1099     }
1100 
1101     @Test public void whenTextIsSetAndGraphicIsSetWithGRAPHIC_ONLYContentDisplayAndGraphicIsWider_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
1102         label.setText(&quot;Howdy&quot;);
1103         label.setGraphic(new Rectangle(0, 0, 200, 20));
1104         label.setGraphicTextGap(6.5);
1105         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1106         label.setPadding(new Insets(7, 7, 7, 7));
1107         assertEquals(14 + 200, label.prefWidth(-1), 0);
1108     }
1109 
1110     @Test public void whenTextIsSetAndGraphicIsSetWithGRAPHIC_ONLYContentDisplayAndTextIsWider_computePrefWidth_ReturnsGraphicWidthPlusPadding() {
1111         label.setText(&quot;Tally ho, off to the races&quot;);
1112         label.setGraphic(new Rectangle(0, 0, 20, 20));
1113         label.setGraphicTextGap(6.5);
1114         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1115         label.setPadding(new Insets(7, 7, 7, 7));
1116         assertEquals(14 + 20, label.prefWidth(-1), 0);
1117     }
1118 
1119     // TODO should this include the gap??
1120     @Test public void whenTextIsNullAndGraphicIsSetWithTEXT_ONLYContentDisplay_computePrefWidth_ReturnsPadding() {
1121         label.setText(null);
1122         label.setGraphic(new Rectangle(0, 0, 20, 20));
1123         label.setGraphicTextGap(6.5);
1124         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
1125         label.setPadding(new Insets(7, 7, 7, 7));
1126         assertEquals(14, label.prefWidth(-1), 0);
1127     }
1128 
1129     @Test public void whenTextIsEmptyAndGraphicIsSetWithTEXT_ONLYContentDisplay_computePrefWidth_ReturnsPadding() {
1130         label.setText(&quot;&quot;);
1131         label.setGraphic(new Rectangle(0, 0, 20, 20));
1132         label.setGraphicTextGap(6.5);
1133         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
1134         label.setPadding(new Insets(7, 7, 7, 7));
1135         assertEquals(14, label.prefWidth(-1), 0);
1136     }
1137 
1138     // TODO should this include the gap? I guess not, otherwise our gap would have to default to 0
1139     @Test public void whenTextIsSetAndGraphicIsSetWithTEXT_ONLYContentDisplay_computePrefWidth_ReturnsTextWidthPlusPadding() {
1140         label.setText(&quot;Yippee Skippee&quot;);
1141         label.setGraphic(new Rectangle(0, 0, 20, 20));
1142         label.setGraphicTextGap(6.5);
1143         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
1144         label.setPadding(new Insets(7, 7, 7, 7));
1145         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;Yippee Skippee&quot;, 0);
1146         assertEquals(14 + textWidth, label.prefWidth(-1), 0);
1147     }
1148 
1149     /****************************************************************************
1150      *                                                                          *
1151      * Tests for prefHeight                                                     *
1152      *                                                                          *
1153      ***************************************************************************/
1154 
1155     @Test public void whenTextHasNewlines_computePrefHeight_IncludesTheMultipleLinesInThePrefHeight() {
1156         label.setText(&quot;This\nis a test\nof the emergency\nbroadcast system.\nThis is only a test&quot;);
1157         label.setPadding(new Insets(0, 0, 0, 0));
1158         final double singleLineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1159         final double height = label.prefHeight(-1);
1160         assertTrue(height &gt;= singleLineHeight * 5);
1161     }
1162 
1163     @Test public void whenTextHasNewlinesAndPositiveLineSpacing_computePrefHeight_IncludesTheMultipleLinesAndLineSpacingInThePrefHeight() {
1164         label.setLineSpacing(2);
1165         label.setText(&quot;This\nis a test\nof the emergency\nbroadcast system.\nThis is only a test&quot;);
1166         label.setPadding(new Insets(0, 0, 0, 0));
1167         final double singleLineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1168         final double expectedHeight = singleLineHeight * 5 + label.getLineSpacing() * 5 - label.getLineSpacing();
1169         final double height = label.prefHeight(-1);
1170         assertEquals(expectedHeight, height, 0);
1171     }
1172 
1173     @Test public void whenTextHasNewlinesAndNegativeLineSpacing_computePrefHeight_IncludesTheMultipleLinesAndLineSpacingInThePrefHeight() {
1174         label.setLineSpacing(-2);
1175         label.setText(&quot;This\nis a test\nof the emergency\nbroadcast system.\nThis is only a test&quot;);
1176         label.setPadding(new Insets(0, 0, 0, 0));
1177         final double singleLineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1178         final double expectedHeight = singleLineHeight * 5 + label.getLineSpacing() * 5 - label.getLineSpacing();
1179         final double height = label.prefHeight(-1);
1180         assertEquals(expectedHeight, height, 0);
1181     }
1182 
1183     @Test public void whenTextHasNewlinesAfterPreviousComputationOf_computePrefHeight_IncludesTheMultipleLinesInThePrefHeight() {
1184         label.setText(&quot;This is a test&quot;);
1185         final double oldPrefHeight = label.prefHeight(-1);
1186         label.setText(&quot;This\nis a test\nof the emergency\nbroadcast system.\nThis is only a test&quot;);
1187         final double newPrefHeight = label.prefHeight(-1);
1188         assertTrue(oldPrefHeight != newPrefHeight);
1189     }
1190 
1191     @Test public void whenTextIsNullAndNoGraphic_computePrefHeight_ReturnsSingleLineStringHeightPlusPadding() {
1192         label.setText(null);
1193         label.setPadding(new Insets(7, 7, 7, 7));
1194         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1195         assertEquals(14 + lineHeight, label.prefHeight(-1), 0);
1196     }
1197 
1198     @Test public void whenTextIsEmptyAndNoGraphic_computePrefHeight_ReturnsSingleLineStringHeightPlusPadding() {
1199         label.setText(&quot;&quot;);
1200         label.setPadding(new Insets(7, 7, 7, 7));
1201         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1202         assertEquals(14 + lineHeight, label.prefHeight(-1), 0);
1203     }
1204 
1205     @Test public void whenTextIsSetAndNoGraphic_computePrefHeight_ReturnsSingleLineStringHeightPlusPadding() {
1206         label.setText(&quot;Howdy Pardner&quot;);
1207         label.setPadding(new Insets(7, 7, 7, 7));
1208         assertTrue(label.prefHeight(-1) &gt;= 0);
1209         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1210         assertEquals(14 + lineHeight, label.prefHeight(-1), 0);
1211     }
1212 
1213     @Test public void whenTextIsNullAndUnmanagedGraphic_computePrefHeight_ReturnsSingleLineStringHeightPlusPadding() {
1214         label.setText(null);
1215         label.setPadding(new Insets(7, 7, 7, 7));
1216         Rectangle r = new Rectangle(23, 500);
1217         r.setManaged(false);
1218         label.setGraphic(r);
1219         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1220         assertEquals(14 + lineHeight, label.prefHeight(-1), 0);
1221     }
1222 
1223     @Test public void whenTextIsEmptyAndUnmanagedGraphic_computePrefHeight_ReturnsSingleLineStringHeightPlusPadding() {
1224         label.setText(&quot;&quot;);
1225         label.setPadding(new Insets(7, 7, 7, 7));
1226         Rectangle r = new Rectangle(23, 500);
1227         r.setManaged(false);
1228         label.setGraphic(r);
1229         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1230         assertEquals(14 + lineHeight, label.prefHeight(-1), 0);
1231     }
1232 
1233     @Test public void whenTextIsSetAndUnmanagedGraphic_computePrefHeight_ReturnsSingleLineStringHeightPlusPadding() {
1234         label.setText(&quot;Howdy Pardner&quot;);
1235         label.setPadding(new Insets(7, 7, 7, 7));
1236         Rectangle r = new Rectangle(23, 500);
1237         r.setManaged(false);
1238         label.setGraphic(r);
1239         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1240         assertTrue(label.prefHeight(-1) &gt;= 0);
1241         assertEquals(14 + lineHeight, label.prefHeight(-1), 0);
1242     }
1243 
1244     @Test public void whenTextIsNullAndGraphicIsSetWithTOPContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1245         label.setText(null);
1246         label.setPadding(new Insets(7, 7, 7, 7));
1247         Rectangle r = new Rectangle(23, 23);
1248         label.setGraphicTextGap(2);
1249         label.setGraphic(r);
1250         label.setContentDisplay(ContentDisplay.TOP);
1251         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1252         assertEquals(14 + 23 + lineHeight + 2, label.prefHeight(-1), 0);
1253     }
1254 
1255     @Test public void whenTextIsEmptyAndGraphicIsSetWithTOPContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1256         label.setText(&quot;&quot;);
1257         label.setPadding(new Insets(7, 7, 7, 7));
1258         Rectangle r = new Rectangle(23, 23);
1259         label.setGraphicTextGap(2);
1260         label.setGraphic(r);
1261         label.setContentDisplay(ContentDisplay.TOP);
1262         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1263         assertEquals(14 + 23 + lineHeight + 2, label.prefHeight(-1), 0);
1264     }
1265 
1266     @Test public void whenTextIsSetAndGraphicIsSetWithTOPContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1267         label.setText(&quot;For crying in the mud&quot;);
1268         label.setPadding(new Insets(7, 7, 7, 7));
1269         Rectangle r = new Rectangle(23, 23);
1270         label.setGraphic(r);
1271         label.setGraphicTextGap(2);
1272         label.setContentDisplay(ContentDisplay.TOP);
1273         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1274         assertEquals(14 + 23 + lineHeight + 2, label.prefHeight(-1), 0);
1275     }
1276 
1277     @Test public void whenTextIsNullAndGraphicIsSetWithRIGHTContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1278         label.setText(null);
1279         label.setPadding(new Insets(7, 7, 7, 7));
1280         Rectangle r = new Rectangle(23, 23);
1281         label.setGraphic(r);
1282         label.setContentDisplay(ContentDisplay.RIGHT);
1283         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1284         assertEquals(14 + Math.max(23, lineHeight), label.prefHeight(-1), 0);
1285     }
1286 
1287     @Test public void whenTextIsEmptyAndGraphicIsSetWithRIGHTContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1288         label.setText(&quot;&quot;);
1289         label.setPadding(new Insets(7, 7, 7, 7));
1290         Rectangle r = new Rectangle(23, 23);
1291         label.setGraphic(r);
1292         label.setContentDisplay(ContentDisplay.RIGHT);
1293         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1294         assertEquals(14 + Math.max(23, lineHeight), label.prefHeight(-1), 0);
1295     }
1296 
1297     @Test public void whenTextIsSetAndGraphicIsSetWithRIGHTContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1298         label.setText(&quot;For crying in the mud&quot;);
1299         label.setPadding(new Insets(7, 7, 7, 7));
1300         Rectangle r = new Rectangle(23, 23);
1301         label.setGraphic(r);
1302         label.setContentDisplay(ContentDisplay.RIGHT);
1303         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1304         assertEquals(14 + Math.max(23, lineHeight), label.prefHeight(-1), 0);
1305     }
1306 
1307     @Test public void whenTextIsNullAndGraphicIsSetWithBOTTOMContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1308         label.setText(null);
1309         label.setPadding(new Insets(7, 7, 7, 7));
1310         Rectangle r = new Rectangle(23, 23);
1311         label.setGraphicTextGap(2);
1312         label.setGraphic(r);
1313         label.setContentDisplay(ContentDisplay.BOTTOM);
1314         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1315         assertEquals(14 + 23 + lineHeight + 2, label.prefHeight(-1), 0);
1316     }
1317 
1318     @Test public void whenTextIsEmptyAndGraphicIsSetWithBOTTOMContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1319         label.setText(&quot;&quot;);
1320         label.setPadding(new Insets(7, 7, 7, 7));
1321         Rectangle r = new Rectangle(23, 23);
1322         label.setGraphicTextGap(2);
1323         label.setGraphic(r);
1324         label.setContentDisplay(ContentDisplay.BOTTOM);
1325         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1326         assertEquals(14 + 23 + lineHeight + 2, label.prefHeight(-1), 0);
1327     }
1328 
1329     @Test public void whenTextIsSetAndGraphicIsSetWithBOTTOMContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1330         label.setText(&quot;For crying in the mud&quot;);
1331         label.setPadding(new Insets(7, 7, 7, 7));
1332         Rectangle r = new Rectangle(23, 23);
1333         label.setGraphic(r);
1334         label.setGraphicTextGap(2);
1335         label.setContentDisplay(ContentDisplay.BOTTOM);
1336         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1337         assertEquals(14 + 23 + lineHeight + 2, label.prefHeight(-1), 0);
1338     }
1339 
1340     @Test public void whenTextIsNullAndGraphicIsSetWithLEFTContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1341         label.setText(null);
1342         label.setPadding(new Insets(7, 7, 7, 7));
1343         Rectangle r = new Rectangle(23, 23);
1344         label.setGraphic(r);
1345         label.setContentDisplay(ContentDisplay.LEFT);
1346         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1347         assertEquals(14 + Math.max(23, lineHeight), label.prefHeight(-1), 0);
1348     }
1349 
1350     @Test public void whenTextIsEmptyAndGraphicIsSetWithLEFTContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1351         label.setText(&quot;&quot;);
1352         label.setPadding(new Insets(7, 7, 7, 7));
1353         Rectangle r = new Rectangle(23, 23);
1354         label.setGraphic(r);
1355         label.setContentDisplay(ContentDisplay.LEFT);
1356         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1357         assertEquals(14 + Math.max(23, lineHeight), label.prefHeight(-1), 0);
1358     }
1359 
1360     @Test public void whenTextIsSetAndGraphicIsSetWithLEFTContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1361         label.setText(&quot;For crying in the mud&quot;);
1362         label.setPadding(new Insets(7, 7, 7, 7));
1363         Rectangle r = new Rectangle(23, 23);
1364         label.setGraphic(r);
1365         label.setContentDisplay(ContentDisplay.LEFT);
1366         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1367         assertEquals(14 + Math.max(23, lineHeight), label.prefHeight(-1), 0);
1368     }
1369 
1370     @Test public void whenTextIsNullAndGraphicIsSetWithCENTERContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1371         label.setText(null);
1372         label.setPadding(new Insets(7, 7, 7, 7));
1373         Rectangle r = new Rectangle(23, 23);
1374         label.setGraphic(r);
1375         label.setContentDisplay(ContentDisplay.CENTER);
1376         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1377         assertEquals(14 + Math.max(23, lineHeight), label.prefHeight(-1), 0);
1378     }
1379 
1380     @Test public void whenTextIsEmptyAndGraphicIsSetWithCENTERContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1381         label.setText(&quot;&quot;);
1382         label.setPadding(new Insets(7, 7, 7, 7));
1383         Rectangle r = new Rectangle(23, 23);
1384         label.setGraphic(r);
1385         label.setContentDisplay(ContentDisplay.CENTER);
1386         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1387         assertEquals(14 + Math.max(23, lineHeight), label.prefHeight(-1), 0);
1388     }
1389 
1390     @Test public void whenTextIsSetAndGraphicIsSetWithCENTERContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1391         label.setText(&quot;For crying in the mud&quot;);
1392         label.setPadding(new Insets(7, 7, 7, 7));
1393         Rectangle r = new Rectangle(23, 23);
1394         label.setGraphic(r);
1395         label.setContentDisplay(ContentDisplay.CENTER);
1396         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1397         assertEquals(14 + Math.max(23, lineHeight), label.prefHeight(-1), 0);
1398     }
1399 
1400     @Test public void whenTextIsNullAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1401         label.setText(null);
1402         label.setPadding(new Insets(7, 7, 7, 7));
1403         Rectangle r = new Rectangle(23, 23);
1404         label.setGraphic(r);
1405         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1406         assertEquals(14 + 23, label.prefHeight(-1), 0);
1407     }
1408 
1409     @Test public void whenTextIsEmptyAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1410         label.setText(&quot;&quot;);
1411         label.setPadding(new Insets(7, 7, 7, 7));
1412         Rectangle r = new Rectangle(23, 23);
1413         label.setGraphic(r);
1414         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1415         assertEquals(14 + 23, label.prefHeight(-1), 0);
1416     }
1417 
1418     @Test public void whenTextIsSetAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1419         label.setText(&quot;For crying in the mud&quot;);
1420         label.setPadding(new Insets(7, 7, 7, 7));
1421         Rectangle r = new Rectangle(23, 23);
1422         label.setGraphic(r);
1423         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1424         assertEquals(14 + 23, label.prefHeight(-1), 0);
1425     }
1426 
1427     @Test public void whenTextIsNullAndGraphicIsSetWithTEXT_ONLYContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1428         label.setText(null);
1429         label.setPadding(new Insets(7, 7, 7, 7));
1430         Rectangle r = new Rectangle(23, 23);
1431         label.setGraphic(r);
1432         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
1433         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1434         assertEquals(14 + lineHeight, label.prefHeight(-1), 0);
1435     }
1436 
1437     @Test public void whenTextIsEmptyAndGraphicIsSetWithTEXT_ONLYContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1438         label.setText(&quot;&quot;);
1439         label.setPadding(new Insets(7, 7, 7, 7));
1440         Rectangle r = new Rectangle(23, 23);
1441         label.setGraphic(r);
1442         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
1443         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1444         assertEquals(14 + lineHeight, label.prefHeight(-1), 0);
1445     }
1446 
1447     @Test public void whenTextIsSetAndGraphicIsSetWithTEXT_ONLYContentDisplay_computePrefHeight_ReturnsRightAnswer() {
1448         label.setText(&quot;For crying in the mud&quot;);
1449         label.setPadding(new Insets(7, 7, 7, 7));
1450         Rectangle r = new Rectangle(23, 23);
1451         label.setGraphic(r);
1452         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
1453         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1454         assertEquals(14 + lineHeight, label.prefHeight(-1), 0);
1455     }
1456 
1457     /****************************************************************************
1458      *                                                                          *
1459      * Tests maxWidth                                                           *
1460      *                                                                          *
1461      ***************************************************************************/
1462 
1463     @Test public void whenTextIsNullAndNoGraphic_computeMaxWidth_ReturnsPadding() {
1464         label.setText(null);
1465         label.setPadding(new Insets(7, 7, 7, 7));
1466         assertEquals(14, label.maxWidth(-1), 0);
1467     }
1468 
1469     @Test public void whenTextIsEmptyAndNoGraphic_computeMaxWidth_ReturnsPadding() {
1470         label.setText(&quot;&quot;);
1471         label.setPadding(new Insets(7, 7, 7, 7));
1472         assertEquals(14, label.maxWidth(-1), 0);
1473     }
1474 
1475     @Test public void whenTextIsSetAndNoGraphic_computeMaxWidth_ReturnsTextWidthPlusPadding() {
1476         label.setText(&quot;Lollipop&quot;);
1477         label.setPadding(new Insets(7, 7, 7, 7));
1478         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;Lollipop&quot;, 0);
1479         assertEquals(14 + textWidth, label.maxWidth(-1), 0);
1480     }
1481 
1482     @Test public void whenTextIsNullAndUnmanagedGraphic_computeMaxWidth_ReturnsPadding() {
1483         label.setText(null);
1484         Rectangle r = new Rectangle(0, 0, 50, 50);
1485         r.setManaged(false);
1486         label.setGraphic(r);
1487         label.setPadding(new Insets(7, 7, 7, 7));
1488         assertEquals(14, label.maxWidth(-1), 0);
1489     }
1490 
1491     @Test public void whenTextIsEmptyAndUnmanagedGraphic_computeMaxWidth_ReturnsPadding() {
1492         label.setText(&quot;&quot;);
1493         Rectangle r = new Rectangle(0, 0, 50, 50);
1494         r.setManaged(false);
1495         label.setGraphic(r);
1496         label.setPadding(new Insets(7, 7, 7, 7));
1497         assertEquals(14, label.maxWidth(-1), 0);
1498     }
1499 
1500     @Test public void whenTextIsSetAndUnmanagedGraphic_computeMaxWidth_ReturnsTextWidthPlusPadding() {
1501         label.setText(&quot;Lollipop&quot;);
1502         Rectangle r = new Rectangle(0, 0, 50, 50);
1503         r.setManaged(false);
1504         label.setGraphic(r);
1505         label.setPadding(new Insets(7, 7, 7, 7));
1506         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;Lollipop&quot;, 0);
1507         assertEquals(14 + textWidth, label.maxWidth(-1), 0);
1508     }
1509 
1510     @Test public void whenTextIsNullAndGraphicIsSetWithTOPContentDisplay_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1511         label.setText(null);
1512         label.setGraphic(new Rectangle(0, 0, 20, 20));
1513         label.setGraphicTextGap(6.5);
1514         label.setContentDisplay(ContentDisplay.TOP);
1515         label.setPadding(new Insets(7, 7, 7, 7));
1516         assertEquals(14 + 20, label.maxWidth(-1), 0);
1517     }
1518 
1519     @Test public void whenTextIsEmptyAndGraphicIsSetWithTOPContentDisplay_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1520         label.setText(&quot;&quot;);
1521         label.setGraphic(new Rectangle(0, 0, 20, 20));
1522         label.setGraphicTextGap(6.5);
1523         label.setContentDisplay(ContentDisplay.TOP);
1524         label.setPadding(new Insets(7, 7, 7, 7));
1525         assertEquals(14 + 20, label.maxWidth(-1), 0);
1526     }
1527 
1528     @Test public void whenTextIsSetAndGraphicIsSetWithTOPContentDisplayAndGraphicIsWider_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1529         label.setText(&quot;Lollipop&quot;);
1530         label.setGraphic(new Rectangle(0, 0, 200, 20));
1531         label.setGraphicTextGap(6.5);
1532         label.setContentDisplay(ContentDisplay.TOP);
1533         label.setPadding(new Insets(7, 7, 7, 7));
1534         assertEquals(14 + 200, label.maxWidth(-1), 0);
1535     }
1536 
1537     @Test public void whenTextIsSetAndGraphicIsSetWithTOPContentDisplayAndTextIsWider_computeMaxWidth_ReturnsTextWidthPlusPadding() {
1538         label.setText(&quot;This is the right place&quot;);
1539         label.setGraphic(new Rectangle(0, 0, 20, 20));
1540         label.setGraphicTextGap(6.5);
1541         label.setContentDisplay(ContentDisplay.TOP);
1542         label.setPadding(new Insets(7, 7, 7, 7));
1543         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;This is the right place&quot;, 0);
1544         assertEquals(14 + textWidth, label.maxWidth(-1), 0);
1545     }
1546 
1547     @Test public void whenTextIsNullAndGraphicIsSetWithRIGHTContentDisplay_computeMaxWidth_ReturnsGraphicPlusPaddingNotIncludingGap() {
1548         label.setText(null);
1549         label.setGraphic(new Rectangle(0, 0, 20, 20));
1550         label.setGraphicTextGap(6.5);
1551         label.setContentDisplay(ContentDisplay.RIGHT);
1552         label.setPadding(new Insets(7, 7, 7, 7));
1553         assertEquals(20 + 14, label.maxWidth(-1), 0);
1554     }
1555 
1556     @Test public void whenTextIsEmptyAndGraphicIsSetWithRIGHTContentDisplay_computeMaxWidth_ReturnsGraphicPlusPaddingNotIncludingGap() {
1557         label.setText(&quot;&quot;);
1558         label.setGraphic(new Rectangle(0, 0, 20, 20));
1559         label.setGraphicTextGap(6.5);
1560         label.setContentDisplay(ContentDisplay.RIGHT);
1561         label.setPadding(new Insets(7, 7, 7, 7));
1562         assertEquals(20 + 14, label.maxWidth(-1), 0);
1563     }
1564 
1565     @Test public void whenTextIsSetAndGraphicIsSetWithRIGHTContentDisplay_computeMaxWidth_ReturnsTextWidthPlusGraphicWidthPlusGapPlusPadding() {
1566         label.setText(&quot;Howdy&quot;);
1567         label.setGraphic(new Rectangle(0, 0, 20, 20));
1568         label.setGraphicTextGap(6.5);
1569         label.setContentDisplay(ContentDisplay.RIGHT);
1570         label.setPadding(new Insets(7, 7, 7, 7));
1571         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;Howdy&quot;, 0);
1572         assertEquals(14 + textWidth + 6.5 + 20, label.maxWidth(-1), 0);
1573     }
1574 
1575     @Test public void whenTextIsNullAndGraphicIsSetWithBOTTOMContentDisplay_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1576         label.setText(null);
1577         label.setGraphic(new Rectangle(0, 0, 20, 20));
1578         label.setGraphicTextGap(6.5);
1579         label.setContentDisplay(ContentDisplay.BOTTOM);
1580         label.setPadding(new Insets(7, 7, 7, 7));
1581         assertEquals(14 + 20, label.maxWidth(-1), 0);
1582     }
1583 
1584     @Test public void whenTextIsEmptyAndGraphicIsSetWithBOTTOMContentDisplay_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1585         label.setText(null);
1586         label.setGraphic(new Rectangle(0, 0, 20, 20));
1587         label.setGraphicTextGap(6.5);
1588         label.setContentDisplay(ContentDisplay.BOTTOM);
1589         label.setPadding(new Insets(7, 7, 7, 7));
1590         assertEquals(14 + 20, label.maxWidth(-1), 0);
1591     }
1592 
1593     @Test public void whenTextIsSetAndGraphicIsSetWithBOTTOMContentDisplayAndGraphicIsWider_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1594         label.setText(&quot;Lollipop&quot;);
1595         label.setGraphic(new Rectangle(0, 0, 200, 20));
1596         label.setGraphicTextGap(6.5);
1597         label.setContentDisplay(ContentDisplay.BOTTOM);
1598         label.setPadding(new Insets(7, 7, 7, 7));
1599         assertEquals(14 + 200, label.maxWidth(-1), 0);
1600     }
1601 
1602     @Test public void whenTextIsSetAndGraphicIsSetWithBOTTOMContentDisplayAndTextIsWider_computeMaxWidth_ReturnsTextWidthPlusPadding() {
1603         label.setText(&quot;This is the right place&quot;);
1604         label.setGraphic(new Rectangle(0, 0, 20, 20));
1605         label.setGraphicTextGap(6.5);
1606         label.setContentDisplay(ContentDisplay.BOTTOM);
1607         label.setPadding(new Insets(7, 7, 7, 7));
1608         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;This is the right place&quot;, 0);
1609         assertEquals(14 + textWidth, label.maxWidth(-1), 0);
1610     }
1611 
1612     @Test public void whenTextIsNullAndGraphicIsSetWithLEFTContentDisplay_computeMaxWidth_ReturnsGraphicPlusPaddingNotIncludingGap() {
1613         label.setText(null);
1614         label.setGraphic(new Rectangle(0, 0, 20, 20));
1615         label.setGraphicTextGap(6.5);
1616         label.setContentDisplay(ContentDisplay.LEFT);
1617         label.setPadding(new Insets(7, 7, 7, 7));
1618         assertEquals(20 + 14, label.maxWidth(-1), 0);
1619     }
1620 
1621     @Test public void whenTextIsEmptyAndGraphicIsSetWithLEFTContentDisplay_computeMaxWidth_ReturnsGraphicPlusPaddingNotIncludingGap() {
1622         label.setText(&quot;&quot;);
1623         label.setGraphic(new Rectangle(0, 0, 20, 20));
1624         label.setGraphicTextGap(6.5);
1625         label.setContentDisplay(ContentDisplay.LEFT);
1626         label.setPadding(new Insets(7, 7, 7, 7));
1627         assertEquals(20 + 14, label.maxWidth(-1), 0);
1628     }
1629 
1630     @Test public void whenTextIsSetAndGraphicIsSetWithLEFTContentDisplay_computeMaxWidth_ReturnsTextWidthPlusGraphicWidthPlusGapPlusPadding() {
1631         label.setText(&quot;Howdy&quot;);
1632         label.setGraphic(new Rectangle(0, 0, 20, 20));
1633         label.setGraphicTextGap(6.5);
1634         label.setContentDisplay(ContentDisplay.LEFT);
1635         label.setPadding(new Insets(7, 7, 7, 7));
1636         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;Howdy&quot;, 0);
1637         assertEquals(14 + textWidth + 6.5 + 20, label.maxWidth(-1), 0);
1638     }
1639 
1640     @Test public void whenTextIsNullAndGraphicIsSetWithCENTERContentDisplay_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1641         label.setText(null);
1642         label.setGraphic(new Rectangle(0, 0, 20, 20));
1643         label.setGraphicTextGap(6.5);
1644         label.setContentDisplay(ContentDisplay.CENTER);
1645         label.setPadding(new Insets(7, 7, 7, 7));
1646         assertEquals(14 + 20, label.maxWidth(-1), 0);
1647     }
1648 
1649     @Test public void whenTextIsEmptyAndGraphicIsSetWithCENTERContentDisplay_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1650         label.setText(&quot;&quot;);
1651         label.setGraphic(new Rectangle(0, 0, 20, 20));
1652         label.setGraphicTextGap(6.5);
1653         label.setContentDisplay(ContentDisplay.CENTER);
1654         label.setPadding(new Insets(7, 7, 7, 7));
1655         assertEquals(14 + 20, label.maxWidth(-1), 0);
1656     }
1657 
1658     @Test public void whenTextIsSetAndGraphicIsSetWithCENTERContentDisplayAndGraphicIsWider_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1659         label.setText(&quot;Lollipop&quot;);
1660         label.setGraphic(new Rectangle(0, 0, 200, 20));
1661         label.setGraphicTextGap(6.5);
1662         label.setContentDisplay(ContentDisplay.CENTER);
1663         label.setPadding(new Insets(7, 7, 7, 7));
1664         assertEquals(14 + 200, label.maxWidth(-1), 0);
1665     }
1666 
1667     @Test public void whenTextIsSetAndGraphicIsSetWithCENTERContentDisplayAndTextIsWider_computeMaxWidth_ReturnsTextWidthPlusPadding() {
1668         label.setText(&quot;This is the right place&quot;);
1669         label.setGraphic(new Rectangle(0, 0, 20, 20));
1670         label.setGraphicTextGap(6.5);
1671         label.setContentDisplay(ContentDisplay.CENTER);
1672         label.setPadding(new Insets(7, 7, 7, 7));
1673         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;This is the right place&quot;, 0);
1674         assertEquals(14 + textWidth, label.maxWidth(-1), 0);
1675     }
1676 
1677     @Test public void whenTextIsNullAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1678         label.setText(null);
1679         label.setGraphic(new Rectangle(0, 0, 20, 20));
1680         label.setGraphicTextGap(6.5);
1681         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1682         label.setPadding(new Insets(7, 7, 7, 7));
1683         assertEquals(14 + 20, label.maxWidth(-1), 0);
1684     }
1685 
1686     @Test public void whenTextIsEmptyAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1687         label.setText(&quot;&quot;);
1688         label.setGraphic(new Rectangle(0, 0, 20, 20));
1689         label.setGraphicTextGap(6.5);
1690         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1691         label.setPadding(new Insets(7, 7, 7, 7));
1692         assertEquals(14 + 20, label.maxWidth(-1), 0);
1693     }
1694 
1695     @Test public void whenTextIsSetAndGraphicIsSetWithGRAPHIC_ONLYContentDisplayAndGraphicIsWider_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1696         label.setText(&quot;Howdy&quot;);
1697         label.setGraphic(new Rectangle(0, 0, 200, 20));
1698         label.setGraphicTextGap(6.5);
1699         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1700         label.setPadding(new Insets(7, 7, 7, 7));
1701         assertEquals(14 + 200, label.maxWidth(-1), 0);
1702     }
1703 
1704     @Test public void whenTextIsSetAndGraphicIsSetWithGRAPHIC_ONLYContentDisplayAndTextIsWider_computeMaxWidth_ReturnsGraphicWidthPlusPadding() {
1705         label.setText(&quot;Tally ho, off to the races&quot;);
1706         label.setGraphic(new Rectangle(0, 0, 20, 20));
1707         label.setGraphicTextGap(6.5);
1708         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1709         label.setPadding(new Insets(7, 7, 7, 7));
1710         assertEquals(14 + 20, label.maxWidth(-1), 0);
1711     }
1712 
1713     // TODO should this include the gap??
1714     @Test public void whenTextIsNullAndGraphicIsSetWithTEXT_ONLYContentDisplay_computeMaxWidth_ReturnsPadding() {
1715         label.setText(null);
1716         label.setGraphic(new Rectangle(0, 0, 20, 20));
1717         label.setGraphicTextGap(6.5);
1718         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
1719         label.setPadding(new Insets(7, 7, 7, 7));
1720         assertEquals(14, label.maxWidth(-1), 0);
1721     }
1722 
1723     @Test public void whenTextIsEmptyAndGraphicIsSetWithTEXT_ONLYContentDisplay_computeMaxWidth_ReturnsPadding() {
1724         label.setText(&quot;&quot;);
1725         label.setGraphic(new Rectangle(0, 0, 20, 20));
1726         label.setGraphicTextGap(6.5);
1727         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
1728         label.setPadding(new Insets(7, 7, 7, 7));
1729         assertEquals(14, label.maxWidth(-1), 0);
1730     }
1731 
1732     // TODO should this include the gap? I guess not, otherwise our gap would have to default to 0
1733     @Test public void whenTextIsSetAndGraphicIsSetWithTEXT_ONLYContentDisplay_computeMaxWidth_ReturnsTextWidthPlusPadding() {
1734         label.setText(&quot;Yippee Skippee&quot;);
1735         label.setGraphic(new Rectangle(0, 0, 20, 20));
1736         label.setGraphicTextGap(6.5);
1737         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
1738         label.setPadding(new Insets(7, 7, 7, 7));
1739         final double textWidth = Utils.computeTextWidth(label.getFont(), &quot;Yippee Skippee&quot;, 0);
1740         assertEquals(14 + textWidth, label.maxWidth(-1), 0);
1741     }
1742 
1743     /****************************************************************************
1744      *                                                                          *
1745      * Tests for maxHeight.                                                     *
1746      *                                                                          *
1747      ***************************************************************************/
1748 
1749     @Test public void whenTextIsNullAndNoGraphic_computeMaxHeight_ReturnsSingleLineStringHeightPlusPadding() {
1750         label.setText(null);
1751         label.setPadding(new Insets(7, 7, 7, 7));
1752         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1753         assertEquals(14 + lineHeight, label.maxHeight(-1), 0);
1754     }
1755 
1756     @Test public void whenTextIsEmptyAndNoGraphic_computeMaxHeight_ReturnsSingleLineStringHeightPlusPadding() {
1757         label.setText(&quot;&quot;);
1758         label.setPadding(new Insets(7, 7, 7, 7));
1759         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1760         assertEquals(14 + lineHeight, label.maxHeight(-1), 0);
1761     }
1762 
1763     @Test public void whenTextIsSetAndNoGraphic_computeMaxHeight_ReturnsSingleLineStringHeightPlusPadding() {
1764         label.setText(&quot;Howdy Pardner&quot;);
1765         label.setPadding(new Insets(7, 7, 7, 7));
1766         assertTrue(label.maxHeight(-1) &gt;= 0);
1767         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1768         assertEquals(14 + lineHeight, label.maxHeight(-1), 0);
1769     }
1770 
1771     @Test public void whenTextIsNullAndUnmanagedGraphic_computeMaxHeight_ReturnsSingleLineStringHeightPlusPadding() {
1772         label.setText(null);
1773         label.setPadding(new Insets(7, 7, 7, 7));
1774         Rectangle r = new Rectangle(23, 500);
1775         r.setManaged(false);
1776         label.setGraphic(r);
1777         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1778         assertEquals(14 + lineHeight, label.maxHeight(-1), 0);
1779     }
1780 
1781     @Test public void whenTextIsEmptyAndUnmanagedGraphic_computeMaxHeight_ReturnsSingleLineStringHeightPlusPadding() {
1782         label.setText(&quot;&quot;);
1783         label.setPadding(new Insets(7, 7, 7, 7));
1784         Rectangle r = new Rectangle(23, 500);
1785         r.setManaged(false);
1786         label.setGraphic(r);
1787         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1788         assertEquals(14 + lineHeight, label.maxHeight(-1), 0);
1789     }
1790 
1791     @Test public void whenTextIsSetAndUnmanagedGraphic_computeMaxHeight_ReturnsSingleLineStringHeightPlusPadding() {
1792         label.setText(&quot;Howdy Pardner&quot;);
1793         label.setPadding(new Insets(7, 7, 7, 7));
1794         Rectangle r = new Rectangle(23, 500);
1795         r.setManaged(false);
1796         label.setGraphic(r);
1797         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1798         assertTrue(label.maxHeight(-1) &gt;= 0);
1799         assertEquals(14 + lineHeight, label.maxHeight(-1), 0);
1800     }
1801 
1802     @Test public void whenTextIsNullAndGraphicIsSetWithTOPContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1803         label.setText(null);
1804         label.setPadding(new Insets(7, 7, 7, 7));
1805         Rectangle r = new Rectangle(23, 23);
1806         label.setGraphicTextGap(2);
1807         label.setGraphic(r);
1808         label.setContentDisplay(ContentDisplay.TOP);
1809         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1810         assertEquals(14 + 23 + lineHeight + 2, label.maxHeight(-1), 0);
1811     }
1812 
1813     @Test public void whenTextIsEmptyAndGraphicIsSetWithTOPContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1814         label.setText(&quot;&quot;);
1815         label.setPadding(new Insets(7, 7, 7, 7));
1816         Rectangle r = new Rectangle(23, 23);
1817         label.setGraphicTextGap(2);
1818         label.setGraphic(r);
1819         label.setContentDisplay(ContentDisplay.TOP);
1820         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1821         assertEquals(14 + 23 + lineHeight + 2, label.maxHeight(-1), 0);
1822     }
1823 
1824     @Test public void whenTextIsSetAndGraphicIsSetWithTOPContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1825         label.setText(&quot;For crying in the mud&quot;);
1826         label.setPadding(new Insets(7, 7, 7, 7));
1827         Rectangle r = new Rectangle(23, 23);
1828         label.setGraphic(r);
1829         label.setGraphicTextGap(2);
1830         label.setContentDisplay(ContentDisplay.TOP);
1831         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1832         assertEquals(14 + 23 + lineHeight + 2, label.maxHeight(-1), 0);
1833     }
1834 
1835     @Test public void whenTextIsNullAndGraphicIsSetWithRIGHTContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1836         label.setText(null);
1837         label.setPadding(new Insets(7, 7, 7, 7));
1838         Rectangle r = new Rectangle(23, 23);
1839         label.setGraphic(r);
1840         label.setContentDisplay(ContentDisplay.RIGHT);
1841         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1842         assertEquals(14 + Math.max(23, lineHeight), label.maxHeight(-1), 0);
1843     }
1844 
1845     @Test public void whenTextIsEmptyAndGraphicIsSetWithRIGHTContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1846         label.setText(&quot;&quot;);
1847         label.setPadding(new Insets(7, 7, 7, 7));
1848         Rectangle r = new Rectangle(23, 23);
1849         label.setGraphic(r);
1850         label.setContentDisplay(ContentDisplay.RIGHT);
1851         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1852         assertEquals(14 + Math.max(23, lineHeight), label.maxHeight(-1), 0);
1853     }
1854 
1855     @Test public void whenTextIsSetAndGraphicIsSetWithRIGHTContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1856         label.setText(&quot;For crying in the mud&quot;);
1857         label.setPadding(new Insets(7, 7, 7, 7));
1858         Rectangle r = new Rectangle(23, 23);
1859         label.setGraphic(r);
1860         label.setContentDisplay(ContentDisplay.RIGHT);
1861         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1862         assertEquals(14 + Math.max(23, lineHeight), label.maxHeight(-1), 0);
1863     }
1864 
1865     @Test public void whenTextIsNullAndGraphicIsSetWithBOTTOMContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1866         label.setText(null);
1867         label.setPadding(new Insets(7, 7, 7, 7));
1868         Rectangle r = new Rectangle(23, 23);
1869         label.setGraphicTextGap(2);
1870         label.setGraphic(r);
1871         label.setContentDisplay(ContentDisplay.BOTTOM);
1872         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1873         assertEquals(14 + 23 + lineHeight + 2, label.maxHeight(-1), 0);
1874     }
1875 
1876     @Test public void whenTextIsEmptyAndGraphicIsSetWithBOTTOMContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1877         label.setText(&quot;&quot;);
1878         label.setPadding(new Insets(7, 7, 7, 7));
1879         Rectangle r = new Rectangle(23, 23);
1880         label.setGraphicTextGap(2);
1881         label.setGraphic(r);
1882         label.setContentDisplay(ContentDisplay.BOTTOM);
1883         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1884         assertEquals(14 + 23 + lineHeight + 2, label.maxHeight(-1), 0);
1885     }
1886 
1887     @Test public void whenTextIsSetAndGraphicIsSetWithBOTTOMContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1888         label.setText(&quot;For crying in the mud&quot;);
1889         label.setPadding(new Insets(7, 7, 7, 7));
1890         Rectangle r = new Rectangle(23, 23);
1891         label.setGraphic(r);
1892         label.setGraphicTextGap(2);
1893         label.setContentDisplay(ContentDisplay.BOTTOM);
1894         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1895         assertEquals(14 + 23 + lineHeight + 2, label.maxHeight(-1), 0);
1896     }
1897 
1898     @Test public void whenTextIsNullAndGraphicIsSetWithLEFTContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1899         label.setText(null);
1900         label.setPadding(new Insets(7, 7, 7, 7));
1901         Rectangle r = new Rectangle(23, 23);
1902         label.setGraphic(r);
1903         label.setContentDisplay(ContentDisplay.LEFT);
1904         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1905         assertEquals(14 + Math.max(23, lineHeight), label.maxHeight(-1), 0);
1906     }
1907 
1908     @Test public void whenTextIsEmptyAndGraphicIsSetWithLEFTContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1909         label.setText(&quot;&quot;);
1910         label.setPadding(new Insets(7, 7, 7, 7));
1911         Rectangle r = new Rectangle(23, 23);
1912         label.setGraphic(r);
1913         label.setContentDisplay(ContentDisplay.LEFT);
1914         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1915         assertEquals(14 + Math.max(23, lineHeight), label.maxHeight(-1), 0);
1916     }
1917 
1918     @Test public void whenTextIsSetAndGraphicIsSetWithLEFTContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1919         label.setText(&quot;For crying in the mud&quot;);
1920         label.setPadding(new Insets(7, 7, 7, 7));
1921         Rectangle r = new Rectangle(23, 23);
1922         label.setGraphic(r);
1923         label.setContentDisplay(ContentDisplay.LEFT);
1924         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1925         assertEquals(14 + Math.max(23, lineHeight), label.maxHeight(-1), 0);
1926     }
1927 
1928     @Test public void whenTextIsNullAndGraphicIsSetWithCENTERContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1929         label.setText(null);
1930         label.setPadding(new Insets(7, 7, 7, 7));
1931         Rectangle r = new Rectangle(23, 23);
1932         label.setGraphic(r);
1933         label.setContentDisplay(ContentDisplay.CENTER);
1934         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1935         assertEquals(14 + Math.max(23, lineHeight), label.maxHeight(-1), 0);
1936     }
1937 
1938     @Test public void whenTextIsEmptyAndGraphicIsSetWithCENTERContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1939         label.setText(&quot;&quot;);
1940         label.setPadding(new Insets(7, 7, 7, 7));
1941         Rectangle r = new Rectangle(23, 23);
1942         label.setGraphic(r);
1943         label.setContentDisplay(ContentDisplay.CENTER);
1944         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1945         assertEquals(14 + Math.max(23, lineHeight), label.maxHeight(-1), 0);
1946     }
1947 
1948     @Test public void whenTextIsSetAndGraphicIsSetWithCENTERContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1949         label.setText(&quot;For crying in the mud&quot;);
1950         label.setPadding(new Insets(7, 7, 7, 7));
1951         Rectangle r = new Rectangle(23, 23);
1952         label.setGraphic(r);
1953         label.setContentDisplay(ContentDisplay.CENTER);
1954         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1955         assertEquals(14 + Math.max(23, lineHeight), label.maxHeight(-1), 0);
1956     }
1957 
1958     @Test public void whenTextIsNullAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1959         label.setText(null);
1960         label.setPadding(new Insets(7, 7, 7, 7));
1961         Rectangle r = new Rectangle(23, 23);
1962         label.setGraphic(r);
1963         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1964         assertEquals(14 + 23, label.maxHeight(-1), 0);
1965     }
1966 
1967     @Test public void whenTextIsEmptyAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1968         label.setText(&quot;&quot;);
1969         label.setPadding(new Insets(7, 7, 7, 7));
1970         Rectangle r = new Rectangle(23, 23);
1971         label.setGraphic(r);
1972         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1973         assertEquals(14 + 23, label.maxHeight(-1), 0);
1974     }
1975 
1976     @Test public void whenTextIsSetAndGraphicIsSetWithGRAPHIC_ONLYContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1977         label.setText(&quot;For crying in the mud&quot;);
1978         label.setPadding(new Insets(7, 7, 7, 7));
1979         Rectangle r = new Rectangle(23, 23);
1980         label.setGraphic(r);
1981         label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
1982         assertEquals(14 + 23, label.maxHeight(-1), 0);
1983     }
1984 
1985     @Test public void whenTextIsNullAndGraphicIsSetWithTEXT_ONLYContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1986         label.setText(null);
1987         label.setPadding(new Insets(7, 7, 7, 7));
1988         Rectangle r = new Rectangle(23, 23);
1989         label.setGraphic(r);
1990         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
1991         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
1992         assertEquals(14 + lineHeight, label.maxHeight(-1), 0);
1993     }
1994 
1995     @Test public void whenTextIsEmptyAndGraphicIsSetWithTEXT_ONLYContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
1996         label.setText(&quot;&quot;);
1997         label.setPadding(new Insets(7, 7, 7, 7));
1998         Rectangle r = new Rectangle(23, 23);
1999         label.setGraphic(r);
2000         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
2001         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
2002         assertEquals(14 + lineHeight, label.maxHeight(-1), 0);
2003     }
2004 
2005     @Test public void whenTextIsSetAndGraphicIsSetWithTEXT_ONLYContentDisplay_computeMaxHeight_ReturnsRightAnswer() {
2006         label.setText(&quot;For crying in the mud&quot;);
2007         label.setPadding(new Insets(7, 7, 7, 7));
2008         Rectangle r = new Rectangle(23, 23);
2009         label.setGraphic(r);
2010         label.setContentDisplay(ContentDisplay.TEXT_ONLY);
2011         final double lineHeight = Utils.computeTextHeight(label.getFont(), &quot; &quot;, 0, text.getBoundsType());
2012         assertEquals(14 + lineHeight, label.maxHeight(-1), 0);
2013     }
2014 
2015     @Test public void maxWidthTracksPreferred() {
2016         label.setPrefWidth(500);
2017         assertEquals(500, label.maxWidth(-1), 0);
2018     }
2019 
2020     @Test public void maxHeightTracksPreferred() {
2021         label.setPrefHeight(500);
2022         assertEquals(500, label.maxHeight(-1), 0);
2023     }
2024 
2025     /* Test for checking width of label with/without mnemonic */
2026     @Test public void labelMnemonicTest() {
2027         Label l1 = new Label(&quot;Hello&quot;);
2028         Label l2 = new Label(&quot;_Hello&quot;);
2029         Label l3 = new Label(&quot;He_llo&quot;);
2030         Label l4 = new Label(&quot;Hello_&quot;);
2031         Label l5 = new Label(&quot;_Hello&quot;);
2032 
2033         l1.setMnemonicParsing(true);
2034         l2.setMnemonicParsing(true);
2035         l3.setMnemonicParsing(true);
2036         l4.setMnemonicParsing(true);
2037         l5.setMnemonicParsing(false);
2038 
2039         Toolkit tk = Toolkit.getToolkit();
2040 
2041         Scene scene = new Scene(new Group(l1, l2, l3, l4, l5));
2042         Stage stage = new Stage();
2043         stage.setScene(scene);
2044         stage.show();
2045         tk.firePulse();
2046 
2047         assertEquals(l1.getWidth(), l2.getWidth(), 0);
2048         assertEquals(l2.getWidth(), l3.getWidth(), 0);
2049 
2050         // l4 label does not have a mnemonic ==&gt; l4 width is greater than l1 width
2051         int x = Double.compare(l1.getWidth(), l4.getWidth());
2052         assertTrue(x &lt; 0);
2053 
2054         // labels with no mnemonic
2055         assertEquals(l4.getWidth(), l5.getWidth(), 0);
2056     }
2057 
2058 
2059     /****************************************************************************
2060      *                                                                          *
2061      * Tests for updateDisplayedText                                            *
2062      *                                                                          *
2063      ***************************************************************************/
2064 
2065     // tests for updateDisplayedText (not even sure how to test it exactly yet)
2066 
2067 
2068     public static final class LabelSkinMock extends LabelSkin {
2069         boolean propertyChanged = false;
2070         int propertyChangeCount = 0;
2071 
2072         public LabelSkinMock(Label label) {
2073             super(label);
2074         }
2075 
2076         public void addWatchedProperty(ObservableValue&lt;?&gt; p) {
2077             p.addListener(o -&gt; {
2078                 propertyChanged = true;
2079                 propertyChangeCount++;
2080             });
2081         }
2082 
2083         public boolean get_invalidText() {
2084             return LabeledSkinBaseShim.get_invalidText(this);
2085 
2086         }
2087 
2088         public void updateDisplayedText() {
2089             LabeledSkinBaseShim.updateDisplayedText(this);
2090         }
2091 
2092         public double get_textWidth() {
2093             return LabeledSkinBaseShim.get_textWidth(this);
2094         }
2095 
2096         public double get_ellipsisWidth() {
2097             return LabeledSkinBaseShim.get_ellipsisWidth(this);
2098         }
2099     }
2100 }
<a name="2" id="anc2"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="2" type="hidden" />
</body>
</html>