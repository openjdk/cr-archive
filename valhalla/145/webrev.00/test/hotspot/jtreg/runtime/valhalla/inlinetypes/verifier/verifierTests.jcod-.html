<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/hotspot/jtreg/runtime/valhalla/inlinetypes/verifier/verifierTests.jcod</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
   1 /*
   2  * Copyright (c) 2018, 2020, Oracle and/or its affiliates. All rights reserved.
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
  23  */
  24 
  25 // The jcod classes in this file were derived from this Java inline type:
  26 //
  27 // final inline class Value {
  28 //     static final Value VT = makeValue(0x01234567);
  29 //     final int int_v;
  30 //     Value() {
  31 //         int_v = 1;
  32 //     }
  33 //     static Value makeValue(int x) {
  34 //         Value v = Value.default;
  35 //         v = __WithField(v.int_v, x);
  36 //         return v;
  37 //     }
  38 // }
  39 //
  40 // The changes for each test were made to the bytecodes for method makeValue(int x).
  41 // Its bytecodes are:
  42 //
  43 //  static Value makeValue(int); descriptor: (I)LValue; flags: (0x0008) ACC_STATIC
  44 //    Code:
  45 //      stack=2, locals=2, args_size=1
  46 //         0: defaultvalue  #3                  // class Value
  47 //         3: astore_1
  48 //         4: aload_1
  49 //         5: iload_0
  50 //         6: withfield     #2                  // Field int_v:I
  51 //         9: astore_1
  52 //        10: aload_1
  53 //        11: areturn
  54 
  55 
  56 // The constant pool index of the defaultvalue opcode (0xCB) in the Code
  57 // attribute was changed to 0x93.  Since this index is outside the range of
  58 // the constant pool, a VerifyError exception should get thrown.
  59 //
  60 class defValBadCP {
  61   0xCAFEBABE;
  62   0; // minor version
  63   60; // version
  64   [27] { // Constant Pool
  65     ; // first element is empty
  66     Method #7 #21; // #1     at 0x0A
  67     Field #3 #22; // #2     at 0x0F
  68     class #23; // #3     at 0x14
  69     int 0x01234567; // #4     at 0x17
  70     Method #3 #24; // #5     at 0x1C
  71     Field #3 #25; // #6     at 0x21
  72     class #26; // #7     at 0x26
  73     Utf8 &quot;VT&quot;; // #8     at 0x29
  74     Utf8 &quot;LdefValBadCP;&quot;; // #9     at 0x2E
  75     Utf8 &quot;int_v&quot;; // #10     at 0x38
  76     Utf8 &quot;I&quot;; // #11     at 0x40
  77     Utf8 &quot;&lt;init&gt;&quot;; // #12     at 0x44
  78     Utf8 &quot;()V&quot;; // #13     at 0x4D
  79     Utf8 &quot;Code&quot;; // #14     at 0x53
  80     Utf8 &quot;LineNumberTable&quot;; // #15     at 0x5A
  81     Utf8 &quot;makeValue&quot;; // #16     at 0x6C
  82     Utf8 &quot;(I)LdefValBadCP;&quot;; // #17     at 0x78
  83     Utf8 &quot;&lt;clinit&gt;&quot;; // #18     at 0x85
  84     Utf8 &quot;SourceFile&quot;; // #19     at 0x90
  85     Utf8 &quot;defValBadCP.java&quot;; // #20     at 0x9D
  86     NameAndType #12 #13; // #21     at 0xAA
  87     NameAndType #10 #11; // #22     at 0xAF
  88     Utf8 &quot;defValBadCP&quot;; // #23     at 0xB4
  89     NameAndType #16 #17; // #24     at 0xBC
  90     NameAndType #8 #9; // #25     at 0xC1
  91     Utf8 &quot;java/lang/Object&quot;; // #26     at 0xC6
  92   } // Constant Pool
  93 
  94   0x0130; // access [ ACC_VALUE ACC_SUPER ACC_FINAL ]
  95   #3;// this_cpx
  96   #7;// super_cpx
  97 
  98   [0] { // Interfaces
  99   } // Interfaces
 100 
 101   [2] { // fields
 102     { // Member at 0xE3
 103       0x0018; // access
 104       #8; // name_cpx
 105       #9; // sig_cpx
 106       [0] { // Attributes
 107       } // Attributes
 108     } // Member
 109     ;
 110     { // Member at 0xEB
 111       0x0010; // access
 112       #10; // name_cpx
 113       #11; // sig_cpx
 114       [0] { // Attributes
 115       } // Attributes
 116     } // Member
 117   } // fields
 118 
 119   [1] { // methods
 120     { // Member at 0x012D
 121       0x0008; // access
 122       #16; // name_cpx
 123       #17; // sig_cpx
 124       [1] { // Attributes
 125         Attr(#14, 44) { // Code at 0x0135
 126           2; // max_stack
 127           2; // max_locals
 128           Bytes[12]{
 129             0xCB00934C2B1ACC00; // Changed CP index from 3 to 0x93 for opcode 0xCB (defaultvalue)
 130             0x024C2BB0;         // so that the index is outside of the range of the constant pool.
 131           };
 132           [0] { // Traps
 133           } // end Traps
 134           [1] { // Attributes
 135             Attr(#15, 14) { // LineNumberTable at 0x0153
 136               [3] { // LineNumberTable
 137                 0  8; //  at 0x015F
 138                 4  9; //  at 0x0163
 139                 10  10; //  at 0x0167
 140               }
 141             } // end LineNumberTable
 142           } // Attributes
 143         } // end Code
 144       } // Attributes
 145     } // Member
 146   } // methods
 147 
 148   [1] { // Attributes
 149     Attr(#19, 2) { // SourceFile at 0x0198
 150       #20;
 151     } // end SourceFile
 152   } // Attributes
 153 } // end class defValBadCP
 154 
 155 ///////////////////////////////////////////////////////////
 156 
 157 // The class&#39;s major version was changed to 54.  Since this class has a
 158 // defaultvalue opcode (0xCB), this should cause a ClassFormatError
 159 // exception to get thrown.
 160 //
 161 class defValBadMajorVersion {
 162   0xCAFEBABE;
 163   0; // minor version
 164   54; // version
 165   [27] { // Constant Pool
 166     ; // first element is empty
 167     Method #7 #21; // #1     at 0x0A
 168     Field #3 #22; // #2     at 0x0F
 169     class #23; // #3     at 0x14
 170     int 0x01234567; // #4     at 0x17
 171     Method #3 #24; // #5     at 0x1C
 172     Field #3 #25; // #6     at 0x21
 173     class #26; // #7     at 0x26
 174     Utf8 &quot;VT&quot;; // #8     at 0x29
 175     Utf8 &quot;LdefValBadMajorVersion;&quot;; // #9     at 0x2E
 176     Utf8 &quot;int_v&quot;; // #10     at 0x38
 177     Utf8 &quot;I&quot;; // #11     at 0x40
 178     Utf8 &quot;&lt;init&gt;&quot;; // #12     at 0x44
 179     Utf8 &quot;()V&quot;; // #13     at 0x4D
 180     Utf8 &quot;Code&quot;; // #14     at 0x53
 181     Utf8 &quot;LineNumberTable&quot;; // #15     at 0x5A
 182     Utf8 &quot;makeValue&quot;; // #16     at 0x6C
 183     Utf8 &quot;(I)LdefValBadMajorVersion;&quot;; // #17     at 0x78
 184     Utf8 &quot;&lt;clinit&gt;&quot;; // #18     at 0x85
 185     Utf8 &quot;SourceFile&quot;; // #19     at 0x90
 186     Utf8 &quot;defValBadMajorVersion.java&quot;; // #20     at 0x9D
 187     NameAndType #12 #13; // #21     at 0xAA
 188     NameAndType #10 #11; // #22     at 0xAF
 189     Utf8 &quot;defValBadMajorVersion&quot;; // #23     at 0xB4
 190     NameAndType #16 #17; // #24     at 0xBC
 191     NameAndType #8 #9; // #25     at 0xC1
 192     Utf8 &quot;java/lang/Object&quot;; // #26     at 0xC6
 193   } // Constant Pool
 194 
 195   0x0130; // access [ ACC_VALUE ACC_SUPER ACC_FINAL ]
 196   #3;// this_cpx
 197   #7;// super_cpx
 198 
 199   [0] { // Interfaces
 200   } // Interfaces
 201 
 202   [2] { // fields
 203     { // Member at 0xE3
 204       0x0018; // access
 205       #8; // name_cpx
 206       #9; // sig_cpx
 207       [0] { // Attributes
 208       } // Attributes
 209     } // Member
 210     ;
 211     { // Member at 0xEB
 212       0x0010; // access
 213       #10; // name_cpx
 214       #11; // sig_cpx
 215       [0] { // Attributes
 216       } // Attributes
 217     } // Member
 218   } // fields
 219 
 220   [1] { // methods
 221     { // Member at 0x012D
 222       0x0008; // access
 223       #16; // name_cpx
 224       #17; // sig_cpx
 225       [1] { // Attributes
 226         Attr(#14, 44) { // Code at 0x0135
 227           2; // max_stack
 228           2; // max_locals
 229           Bytes[12]{
 230             0xCB00034C2B1ACC00;
 231             0x024C2BB0;
 232           };
 233           [0] { // Traps
 234           } // end Traps
 235           [1] { // Attributes
 236             Attr(#15, 14) { // LineNumberTable at 0x0153
 237               [3] { // LineNumberTable
 238                 0  8; //  at 0x015F
 239                 4  9; //  at 0x0163
 240                 10  10; //  at 0x0167
 241               }
 242             } // end LineNumberTable
 243           } // Attributes
 244         } // end Code
 245       } // Attributes
 246     } // Member
 247   } // methods
 248 
 249   [1] { // Attributes
 250     Attr(#19, 2) { // SourceFile at 0x0198
 251       #20;
 252     } // end SourceFile
 253   } // Attributes
 254 } // end class defValBadMajorVersion
 255 
 256 ///////////////////////////////////////////////////////////
 257 
 258 // The constant pool index of a defaultvalue opcode (0xCB) in the Code
 259 // attribute was changed to 2.  Since this index now points to a Field
 260 // entry instead of a Class entry, a VerifyError exception should get thrown.
 261 //
 262 class defValWrongCPType {
 263   0xCAFEBABE;
 264   0; // minor version
 265   60; // version
 266   [27] { // Constant Pool
 267     ; // first element is empty
 268     Method #7 #21; // #1     at 0x0A
 269     Field #3 #22; // #2     at 0x0F
 270     class #23; // #3     at 0x14
 271     int 0x01234567; // #4     at 0x17
 272     Method #3 #24; // #5     at 0x1C
 273     Field #3 #25; // #6     at 0x21
 274     class #26; // #7     at 0x26
 275     Utf8 &quot;VT&quot;; // #8     at 0x29
 276     Utf8 &quot;LdefValWrongCPType;&quot;; // #9     at 0x2E
 277     Utf8 &quot;int_v&quot;; // #10     at 0x38
 278     Utf8 &quot;I&quot;; // #11     at 0x40
 279     Utf8 &quot;&lt;init&gt;&quot;; // #12     at 0x44
 280     Utf8 &quot;()V&quot;; // #13     at 0x4D
 281     Utf8 &quot;Code&quot;; // #14     at 0x53
 282     Utf8 &quot;LineNumberTable&quot;; // #15     at 0x5A
 283     Utf8 &quot;makeValue&quot;; // #16     at 0x6C
 284     Utf8 &quot;(I)LdefValWrongCPType;&quot;; // #17     at 0x78
 285     Utf8 &quot;&lt;clinit&gt;&quot;; // #18     at 0x85
 286     Utf8 &quot;SourceFile&quot;; // #19     at 0x90
 287     Utf8 &quot;defValWrongCPType.java&quot;; // #20     at 0x9D
 288     NameAndType #12 #13; // #21     at 0xAA
 289     NameAndType #10 #11; // #22     at 0xAF
 290     Utf8 &quot;defValWrongCPType&quot;; // #23     at 0xB4
 291     NameAndType #16 #17; // #24     at 0xBC
 292     NameAndType #8 #9; // #25     at 0xC1
 293     Utf8 &quot;java/lang/Object&quot;; // #26     at 0xC6
 294   } // Constant Pool
 295 
 296   0x0130; // access [ ACC_VALUE ACC_SUPER ACC_FINAL ]
 297   #3;// this_cpx
 298   #7;// super_cpx
 299 
 300   [0] { // Interfaces
 301   } // Interfaces
 302 
 303   [2] { // fields
 304     { // Member at 0xE3
 305       0x0018; // access
 306       #8; // name_cpx
 307       #9; // sig_cpx
 308       [0] { // Attributes
 309       } // Attributes
 310     } // Member
 311     ;
 312     { // Member at 0xEB
 313       0x0010; // access
 314       #10; // name_cpx
 315       #11; // sig_cpx
 316       [0] { // Attributes
 317       } // Attributes
 318     } // Member
 319   } // fields
 320 
 321   [1] { // methods
 322     { // Member at 0x012D
 323       0x0008; // access
 324       #16; // name_cpx
 325       #17; // sig_cpx
 326       [1] { // Attributes
 327         Attr(#14, 44) { // Code at 0x0135
 328           2; // max_stack
 329           2; // max_locals
 330           Bytes[12]{
 331             0xCB00024C2B1ACC00; // Changed CP index from 3 to 2 for opcode 0xCB (defaultvalue)
 332             0x024C2BB0;         // so that the cp index no longer points to a cp Class entry.
 333           };
 334           [0] { // Traps
 335           } // end Traps
 336           [1] { // Attributes
 337             Attr(#15, 14) { // LineNumberTable at 0x0153
 338               [3] { // LineNumberTable
 339                 0  8; //  at 0x015F
 340                 4  9; //  at 0x0163
 341                 10  10; //  at 0x0167
 342               }
 343             } // end LineNumberTable
 344           } // Attributes
 345         } // end Code
 346       } // Attributes
 347     } // Member
 348   } // methods
 349 
 350   [1] { // Attributes
 351     Attr(#19, 2) { // SourceFile at 0x0198
 352       #20;
 353     } // end SourceFile
 354   } // Attributes
 355 } // end class defValWrongCPType
 356 
 357 ///////////////////////////////////////////////////////////
 358 
 359 // The constant pool index of the withfield opcode (0xCC) in the Code
 360 // attribute was changed to 0x82.  Since this index is outside the range of
 361 // the constant pool, a VerifyError exception should get thrown.
 362 //
 363 class wthFldBadCP {
 364   0xCAFEBABE;
 365   0; // minor version
 366   60; // version
 367   [20] { // Constant Pool
 368     ; // first element is empty
 369     Method #4 #17; // #1     at 0x0A
 370     Field #3 #18; // #2     at 0x0F
 371     class #12; // #3     at 0x14
 372     class #19; // #4     at 0x17
 373     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 374     Utf8 &quot;I&quot;; // #6     at 0x22
 375     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 376     Utf8 &quot;()V&quot;; // #8     at 0x2F
 377     Utf8 &quot;Code&quot;; // #9     at 0x35
 378     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 379     Utf8 &quot;makewthFldBadCP&quot;; // #11     at 0x4E
 380     Utf8 &quot;wthFldBadCP&quot;; // #12     at 0x60
 381     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 382     Utf8 &quot;(I)LwthFldBadCP;&quot;; // #14     at 0x7B
 383     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 384     Utf8 &quot;wthFldBadCP.java&quot;; // #16     at 0x9B
 385     NameAndType #7 #8; // #17     at 0xAE
 386     NameAndType #5 #6; // #18     at 0xB3
 387     Utf8 &quot;java/lang/Object&quot;; // #19     at 0xB8
 388   } // Constant Pool
 389 
 390   0x0130; // access [ ACC_SUPER ACC_FINAL ]
 391   #3;// this_cpx
 392   #4;// super_cpx
 393 
 394   [0] { // Interfaces
 395   } // Interfaces
 396 
 397   [1] { // fields
 398     { // Member at 0xD5
 399       0x0010; // access
 400       #5; // name_cpx
 401       #6; // sig_cpx
 402       [0] { // Attributes
 403       } // Attributes
 404     } // Member
 405   } // fields
 406 
 407   [2] { // methods
 408     { // Member at 0xDF
 409       0x0000; // access
 410       #7; // name_cpx
 411       #8; // sig_cpx
 412       [1] { // Attributes
 413         Attr(#9, 42) { // Code at 0xE7
 414           2; // max_stack
 415           1; // max_locals
 416           Bytes[10]{
 417             0x2AB700012A04B500;
 418             0x02B1;
 419           };
 420           [0] { // Traps
 421           } // end Traps
 422           [1] { // Attributes
 423             Attr(#10, 14) { // LineNumberTable at 0x0103
 424               [3] { // LineNumberTable
 425                 0  4; //  at 0x010F
 426                 4  5; //  at 0x0113
 427                 9  6; //  at 0x0117
 428               }
 429             } // end LineNumberTable
 430           } // Attributes
 431         } // end Code
 432       } // Attributes
 433     } // Member
 434     ;
 435     { // Member at 0x0117
 436       0x0008; // access
 437       #11; // name_cpx
 438       #14; // sig_cpx
 439       [1] { // Attributes
 440         Attr(#9, 44) { // Code at 0x011F
 441           2; // max_stack
 442           2; // max_locals
 443           Bytes[12]{
 444             0xCB00034C2B1ACC00; // Changed CP index from 2 to 0x82 for opcode 0xCC (withfield)
 445             0x824C2BB0;         // so that the index is outside of the range of the constant pool.
 446           };
 447           [0] { // Traps
 448           } // end Traps
 449           [1] { // Attributes
 450             Attr(#10, 14) { // LineNumberTable at 0x013D
 451               [3] { // LineNumberTable
 452                 0  8; //  at 0x0149
 453                 4  9; //  at 0x014D
 454                 10  10; //  at 0x0151
 455               }
 456             } // end LineNumberTable
 457           } // Attributes
 458         } // end Code
 459       } // Attributes
 460     } // Member
 461   } // methods
 462 
 463   [2] { // Attributes
 464     Attr(#15, 2) { // SourceFile at 0x0153
 465       #16;
 466     } // end SourceFile
 467     ;
 468     Attr(#13, 4) { // ValueTypes at 0x015B
 469       0x00010003;
 470     } // end ValueTypes
 471   } // Attributes
 472 } // end class wthFldBadCP
 473 
 474 ///////////////////////////////////////////////////////////
 475 
 476 // The opcode at bytecode position 5 in the Code array was changed to aload_1
 477 // (0x2B).  This should cause a VerifyError because now the first operand on the
 478 // stack for the withfield opcode (0xCC at bytecode position 6) does not match
 479 // the type (int) of the field being assigned to.
 480 //
 481 class wthFldBadFldVal {
 482   0xCAFEBABE;
 483   0; // minor version
 484   60; // version
 485   [20] { // Constant Pool
 486     ; // first element is empty
 487     Method #4 #17; // #1     at 0x0A
 488     Field #3 #18; // #2     at 0x0F
 489     class #12; // #3     at 0x14
 490     class #19; // #4     at 0x17
 491     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 492     Utf8 &quot;I&quot;; // #6     at 0x22
 493     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 494     Utf8 &quot;()V&quot;; // #8     at 0x2F
 495     Utf8 &quot;Code&quot;; // #9     at 0x35
 496     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 497     Utf8 &quot;makewthFldBadFldVal&quot;; // #11     at 0x4E
 498     Utf8 &quot;wthFldBadFldVal&quot;; // #12     at 0x60
 499     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 500     Utf8 &quot;(I)LwthFldBadFldVal;&quot;; // #14     at 0x7B
 501     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 502     Utf8 &quot;wthFldBadFldVal.java&quot;; // #16     at 0x9B
 503     NameAndType #7 #8; // #17     at 0xAE
 504     NameAndType #5 #6; // #18     at 0xB3
 505     Utf8 &quot;java/lang/Object&quot;; // #19     at 0xB8
 506   } // Constant Pool
 507 
 508   0x0130; // access [ ACC_SUPER ACC_FINAL ]
 509   #3;// this_cpx
 510   #4;// super_cpx
 511 
 512   [0] { // Interfaces
 513   } // Interfaces
 514 
 515   [1] { // fields
 516     { // Member at 0xD5
 517       0x0010; // access
 518       #5; // name_cpx
 519       #6; // sig_cpx
 520       [0] { // Attributes
 521       } // Attributes
 522     } // Member
 523   } // fields
 524 
 525   [2] { // methods
 526     { // Member at 0xDF
 527       0x0000; // access
 528       #7; // name_cpx
 529       #8; // sig_cpx
 530       [1] { // Attributes
 531         Attr(#9, 42) { // Code at 0xE7
 532           2; // max_stack
 533           1; // max_locals
 534           Bytes[10]{
 535             0x2AB700012A04B500;
 536             0x02B1;
 537           };
 538           [0] { // Traps
 539           } // end Traps
 540           [1] { // Attributes
 541             Attr(#10, 14) { // LineNumberTable at 0x0103
 542               [3] { // LineNumberTable
 543                 0  4; //  at 0x010F
 544                 4  5; //  at 0x0113
 545                 9  6; //  at 0x0117
 546               }
 547             } // end LineNumberTable
 548           } // Attributes
 549         } // end Code
 550       } // Attributes
 551     } // Member
 552     ;
 553     { // Member at 0x0117
 554       0x0008; // access
 555       #11; // name_cpx
 556       #14; // sig_cpx
 557       [1] { // Attributes
 558         Attr(#9, 44) { // Code at 0x011F
 559           2; // max_stack
 560           2; // max_locals
 561           Bytes[12]{
 562             0xCB00034C2B2BCC00; // Changed opcode at bytecode 5 from iload_0 to aload_1
 563             0x024C2BB0;
 564           };
 565           [0] { // Traps
 566           } // end Traps
 567           [1] { // Attributes
 568             Attr(#10, 14) { // LineNumberTable at 0x013D
 569               [3] { // LineNumberTable
 570                 0  8; //  at 0x0149
 571                 4  9; //  at 0x014D
 572                 10  10; //  at 0x0151
 573               }
 574             } // end LineNumberTable
 575           } // Attributes
 576         } // end Code
 577       } // Attributes
 578     } // Member
 579   } // methods
 580 
 581   [2] { // Attributes
 582     Attr(#15, 2) { // SourceFile at 0x0153
 583       #16;
 584     } // end SourceFile
 585     ;
 586     Attr(#13, 4) { // ValueTypes at 0x015B
 587       0x00010003;
 588     } // end ValueTypes
 589   } // Attributes
 590 } // end class wthFldBadFldVal
 591 
 592 ///////////////////////////////////////////////////////////
 593 
 594 // The opcode at bytecode position 4 in the Code array was changed to iload_1
 595 // (0x1A).  This should cause a VerifyError because the second operand on the stack
 596 // for the withfield opcode (0xCC at bytecode position 6) must be a reference.
 597 //
 598 class wthFldBadFldRef {
 599   0xCAFEBABE;
 600   0; // minor version
 601   60; // version
 602   [20] { // Constant Pool
 603     ; // first element is empty
 604     Method #4 #17; // #1     at 0x0A
 605     Field #3 #18; // #2     at 0x0F
 606     class #12; // #3     at 0x14
 607     class #19; // #4     at 0x17
 608     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 609     Utf8 &quot;I&quot;; // #6     at 0x22
 610     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 611     Utf8 &quot;()V&quot;; // #8     at 0x2F
 612     Utf8 &quot;Code&quot;; // #9     at 0x35
 613     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 614     Utf8 &quot;makewthFldBadFldRef&quot;; // #11     at 0x4E
 615     Utf8 &quot;wthFldBadFldRef&quot;; // #12     at 0x60
 616     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 617     Utf8 &quot;(I)LwthFldBadFldRef;&quot;; // #14     at 0x7B
 618     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 619     Utf8 &quot;wthFldBadFldRef.java&quot;; // #16     at 0x9B
 620     NameAndType #7 #8; // #17     at 0xAE
 621     NameAndType #5 #6; // #18     at 0xB3
 622     Utf8 &quot;java/lang/Object&quot;; // #19     at 0xB8
 623   } // Constant Pool
 624 
 625   0x0130; // access [ ACC_SUPER ACC_FINAL ]
 626   #3;// this_cpx
 627   #4;// super_cpx
 628 
 629   [0] { // Interfaces
 630   } // Interfaces
 631 
 632   [1] { // fields
 633     { // Member at 0xD5
 634       0x0010; // access
 635       #5; // name_cpx
 636       #6; // sig_cpx
 637       [0] { // Attributes
 638       } // Attributes
 639     } // Member
 640   } // fields
 641 
 642   [2] { // methods
 643     { // Member at 0xDF
 644       0x0000; // access
 645       #7; // name_cpx
 646       #8; // sig_cpx
 647       [1] { // Attributes
 648         Attr(#9, 42) { // Code at 0xE7
 649           2; // max_stack
 650           1; // max_locals
 651           Bytes[10]{
 652             0x2AB700012A04B500;
 653             0x02B1;
 654           };
 655           [0] { // Traps
 656           } // end Traps
 657           [1] { // Attributes
 658             Attr(#10, 14) { // LineNumberTable at 0x0103
 659               [3] { // LineNumberTable
 660                 0  4; //  at 0x010F
 661                 4  5; //  at 0x0113
 662                 9  6; //  at 0x0117
 663               }
 664             } // end LineNumberTable
 665           } // Attributes
 666         } // end Code
 667       } // Attributes
 668     } // Member
 669     ;
 670     { // Member at 0x0117
 671       0x0008; // access
 672       #11; // name_cpx
 673       #14; // sig_cpx
 674       [1] { // Attributes
 675         Attr(#9, 44) { // Code at 0x011F
 676           2; // max_stack
 677           2; // max_locals
 678           Bytes[12]{
 679             0xCB00034C1A1ACC00; // Changed opcode at bytecode 4 from aload_1 to iload_0
 680             0x024C2BB0;
 681           };
 682           [0] { // Traps
 683           } // end Traps
 684           [1] { // Attributes
 685             Attr(#10, 14) { // LineNumberTable at 0x013D
 686               [3] { // LineNumberTable
 687                 0  8; //  at 0x0149
 688                 4  9; //  at 0x014D
 689                 10  10; //  at 0x0151
 690               }
 691             } // end LineNumberTable
 692           } // Attributes
 693         } // end Code
 694       } // Attributes
 695     } // Member
 696   } // methods
 697 
 698   [2] { // Attributes
 699     Attr(#15, 2) { // SourceFile at 0x0153
 700       #16;
 701     } // end SourceFile
 702     ;
 703     Attr(#13, 4) { // ValueTypes at 0x015B
 704       0x00010003;
 705     } // end ValueTypes
 706   } // Attributes
 707 } // end class wthFldBadFldRef
 708 
 709 ///////////////////////////////////////////////////////////
 710 
 711 // The class&#39;s major version was changed to 54 and the first opcode in the Code
 712 // attribute was changed to a withfield (0xCC)..  Since withfield opcodes are not
 713 // allowed in classes with major version 54, this should cause a ClassFormatError
 714 // exception to get thrown.
 715 //
 716 class wthFldBadMajorVersion {
 717   0xCAFEBABE;
 718   0; // minor version
 719   54; // version
 720   [27] { // Constant Pool
 721     ; // first element is empty
 722     Method #7 #21; // #1     at 0x0A
 723     Field #3 #22; // #2     at 0x0F
 724     class #23; // #3     at 0x14
 725     int 0x01234567; // #4     at 0x17
 726     Method #3 #24; // #5     at 0x1C
 727     Field #3 #25; // #6     at 0x21
 728     class #26; // #7     at 0x26
 729     Utf8 &quot;VT&quot;; // #8     at 0x29
 730     Utf8 &quot;LwthFldBadMajorVersion;&quot;; // #9     at 0x2E
 731     Utf8 &quot;int_v&quot;; // #10     at 0x38
 732     Utf8 &quot;I&quot;; // #11     at 0x40
 733     Utf8 &quot;&lt;init&gt;&quot;; // #12     at 0x44
 734     Utf8 &quot;()V&quot;; // #13     at 0x4D
 735     Utf8 &quot;Code&quot;; // #14     at 0x53
 736     Utf8 &quot;LineNumberTable&quot;; // #15     at 0x5A
 737     Utf8 &quot;makeValue&quot;; // #16     at 0x6C
 738     Utf8 &quot;(I)LwthFldBadMajorVersion;&quot;; // #17     at 0x78
 739     Utf8 &quot;&lt;clinit&gt;&quot;; // #18     at 0x85
 740     Utf8 &quot;SourceFile&quot;; // #19     at 0x90
 741     Utf8 &quot;wthFldBadMajorVersion.java&quot;; // #20     at 0x9D
 742     NameAndType #12 #13; // #21     at 0xAA
 743     NameAndType #10 #11; // #22     at 0xAF
 744     Utf8 &quot;wthFldBadMajorVersion&quot;; // #23     at 0xB4
 745     NameAndType #16 #17; // #24     at 0xBC
 746     NameAndType #8 #9; // #25     at 0xC1
 747     Utf8 &quot;java/lang/Object&quot;; // #26     at 0xC6
 748   } // Constant Pool
 749 
 750   0x0130; // access [ ACC_VALUE ACC_SUPER ACC_FINAL ]
 751   #3;// this_cpx
 752   #7;// super_cpx
 753 
 754   [0] { // Interfaces
 755   } // Interfaces
 756 
 757   [2] { // fields
 758     { // Member at 0xE3
 759       0x0018; // access
 760       #8; // name_cpx
 761       #9; // sig_cpx
 762       [0] { // Attributes
 763       } // Attributes
 764     } // Member
 765     ;
 766     { // Member at 0xEB
 767       0x0010; // access
 768       #10; // name_cpx
 769       #11; // sig_cpx
 770       [0] { // Attributes
 771       } // Attributes
 772     } // Member
 773   } // fields
 774 
 775   [1] { // methods
 776     { // Member at 0x012D
 777       0x0008; // access
 778       #16; // name_cpx
 779       #17; // sig_cpx
 780       [1] { // Attributes
 781         Attr(#14, 44) { // Code at 0x0135
 782           2; // max_stack
 783           2; // max_locals
 784           Bytes[12]{
 785             0xCC00034C2B1ACC00; // Changed the first opcode to 0xCC (withfield) in order to
 786             0x024C2BB0;         // test withfield opcode with an illegal major version.
 787           };
 788           [0] { // Traps
 789           } // end Traps
 790           [1] { // Attributes
 791             Attr(#15, 14) { // LineNumberTable at 0x0153
 792               [3] { // LineNumberTable
 793                 0  8; //  at 0x015F
 794                 4  9; //  at 0x0163
 795                 10  10; //  at 0x0167
 796               }
 797             } // end LineNumberTable
 798           } // Attributes
 799         } // end Code
 800       } // Attributes
 801     } // Member
 802   } // methods
 803 
 804   [1] { // Attributes
 805     Attr(#19, 2) { // SourceFile at 0x0198
 806       #20;
 807     } // end SourceFile
 808   } // Attributes
 809 } // end class wthFldBadMajorVersion
 810 
 811 ///////////////////////////////////////////////////////////
 812 
 813 // The constant pool index of a withfield opcode (0xCC) in the Code
 814 // attribute was changed to 1.  Since this index now points to a Method
 815 // entry instead of a Field entry, a VerifyError exception should get thrown.
 816 //
 817 class wthFldWrongCPType {
 818   0xCAFEBABE;
 819   0; // minor version
 820   60; // version
 821   [20] { // Constant Pool
 822     ; // first element is empty
 823     Method #4 #17; // #1     at 0x0A
 824     Field #3 #18; // #2     at 0x0F
 825     class #12; // #3     at 0x14
 826     class #19; // #4     at 0x17
 827     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 828     Utf8 &quot;I&quot;; // #6     at 0x22
 829     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 830     Utf8 &quot;()V&quot;; // #8     at 0x2F
 831     Utf8 &quot;Code&quot;; // #9     at 0x35
 832     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 833     Utf8 &quot;makewthFldWrongCPType&quot;; // #11     at 0x4E
 834     Utf8 &quot;wthFldWrongCPType&quot;; // #12     at 0x60
 835     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 836     Utf8 &quot;(I)LwthFldWrongCPType;&quot;; // #14     at 0x7B
 837     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 838     Utf8 &quot;wthFldWrongCPType.java&quot;; // #16     at 0x9B
 839     NameAndType #7 #8; // #17     at 0xAE
 840     NameAndType #5 #6; // #18     at 0xB3
 841     Utf8 &quot;java/lang/Object&quot;; // #19     at 0xB8
 842   } // Constant Pool
 843 
 844   0x0130; // access [ ACC_SUPER ACC_FINAL ]
 845   #3;// this_cpx
 846   #4;// super_cpx
 847 
 848   [0] { // Interfaces
 849   } // Interfaces
 850 
 851   [1] { // fields
 852     { // Member at 0xD5
 853       0x0010; // access
 854       #5; // name_cpx
 855       #6; // sig_cpx
 856       [0] { // Attributes
 857       } // Attributes
 858     } // Member
 859   } // fields
 860 
 861   [2] { // methods
 862     { // Member at 0xDF
 863       0x0000; // access
 864       #7; // name_cpx
 865       #8; // sig_cpx
 866       [1] { // Attributes
 867         Attr(#9, 42) { // Code at 0xE7
 868           2; // max_stack
 869           1; // max_locals
 870           Bytes[10]{
 871             0x2AB700012A04B500;
 872             0x02B1;
 873           };
 874           [0] { // Traps
 875           } // end Traps
 876           [1] { // Attributes
 877             Attr(#10, 14) { // LineNumberTable at 0x0103
 878               [3] { // LineNumberTable
 879                 0  4; //  at 0x010F
 880                 4  5; //  at 0x0113
 881                 9  6; //  at 0x0117
 882               }
 883             } // end LineNumberTable
 884           } // Attributes
 885         } // end Code
 886       } // Attributes
 887     } // Member
 888     ;
 889     { // Member at 0x0117
 890       0x0008; // access
 891       #11; // name_cpx
 892       #14; // sig_cpx
 893       [1] { // Attributes
 894         Attr(#9, 44) { // Code at 0x011F
 895           2; // max_stack
 896           2; // max_locals
 897           Bytes[12]{
 898             0xCB00034C2B1ACC00; // Changed CP index from 2 to 1 for opcode 0xCC (withfield)
 899             0x014C2BB0;         // so that the cp index no longer points to a cp Field entry.
 900           };
 901           [0] { // Traps
 902           } // end Traps
 903           [1] { // Attributes
 904             Attr(#10, 14) { // LineNumberTable at 0x013D
 905               [3] { // LineNumberTable
 906                 0  8; //  at 0x0149
 907                 4  9; //  at 0x014D
 908                 10  10; //  at 0x0151
 909               }
 910             } // end LineNumberTable
 911           } // Attributes
 912         } // end Code
 913       } // Attributes
 914     } // Member
 915   } // methods
 916 
 917   [2] { // Attributes
 918     Attr(#15, 2) { // SourceFile at 0x0153
 919       #16;
 920     } // end SourceFile
 921     ;
 922     Attr(#13, 4) { // ValueTypes at 0x015B
 923       0x00010003;
 924     } // end ValueTypes
 925   } // Attributes
 926 } // end class wthFldWrongCPType
 927 
 928 ///////////////////////////////////////////////////////////
 929 
 930 // A new fieldRef was added to the constant pool to point to a field in
 931 // java/lang/Object.  The withfield opcode (0XCC) was changed to use this new
 932 // cp entry.  This should cause a VerifyError because even though inline types
 933 // are assignable to java.lang.Object, withfield requires that the cp field class
 934 // and the inline type on the stack, in this case &#39;wthFldObject&#39;, be identical.
 935 //
 936 class wthFldObject {
 937   0xCAFEBABE;
 938   0; // minor version
 939   60; // version
 940   [22] { // Constant Pool
 941     ; // first element is empty
 942     Method #4 #17; // #1     at 0x0A
 943     Field #3 #18; // #2     at 0x0F
 944     class #12; // #3     at 0x14
 945     class #19; // #4     at 0x17
 946     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 947     Utf8 &quot;I&quot;; // #6     at 0x22
 948     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 949     Utf8 &quot;()V&quot;; // #8     at 0x2F
 950     Utf8 &quot;Code&quot;; // #9     at 0x35
 951     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 952     Utf8 &quot;makewthFldObject&quot;; // #11     at 0x4E
 953     Utf8 &quot;wthFldObject&quot;; // #12     at 0x60
 954     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 955     Utf8 &quot;(I)LwthFldObject;&quot;; // #14     at 0x7B
 956     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 957     Utf8 &quot;wthFldObject.java&quot;; // #16     at 0x9B
 958     NameAndType #7 #8; // #17     at 0xAE
 959     NameAndType #5 #6; // #18     at 0xB3
 960     Utf8 &quot;java/lang/Object&quot;; // #19     at 0xB8
 961     class #19; // #20  // NEW ClassRef
 962     Field #20 #18; // #21  // New FieldRef
 963 
 964   } // Constant Pool
 965 
 966   0x0130; // access [ ACC_VALUE, ACC_SUPER ACC_FINAL ]
 967   #3;// this_cpx
 968   #4;// super_cpx
 969 
 970   [0] { // Interfaces
 971   } // Interfaces
 972 
 973   [1] { // fields
 974     { // Member at 0xD5
 975       0x0010; // access
 976       #5; // name_cpx
 977       #6; // sig_cpx
 978       [0] { // Attributes
 979       } // Attributes
 980     } // Member
 981   } // fields
 982 
 983   [2] { // methods
 984     { // Member at 0xDF
 985       0x0000; // access
 986       #7; // name_cpx
 987       #8; // sig_cpx
 988       [1] { // Attributes
 989         Attr(#9, 42) { // Code at 0xE7
 990           2; // max_stack
 991           1; // max_locals
 992           Bytes[10]{
 993             0x2AB700012A04B500;
 994             0x02B1;
 995           };
 996           [0] { // Traps
 997           } // end Traps
 998           [1] { // Attributes
 999             Attr(#10, 14) { // LineNumberTable at 0x0103
1000               [3] { // LineNumberTable
1001                 0  4; //  at 0x010F
1002                 4  5; //  at 0x0113
1003                 9  6; //  at 0x0117
1004               }
1005             } // end LineNumberTable
1006           } // Attributes
1007         } // end Code
1008       } // Attributes
1009     } // Member
1010     ;
1011     { // Member at 0x0117
1012       0x0008; // access
1013       #11; // name_cpx
1014       #14; // sig_cpx
1015       [1] { // Attributes
1016         Attr(#9, 47) { // Code at 0x011F
1017           2; // max_stack
1018           2; // max_locals
1019           Bytes[15]{
1020             0xCB00034C2B1ACC00; // Changed withfield (0xCC) cp index at byte 8 to point to a field in
1021             0x154C2BCB0003B0;   // in j.l.Object. Also, added a defaultvalue opcode at byte 11 to push
1022           };                    // a Value ref so that the verifier won&#39;t complain if it sees the areturn.
1023 
1024           [0] { // Traps
1025           } // end Traps
1026           [1] { // Attributes
1027             Attr(#10, 14) { // LineNumberTable at 0x013D
1028               [3] { // LineNumberTable
1029                 0  8; //  at 0x0149
1030                 4  9; //  at 0x014D
1031                 10  10; //  at 0x0151
1032               }
1033             } // end LineNumberTable
1034           } // Attributes
1035         } // end Code
1036       } // Attributes
1037     } // Member
1038   } // methods
1039 
1040   [2] { // Attributes
1041     Attr(#15, 2) { // SourceFile at 0x0153
1042       #16;
1043     } // end SourceFile
1044     ;
1045     Attr(#13, 4) { // ValueTypes at 0x015B
1046       0x00010003;
1047     } // end ValueTypes
1048   } // Attributes
1049 } // end class wthFldObject
1050 
1051 ///////////////////////////////////////////////////////////
1052 
1053 // The astore_1 opcode (0x4C) was changed to a monitorenter (0xC2) opcode but
1054 // the operand on the stack is an inline type.
1055 // This should cause a VerifyError because the operand for opcode monitorenter
1056 // cannot be an inline type.
1057 //
1058 class monEnterVT {
1059   0xCAFEBABE;
1060   0; // minor version
1061   60; // version
1062   [46] { // Constant Pool
1063     ; // first element is empty
1064     class #23; // #1     at 0x0A
1065     Field #1 #24; // #2     at 0x0D
1066     InvokeDynamic 0s #27; // #3     at 0x12
1067     InvokeDynamic 0s #28; // #4     at 0x17
1068     InvokeDynamic 0s #29; // #5     at 0x1C
1069     class #30; // #6     at 0x21
1070     Utf8 &quot;int_v&quot;; // #7     at 0x24
1071     Utf8 &quot;I&quot;; // #8     at 0x2C
1072     Utf8 &quot;makemonEnterVT&quot;; // #9     at 0x30
1073     Utf8 &quot;(I)QmonEnterVT;&quot;; // #10     at 0x41
1074     Utf8 &quot;Code&quot;; // #11     at 0x53
1075     Utf8 &quot;LineNumberTable&quot;; // #12     at 0x5A
1076     Utf8 &quot;hashCode&quot;; // #13     at 0x6C
1077     Utf8 &quot;()I&quot;; // #14     at 0x77
1078     Utf8 &quot;equals&quot;; // #15     at 0x7D
1079     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #16     at 0x86
1080     Utf8 &quot;toString&quot;; // #17     at 0x9E
1081     Utf8 &quot;()Ljava/lang/String;&quot;; // #18     at 0xA9
1082     Utf8 &quot;&lt;init&gt;&quot;; // #19     at 0xC0
1083     Utf8 &quot;()QmonEnterVT;&quot;; // #20     at 0xC9
1084     Utf8 &quot;SourceFile&quot;; // #21     at 0xDA
1085     Utf8 &quot;monEnterVT.java&quot;; // #22     at 0xE7
1086     Utf8 &quot;monEnterVT&quot;; // #23     at 0xF9
1087     NameAndType #7 #8; // #24     at 0x0106
1088     Utf8 &quot;BootstrapMethods&quot;; // #25     at 0x010B
1089     MethodHandle 6b #31; // #26     at 0x011E
1090     NameAndType #13 #32; // #27     at 0x0122
1091     NameAndType #15 #33; // #28     at 0x0127
1092     NameAndType #17 #34; // #29     at 0x012C
1093     Utf8 &quot;java/lang/Object&quot;; // #30     at 0x0131
1094     Method #35 #36; // #31     at 0x0144
1095     Utf8 &quot;(QmonEnterVT;)I&quot;; // #32     at 0x0149
1096     Utf8 &quot;(QmonEnterVT;Ljava/lang/Object;)Z&quot;; // #33     at 0x015B
1097     Utf8 &quot;(QmonEnterVT;)Ljava/lang/String;&quot;; // #34     at 0x017F
1098     class #37; // #35     at 0x01A2
1099     NameAndType #38 #42; // #36     at 0x01A5
1100     Utf8 &quot;java/lang/invoke/ValueBootstrapMethods&quot;; // #37     at 0x01AA
1101     Utf8 &quot;makeBootstrapMethod&quot;; // #38     at 0x01D3
1102     class #44; // #39     at 0x01E9
1103     Utf8 &quot;Lookup&quot;; // #40     at 0x01EC
1104     Utf8 &quot;InnerClasses&quot;; // #41     at 0x01F5
1105     Utf8 &quot;(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;&quot;; // #42     at 0x0204
1106     class #45; // #43     at 0x027A
1107     Utf8 &quot;java/lang/invoke/MethodHandles$Lookup&quot;; // #44     at 0x027D
1108     Utf8 &quot;java/lang/invoke/MethodHandles&quot;; // #45     at 0x02A5
1109   } // Constant Pool
1110 
1111   0x0130; // access [ ACC_SUPER ACC_FINAL ]
1112   #1;// this_cpx
1113   #6;// super_cpx
1114 
1115   [0] { // Interfaces
1116   } // Interfaces
1117 
1118   [1] { // fields
1119     { // Member at 0x02D0
1120       0x0010; // access
1121       #7; // name_cpx
1122       #8; // sig_cpx
1123       [0] { // Attributes
1124       } // Attributes
1125     } // Member
1126   } // fields
1127 
1128   [5] { // methods
1129     { // Member at 0x02DA
1130       0x0008; // access
1131       #9; // name_cpx
1132       #10; // sig_cpx
1133       [1] { // Attributes
1134         Attr(#11, 45) { // Code at 0x02E2
1135           2; // max_stack
1136           2; // max_locals
1137           Bytes[13]{
1138             0xCB0001C21A2B5FCC; // Changed bytecode at byte 3 from astore_1 to monitorenter.
1139             0x00024C2BB0;
1140           };
1141           [0] { // Traps
1142           } // end Traps
1143           [1] { // Attributes
1144             Attr(#12, 14) { // LineNumberTable at 0x0301
1145               [3] { // LineNumberTable
1146                 0  8; //  at 0x030D
1147                 4  9; //  at 0x0311
1148                 11  10; //  at 0x0315
1149               }
1150             } // end LineNumberTable
1151           } // Attributes
1152         } // end Code
1153       } // Attributes
1154     } // Member
1155     ;
1156     { // Member at 0x0315
1157       0x0011; // access
1158       #13; // name_cpx
1159       #14; // sig_cpx
1160       [1] { // Attributes
1161         Attr(#11, 31) { // Code at 0x031D
1162           1; // max_stack
1163           1; // max_locals
1164           Bytes[7]{
1165             0x2ABA00030000AC;
1166           };
1167           [0] { // Traps
1168           } // end Traps
1169           [1] { // Attributes
1170             Attr(#12, 6) { // LineNumberTable at 0x0336
1171               [1] { // LineNumberTable
1172                 0  1; //  at 0x0342
1173               }
1174             } // end LineNumberTable
1175           } // Attributes
1176         } // end Code
1177       } // Attributes
1178     } // Member
1179     ;
1180     { // Member at 0x0342
1181       0x0011; // access
1182       #15; // name_cpx
1183       #16; // sig_cpx
1184       [1] { // Attributes
1185         Attr(#11, 32) { // Code at 0x034A
1186           2; // max_stack
1187           2; // max_locals
1188           Bytes[8]{
1189             0x2A2BBA00040000AC;
1190           };
1191           [0] { // Traps
1192           } // end Traps
1193           [1] { // Attributes
1194             Attr(#12, 6) { // LineNumberTable at 0x0364
1195               [1] { // LineNumberTable
1196                 0  1; //  at 0x0370
1197               }
1198             } // end LineNumberTable
1199           } // Attributes
1200         } // end Code
1201       } // Attributes
1202     } // Member
1203     ;
1204     { // Member at 0x0370
1205       0x0011; // access
1206       #17; // name_cpx
1207       #18; // sig_cpx
1208       [1] { // Attributes
1209         Attr(#11, 31) { // Code at 0x0378
1210           1; // max_stack
1211           1; // max_locals
1212           Bytes[7]{
1213             0x2ABA00050000B0;
1214           };
1215           [0] { // Traps
1216           } // end Traps
1217           [1] { // Attributes
1218             Attr(#12, 6) { // LineNumberTable at 0x0391
1219               [1] { // LineNumberTable
1220                 0  1; //  at 0x039D
1221               }
1222             } // end LineNumberTable
1223           } // Attributes
1224         } // end Code
1225       } // Attributes
1226     } // Member
1227     ;
1228     { // Member at 0x039D
1229       0x0008; // access
1230       #19; // name_cpx
1231       #20; // sig_cpx
1232       [1] { // Attributes
1233         Attr(#11, 45) { // Code at 0x03A5
1234           2; // max_stack
1235           1; // max_locals
1236           Bytes[13]{
1237             0xCB00014B042A5FCC;
1238             0x00024B2AB0;
1239           };
1240           [0] { // Traps
1241           } // end Traps
1242           [1] { // Attributes
1243             Attr(#12, 14) { // LineNumberTable at 0x03C4
1244               [3] { // LineNumberTable
1245                 0  4; //  at 0x03D0
1246                 4  5; //  at 0x03D4
1247                 11  6; //  at 0x03D8
1248               }
1249             } // end LineNumberTable
1250           } // Attributes
1251         } // end Code
1252       } // Attributes
1253     } // Member
1254   } // methods
1255 
1256   [3] { // Attributes
1257     Attr(#21, 2) { // SourceFile at 0x03DA
1258       #22;
1259     } // end SourceFile
1260     ;
1261     Attr(#41, 10) { // InnerClasses at 0x03E2
1262       [1] { // InnerClasses
1263         #39 #43 #40 25; //  at 0x03F2
1264       }
1265     } // end InnerClasses
1266     ;
1267     Attr(#25, 6) { // BootstrapMethods at 0x03F2
1268       [1] { // bootstrap_methods
1269         {  //  bootstrap_method
1270           #26; // bootstrap_method_ref
1271           [0] { // bootstrap_arguments
1272           }  //  bootstrap_arguments
1273         }  //  bootstrap_method
1274       }
1275     } // end BootstrapMethods
1276   } // Attributes
1277 } // end class monEnterVT
1278 
1279 ///////////////////////////////////////////////////////////
1280 
1281 // The cp entry for the defaultvalue opcode was changed to a reference that
1282 // is not an inline type.
1283 // This should cause a VerifyError because the cp entry for opcode defaultvalue
1284 // must be an inline type.
1285 //
1286 class defValueObj {
1287   0xCAFEBABE;
1288   0; // minor version
1289   60; // version
1290   [46] { // Constant Pool
1291     ; // first element is empty
1292     class #23; // #1     at 0x0A
1293     Field #1 #24; // #2     at 0x0D
1294     InvokeDynamic 0s #27; // #3     at 0x12
1295     InvokeDynamic 0s #28; // #4     at 0x17
1296     InvokeDynamic 0s #29; // #5     at 0x1C
1297     class #30; // #6     at 0x21
1298     Utf8 &quot;int_v&quot;; // #7     at 0x24
1299     Utf8 &quot;I&quot;; // #8     at 0x2C
1300     Utf8 &quot;makedefValueObj&quot;; // #9     at 0x30
1301     Utf8 &quot;(I)QdefValueObj;&quot;; // #10     at 0x41
1302     Utf8 &quot;Code&quot;; // #11     at 0x53
1303     Utf8 &quot;LineNumberTable&quot;; // #12     at 0x5A
1304     Utf8 &quot;hashCode&quot;; // #13     at 0x6C
1305     Utf8 &quot;()I&quot;; // #14     at 0x77
1306     Utf8 &quot;equals&quot;; // #15     at 0x7D
1307     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #16     at 0x86
1308     Utf8 &quot;toString&quot;; // #17     at 0x9E
1309     Utf8 &quot;()Ljava/lang/String;&quot;; // #18     at 0xA9
1310     Utf8 &quot;&lt;init&gt;&quot;; // #19     at 0xC0
1311     Utf8 &quot;()QdefValueObj;&quot;; // #20     at 0xC9
1312     Utf8 &quot;SourceFile&quot;; // #21     at 0xDA
1313     Utf8 &quot;defValueObj.java&quot;; // #22     at 0xE7
1314     Utf8 &quot;defValueObj&quot;; // #23     at 0xF9
1315     NameAndType #7 #8; // #24     at 0x0106
1316     Utf8 &quot;BootstrapMethods&quot;; // #25     at 0x010B
1317     MethodHandle 6b #31; // #26     at 0x011E
1318     NameAndType #13 #32; // #27     at 0x0122
1319     NameAndType #15 #33; // #28     at 0x0127
1320     NameAndType #17 #34; // #29     at 0x012C
1321     Utf8 &quot;java/lang/Object&quot;; // #30     at 0x0131
1322     Method #35 #36; // #31     at 0x0144
1323     Utf8 &quot;(QdefValueObj;)I&quot;; // #32     at 0x0149
1324     Utf8 &quot;(QdefValueObj;Ljava/lang/Object;)Z&quot;; // #33     at 0x015B
1325     Utf8 &quot;(QdefValueObj;)Ljava/lang/String;&quot;; // #34     at 0x017F
1326     class #37; // #35     at 0x01A2
1327     NameAndType #38 #42; // #36     at 0x01A5
1328     Utf8 &quot;java/lang/invoke/ValueBootstrapMethods&quot;; // #37     at 0x01AA
1329     Utf8 &quot;makeBootstrapMethod&quot;; // #38     at 0x01D3
1330     class #44; // #39     at 0x01E9
1331     Utf8 &quot;Lookup&quot;; // #40     at 0x01EC
1332     Utf8 &quot;InnerClasses&quot;; // #41     at 0x01F5
1333     Utf8 &quot;(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;&quot;; // #42     at 0x0204
1334     class #45; // #43     at 0x027A
1335     Utf8 &quot;java/lang/invoke/MethodHandles$Lookup&quot;; // #44     at 0x027D
1336     Utf8 &quot;java/lang/invoke/MethodHandles&quot;; // #45     at 0x02A5
1337   } // Constant Pool
1338 
1339   0x0130; // access [ ACC_SUPER ACC_FINAL ]
1340   #1;// this_cpx
1341   #6;// super_cpx
1342 
1343   [0] { // Interfaces
1344   } // Interfaces
1345 
1346   [1] { // fields
1347     { // Member at 0x02D0
1348       0x0010; // access
1349       #7; // name_cpx
1350       #8; // sig_cpx
1351       [0] { // Attributes
1352       } // Attributes
1353     } // Member
1354   } // fields
1355 
1356   [5] { // methods
1357     { // Member at 0x02DA
1358       0x0008; // access
1359       #9; // name_cpx
1360       #10; // sig_cpx
1361       [1] { // Attributes
1362         Attr(#11, 45) { // Code at 0x02E2
1363           2; // max_stack
1364           2; // max_locals
1365           Bytes[13]{
1366             0xCB00044C1A2B5FCC; // Changed defaultvalue&#39;s cp index at byte 3 from 3 to 4.
1367             0x00024C2BB0;
1368           };
1369           [0] { // Traps
1370           } // end Traps
1371           [1] { // Attributes
1372             Attr(#12, 14) { // LineNumberTable at 0x0301
1373               [3] { // LineNumberTable
1374                 0  8; //  at 0x030D
1375                 4  9; //  at 0x0311
1376                 11  10; //  at 0x0315
1377               }
1378             } // end LineNumberTable
1379           } // Attributes
1380         } // end Code
1381       } // Attributes
1382     } // Member
1383     ;
1384     { // Member at 0x0315
1385       0x0011; // access
1386       #13; // name_cpx
1387       #14; // sig_cpx
1388       [1] { // Attributes
1389         Attr(#11, 31) { // Code at 0x031D
1390           1; // max_stack
1391           1; // max_locals
1392           Bytes[7]{
1393             0x2ABA00030000AC;
1394           };
1395           [0] { // Traps
1396           } // end Traps
1397           [1] { // Attributes
1398             Attr(#12, 6) { // LineNumberTable at 0x0336
1399               [1] { // LineNumberTable
1400                 0  1; //  at 0x0342
1401               }
1402             } // end LineNumberTable
1403           } // Attributes
1404         } // end Code
1405       } // Attributes
1406     } // Member
1407     ;
1408     { // Member at 0x0342
1409       0x0011; // access
1410       #15; // name_cpx
1411       #16; // sig_cpx
1412       [1] { // Attributes
1413         Attr(#11, 32) { // Code at 0x034A
1414           2; // max_stack
1415           2; // max_locals
1416           Bytes[8]{
1417             0x2A2BBA00040000AC;
1418           };
1419           [0] { // Traps
1420           } // end Traps
1421           [1] { // Attributes
1422             Attr(#12, 6) { // LineNumberTable at 0x0364
1423               [1] { // LineNumberTable
1424                 0  1; //  at 0x0370
1425               }
1426             } // end LineNumberTable
1427           } // Attributes
1428         } // end Code
1429       } // Attributes
1430     } // Member
1431     ;
1432     { // Member at 0x0370
1433       0x0011; // access
1434       #17; // name_cpx
1435       #18; // sig_cpx
1436       [1] { // Attributes
1437         Attr(#11, 31) { // Code at 0x0378
1438           1; // max_stack
1439           1; // max_locals
1440           Bytes[7]{
1441             0x2ABA00050000B0;
1442           };
1443           [0] { // Traps
1444           } // end Traps
1445           [1] { // Attributes
1446             Attr(#12, 6) { // LineNumberTable at 0x0391
1447               [1] { // LineNumberTable
1448                 0  1; //  at 0x039D
1449               }
1450             } // end LineNumberTable
1451           } // Attributes
1452         } // end Code
1453       } // Attributes
1454     } // Member
1455     ;
1456     { // Member at 0x039D
1457       0x0008; // access
1458       #19; // name_cpx
1459       #20; // sig_cpx
1460       [1] { // Attributes
1461         Attr(#11, 45) { // Code at 0x03A5
1462           2; // max_stack
1463           1; // max_locals
1464           Bytes[13]{
1465             0xCB00014B042A5FCC;
1466             0x00024B2AB0;
1467           };
1468           [0] { // Traps
1469           } // end Traps
1470           [1] { // Attributes
1471             Attr(#12, 14) { // LineNumberTable at 0x03C4
1472               [3] { // LineNumberTable
1473                 0  4; //  at 0x03D0
1474                 4  5; //  at 0x03D4
1475                 11  6; //  at 0x03D8
1476               }
1477             } // end LineNumberTable
1478           } // Attributes
1479         } // end Code
1480       } // Attributes
1481     } // Member
1482   } // methods
1483 
1484   [3] { // Attributes
1485     Attr(#21, 2) { // SourceFile at 0x03DA
1486       #22;
1487     } // end SourceFile
1488     ;
1489     Attr(#41, 10) { // InnerClasses at 0x03E2
1490       [1] { // InnerClasses
1491         #39 #43 #40 25; //  at 0x03F2
1492       }
1493     } // end InnerClasses
1494     ;
1495     Attr(#25, 6) { // BootstrapMethods at 0x03F2
1496       [1] { // bootstrap_methods
1497         {  //  bootstrap_method
1498           #26; // bootstrap_method_ref
1499           [0] { // bootstrap_arguments
1500           }  //  bootstrap_arguments
1501         }  //  bootstrap_method
1502       }
1503     } // end BootstrapMethods
1504   } // Attributes
1505 } // end class defValueObj
1506 
1507 ///////////////////////////////////////////////////////////
1508 
1509 // The operand for the inline type for the defaultvalue opcode was changed to a
1510 // reference that is not an inline type.
1511 // This should cause a VerifyError because the reference operand for a withfield
1512 // opcode must be an inline type.
1513 //
1514 class withfieldObj {
1515   0xCAFEBABE;
1516   0; // minor version
1517   60; // version
1518   [23] { // Constant Pool
1519     ; // first element is empty
1520     Method #5 #19; // #1     at 0x0A
1521     Field #3 #20; // #2     at 0x0F
1522     class #13; // #3     at 0x14
1523     String #21; // #4     at 0x17
1524     class #22; // #5     at 0x1A
1525     Utf8 &quot;int_v&quot;; // #6     at 0x1D
1526     Utf8 &quot;I&quot;; // #7     at 0x25
1527     Utf8 &quot;&lt;init&gt;&quot;; // #8     at 0x29
1528     Utf8 &quot;()V&quot;; // #9     at 0x32
1529     Utf8 &quot;Code&quot;; // #10     at 0x38
1530     Utf8 &quot;LineNumberTable&quot;; // #11     at 0x3F
1531     Utf8 &quot;makewithfieldObj&quot;; // #12     at 0x51
1532     Utf8 &quot;withfieldObj&quot;; // #13     at 0x64
1533     Utf8 &quot;ValueTypes&quot;; // #14     at 0x73
1534     Utf8 &quot;(ILjava/lang/String;)LwithfieldObj;&quot;; // #15     at 0x80
1535     Utf8 &quot;StackMapTable&quot;; // #16     at 0xA6
1536     Utf8 &quot;SourceFile&quot;; // #17     at 0xB6
1537     Utf8 &quot;withfieldObj.java&quot;; // #18     at 0xC3
1538     NameAndType #8 #9; // #19     at 0xD7
1539     NameAndType #6 #7; // #20     at 0xDC
1540     Utf8 &quot;CDE&quot;; // #21     at 0xE1
1541     Utf8 &quot;java/lang/Object&quot;; // #22     at 0xE7
1542   } // Constant Pool
1543 
1544   0x0130; // access [ ACC_SUPER ACC_FINAL ]
1545   #3;// this_cpx
1546   #5;// super_cpx
1547 
1548   [0] { // Interfaces
1549   } // Interfaces
1550 
1551   [1] { // fields
1552     { // Member at 0x0104
1553       0x0010; // access
1554       #6; // name_cpx
1555       #7; // sig_cpx
1556       [0] { // Attributes
1557       } // Attributes
1558     } // Member
1559   } // fields
1560 
1561   [2] { // methods
1562     { // Member at 0x010E
1563       0x0000; // access
1564       #8; // name_cpx
1565       #9; // sig_cpx
1566       [1] { // Attributes
1567         Attr(#10, 42) { // Code at 0x0116
1568           2; // max_stack
1569           1; // max_locals
1570           Bytes[10]{
1571             0x2AB700012A04B500;
1572             0x02B1;
1573           };
1574           [0] { // Traps
1575           } // end Traps
1576           [1] { // Attributes
1577             Attr(#11, 14) { // LineNumberTable at 0x0132
1578               [3] { // LineNumberTable
1579                 0  3; //  at 0x013E
1580                 4  4; //  at 0x0142
1581                 9  5; //  at 0x0146
1582               }
1583             } // end LineNumberTable
1584           } // Attributes
1585         } // end Code
1586       } // Attributes
1587     } // Member
1588     ;
1589     { // Member at 0x0146
1590       0x0008; // access
1591       #12; // name_cpx
1592       #15; // sig_cpx
1593       [1] { // Attributes
1594         Attr(#10, 68) { // Code at 0x014E
1595           2; // max_stack
1596           3; // max_locals
1597           Bytes[18]{
1598             0xCB00034D2B1204A5;
1599             0x00092B1ACC00024D; // Changed aload_2 (0x2C) to aload_1 (0x2B) at byte 3.
1600             0x2CB0;
1601           };
1602           [0] { // Traps
1603           } // end Traps
1604           [2] { // Attributes
1605             Attr(#11, 18) { // LineNumberTable at 0x0172
1606               [4] { // LineNumberTable
1607                 0  7; //  at 0x017E
1608                 4  8; //  at 0x0182
1609                 10  9; //  at 0x0186
1610                 16  11; //  at 0x018A
1611               }
1612             } // end LineNumberTable
1613             ;
1614             Attr(#16, 8) { // StackMapTable at 0x018A
1615               [1] { //
1616                 252b, 16, [1]z{7b,3}; // append_frame 1
1617               }
1618             } // end StackMapTable
1619           } // Attributes
1620         } // end Code
1621       } // Attributes
1622     } // Member
1623   } // methods
1624 
1625   [2] { // Attributes
1626     Attr(#17, 2) { // SourceFile at 0x019A
1627       #18;
1628     } // end SourceFile
1629     ;
1630     Attr(#14, 4) { // ValueTypes at 0x01A2
1631       0x00010003;
1632     } // end ValueTypes
1633   } // Attributes
1634 } // end class withfieldObj
    </pre>
  </body>
</html>