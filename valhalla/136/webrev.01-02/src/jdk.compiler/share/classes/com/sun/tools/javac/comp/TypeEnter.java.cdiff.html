<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.compiler/share/classes/com/sun/tools/javac/comp/TypeEnter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../java.base/share/classes/java/lang/invoke/ValueBootstrapMethods.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../jvm/Gen.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/comp/TypeEnter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1171,31 ***</span>
                      if (methodDecl.sym != null
                              &amp;&amp; methodDecl.sym.type != null
                              &amp;&amp; !methodDecl.sym.type.isErroneous()
                              &amp;&amp; (methodDecl.sym.flags() &amp; STATIC) == 0) {
                          final List&lt;Type&gt; parameterTypes = methodDecl.sym.type.getParameterTypes();
<span class="line-modified">!                         switch (parameterTypes.size()) {</span>
<span class="line-modified">!                             case 0:</span>
<span class="line-modified">!                                 String name = methodDecl.name.toString();</span>
<span class="line-modified">!                                 if (name.equals(&quot;toString&quot;))</span>
<span class="line-modified">!                                     requireToString = false;</span>
<span class="line-removed">-                                 break;</span>
                          }
                      }
                  }
              }
  
<span class="line-removed">-             make.at(tree.pos);</span>
<span class="line-removed">-             // Make a body comprising { throw new RuntimeException(&quot;&quot;Internal error: This method must have been replaced by javac&quot;); }</span>
<span class="line-removed">-             JCBlock body = make.Block(Flags.SYNTHETIC, List.of(make.Throw(</span>
<span class="line-removed">-                     make.NewClass(null,</span>
<span class="line-removed">-                             null,</span>
<span class="line-removed">-                             make.Ident(names.fromString(&quot;RuntimeException&quot;)),</span>
<span class="line-removed">-                             List.of(make.Literal(CLASS, &quot;Internal error: This method must have been replaced by javac&quot;)),</span>
<span class="line-removed">-                             null))));</span>
<span class="line-removed">- </span>
              if (requireToString) {
                  // public String toString() { throw new RuntimeException(message); }
                  JCMethodDecl toString = make.
                          MethodDef(make.Modifiers(Flags.PUBLIC | Flags.FINAL),
                                  names.toString,
                                  make.Ident(names.fromString(&quot;String&quot;)),
<span class="line-new-header">--- 1171,29 ---</span>
                      if (methodDecl.sym != null
                              &amp;&amp; methodDecl.sym.type != null
                              &amp;&amp; !methodDecl.sym.type.isErroneous()
                              &amp;&amp; (methodDecl.sym.flags() &amp; STATIC) == 0) {
                          final List&lt;Type&gt; parameterTypes = methodDecl.sym.type.getParameterTypes();
<span class="line-modified">!                         if (parameterTypes.size() == 0) {</span>
<span class="line-modified">!                             String name = methodDecl.name.toString();</span>
<span class="line-modified">!                             if (name.equals(&quot;toString&quot;)) {</span>
<span class="line-modified">!                                 requireToString = false;</span>
<span class="line-modified">!                             }</span>
                          }
                      }
                  }
              }
  
              if (requireToString) {
<span class="line-added">+                 make.at(tree.pos);</span>
<span class="line-added">+                 // Make a body comprising { throw new RuntimeException(&quot;&quot;Internal error: This method must have been replaced by javac&quot;); }</span>
<span class="line-added">+                 JCBlock body = make.Block(Flags.SYNTHETIC, List.of(make.Throw(</span>
<span class="line-added">+                         make.NewClass(null,</span>
<span class="line-added">+                                 null,</span>
<span class="line-added">+                                 make.Ident(names.fromString(&quot;RuntimeException&quot;)),</span>
<span class="line-added">+                                 List.of(make.Literal(CLASS, &quot;Internal error: This method must have been replaced by javac&quot;)),</span>
<span class="line-added">+                                 null))));</span>
                  // public String toString() { throw new RuntimeException(message); }
                  JCMethodDecl toString = make.
                          MethodDef(make.Modifiers(Flags.PUBLIC | Flags.FINAL),
                                  names.toString,
                                  make.Ident(names.fromString(&quot;String&quot;)),
</pre>
<center><a href="../../../../../../../../java.base/share/classes/java/lang/invoke/ValueBootstrapMethods.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../jvm/Gen.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>