<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.compiler/share/classes/com/sun/tools/javac/jvm/Gen.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../comp/TypeEnter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../test/langtools/tools/javac/valhalla/lworld-values/ValueBootstrapMethodsTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/jvm/Gen.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1098                     List.nil(),
1099                     syms.methodClass);
1100 
1101             List&lt;Type&gt; bsm_staticArgs = List.of(syms.methodHandleLookupType,
1102                                                 syms.stringType,
1103                                                 syms.methodTypeType);
1104 
1105             Symbol bsm = rs.resolveInternalMethod(methodDecl.pos(),
1106                     getAttrEnv(),
1107                     syms.valueBootstrapMethods,
1108                     names.fromString(&quot;makeBootstrapMethod&quot;),
1109                     bsm_staticArgs,
1110                     null);
1111 
1112             Symbol.DynamicMethodSymbol dynSym = new Symbol.DynamicMethodSymbol(name,
1113                     syms.noSymbol,
1114                     ((MethodSymbol)bsm).asHandle(),
1115                     indyType,
1116                     List.nil().toArray(new LoadableConstant[0]));
1117 
<span class="line-modified">1118             switch (methodDecl.name.toString()) {</span>
<span class="line-modified">1119                 case &quot;toString&quot;:</span>
<span class="line-modified">1120                     code.emitop0(aload_0);</span>
<span class="line-removed">1121                     items.makeDynamicItem(dynSym).invoke();</span>
<span class="line-removed">1122                     code.emitop0(areturn);</span>
<span class="line-removed">1123                     return;</span>
<span class="line-removed">1124             }</span>
1125         }
1126 
1127     public void visitVarDef(JCVariableDecl tree) {
1128         VarSymbol v = tree.sym;
1129         if (tree.init != null) {
1130             checkStringConstant(tree.init.pos(), v.getConstValue());
1131             if (v.getConstValue() == null || varDebugInfo) {
1132                 Assert.check(code.isStatementStart());
1133                 code.newLocal(v);
1134                 genExpr(tree.init, v.erasure(types)).load();
1135                 items.makeLocalItem(v).store();
1136                 Assert.check(code.isStatementStart());
1137             }
1138         } else {
1139             code.newLocal(v);
1140         }
1141         checkDimension(tree.pos(), v.type);
1142     }
1143 
1144     public void visitSkip(JCSkip tree) {
</pre>
</td>
<td>
<hr />
<pre>
1098                     List.nil(),
1099                     syms.methodClass);
1100 
1101             List&lt;Type&gt; bsm_staticArgs = List.of(syms.methodHandleLookupType,
1102                                                 syms.stringType,
1103                                                 syms.methodTypeType);
1104 
1105             Symbol bsm = rs.resolveInternalMethod(methodDecl.pos(),
1106                     getAttrEnv(),
1107                     syms.valueBootstrapMethods,
1108                     names.fromString(&quot;makeBootstrapMethod&quot;),
1109                     bsm_staticArgs,
1110                     null);
1111 
1112             Symbol.DynamicMethodSymbol dynSym = new Symbol.DynamicMethodSymbol(name,
1113                     syms.noSymbol,
1114                     ((MethodSymbol)bsm).asHandle(),
1115                     indyType,
1116                     List.nil().toArray(new LoadableConstant[0]));
1117 
<span class="line-modified">1118             code.emitop0(aload_0);</span>
<span class="line-modified">1119             items.makeDynamicItem(dynSym).invoke();</span>
<span class="line-modified">1120             code.emitop0(areturn);</span>




1121         }
1122 
1123     public void visitVarDef(JCVariableDecl tree) {
1124         VarSymbol v = tree.sym;
1125         if (tree.init != null) {
1126             checkStringConstant(tree.init.pos(), v.getConstValue());
1127             if (v.getConstValue() == null || varDebugInfo) {
1128                 Assert.check(code.isStatementStart());
1129                 code.newLocal(v);
1130                 genExpr(tree.init, v.erasure(types)).load();
1131                 items.makeLocalItem(v).store();
1132                 Assert.check(code.isStatementStart());
1133             }
1134         } else {
1135             code.newLocal(v);
1136         }
1137         checkDimension(tree.pos(), v.type);
1138     }
1139 
1140     public void visitSkip(JCSkip tree) {
</pre>
</td>
</tr>
</table>
<center><a href="../comp/TypeEnter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../test/langtools/tools/javac/valhalla/lworld-values/ValueBootstrapMethodsTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>