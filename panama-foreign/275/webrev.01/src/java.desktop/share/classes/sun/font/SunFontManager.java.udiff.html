<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/share/classes/sun/font/SunFontManager.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="GlyphLayout.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TrueTypeFont.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/sun/font/SunFontManager.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -318,11 +318,11 @@</span>
                              String name = br.readLine();
                              if (name == null) {
                                  break;
                              } else {
                                  if (FontUtilities.debugFonts()) {
<span class="udiff-line-modified-removed">-                                     FontUtilities.getLogger().warning(&quot;read bad font: &quot; + name);</span>
<span class="udiff-line-modified-added">+                                     FontUtilities.logWarning(&quot;read bad font: &quot; + name);</span>
                                  }
                                  badFonts.add(name);
                              }
                          }
                      } catch (IOException e) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -352,11 +352,11 @@</span>
                  fontConfig = createFontConfiguration();
  
                  String[] fontInfo = getDefaultPlatformFont();
                  defaultFontName = fontInfo[0];
                  if (defaultFontName == null &amp;&amp; FontUtilities.debugFonts()) {
<span class="udiff-line-modified-removed">-                     FontUtilities.getLogger().warning(&quot;defaultFontName is null&quot;);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logWarning(&quot;defaultFontName is null&quot;);</span>
                  }
                  defaultFontFileName = fontInfo[1];
  
                  String extraFontPath = fontConfig.getExtraFontPath();
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -401,14 +401,13 @@</span>
                              dbgFontPath.substring(&quot;append:&quot;.length());
                      }
                  }
  
                  if (FontUtilities.debugFonts()) {
<span class="udiff-line-modified-removed">-                     PlatformLogger logger = FontUtilities.getLogger();</span>
<span class="udiff-line-modified-removed">-                     logger.info(&quot;JRE font directory: &quot; + jreFontDirName);</span>
<span class="udiff-line-modified-removed">-                     logger.info(&quot;Extra font path: &quot; + extraFontPath);</span>
<span class="udiff-line-removed">-                     logger.info(&quot;Debug font path: &quot; + dbgFontPath);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logInfo(&quot;JRE font directory: &quot; + jreFontDirName);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logInfo(&quot;Extra font path: &quot; + extraFontPath);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logInfo(&quot;Debug font path: &quot; + dbgFontPath);</span>
                  }
  
                  if (dbgFontPath != null) {
                      /* In debugging mode we register all the paths
                       * Caution: this is a very expensive call on Solaris:-
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -560,14 +559,13 @@</span>
          }
          altNameCache.put(compositeName.toLowerCase(Locale.ENGLISH), cf);
      }
  
      private void addCompositeToFontList(CompositeFont f, int rank) {
<span class="udiff-line-removed">- </span>
          if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-             FontUtilities.getLogger().info(&quot;Add to Family &quot;+ f.familyName +</span>
<span class="udiff-line-modified-removed">-                         &quot;, Font &quot; + f.fullName + &quot; rank=&quot;+rank);</span>
<span class="udiff-line-modified-added">+             FontUtilities.logInfo(&quot;Add to Family &quot; + f.familyName +</span>
<span class="udiff-line-modified-added">+                         &quot;, Font &quot; + f.fullName + &quot; rank=&quot; + rank);</span>
          }
          f.setRank(rank);
          compositeFonts.put(f.fullName, f);
          fullNameToFont.put(f.fullName.toLowerCase(Locale.ENGLISH), f);
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -623,12 +621,12 @@</span>
              return null;
          }
          f.setRank(rank);
          if (!physicalFonts.containsKey(fontName)) {
              if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger().info(&quot;Add to Family &quot;+familyName +</span>
<span class="udiff-line-modified-removed">-                             &quot;, Font &quot; + fontName + &quot; rank=&quot;+rank);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;Add to Family &quot; + familyName +</span>
<span class="udiff-line-modified-added">+                             &quot;, Font &quot; + fontName + &quot; rank=&quot; + rank);</span>
              }
              physicalFonts.put(fontName, f);
              FontFamily family = FontFamily.getFamily(familyName);
              if (family == null) {
                  family = new FontFamily(familyName, false, rank);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -697,25 +695,22 @@</span>
                   * In other words if we reach here, there&#39;s a possible
                   * problem with our choice of font configuration fonts.
                   */
                  if (oldFont.platName.startsWith(jreFontDirName)) {
                      if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                         FontUtilities.getLogger()</span>
<span class="udiff-line-modified-removed">-                               .warning(&quot;Unexpected attempt to replace a JRE &quot; +</span>
<span class="udiff-line-removed">-                                        &quot; font &quot; + fontName + &quot; from &quot; +</span>
<span class="udiff-line-removed">-                                         oldFont.platName +</span>
<span class="udiff-line-modified-added">+                         FontUtilities.logWarning(&quot;Unexpected attempt to replace a JRE &quot; +</span>
<span class="udiff-line-modified-added">+                                        &quot; font &quot; + fontName + &quot; from &quot; + oldFont.platName +</span>
                                         &quot; with &quot; + newFont.platName);
                      }
                      return oldFont;
                  }
  
                  if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                     FontUtilities.getLogger()</span>
<span class="udiff-line-modified-removed">-                           .info(&quot;Replace in Family &quot; + familyName +</span>
<span class="udiff-line-modified-removed">-                                 &quot;,Font &quot; + fontName + &quot; new rank=&quot;+rank +</span>
<span class="udiff-line-modified-removed">-                                 &quot; from &quot; + oldFont.platName +</span>
<span class="udiff-line-removed">-                                 &quot; with &quot; + newFont.platName);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logInfo(&quot;Replace in Family &quot; + familyName +</span>
<span class="udiff-line-modified-added">+                                     &quot;,Font &quot; + fontName + &quot; new rank=&quot;+rank +</span>
<span class="udiff-line-modified-added">+                                     &quot; from &quot; + oldFont.platName +</span>
<span class="udiff-line-modified-added">+                                     &quot; with &quot; + newFont.platName);</span>
                  }
                  replaceFont(oldFont, newFont);
                  physicalFonts.put(fontName, newFont);
                  fullNameToFont.put(fontName.toLowerCase(Locale.ENGLISH),
                                     newFont);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -901,12 +896,11 @@</span>
  
          if (fileNameKey == null) {
              return null;
          }
          if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-             FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                             .info(&quot;Opening deferred font file &quot; + fileNameKey);</span>
<span class="udiff-line-modified-added">+             FontUtilities.logInfo(&quot;Opening deferred font file &quot; + fileNameKey);</span>
          }
  
          PhysicalFont physicalFont = null;
          FontRegistrationInfo regInfo = deferredFontFiles.get(fileNameKey);
          if (regInfo != null) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -989,18 +983,16 @@</span>
                  break;
              default:
  
              }
              if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger()</span>
<span class="udiff-line-modified-removed">-                       .info(&quot;Registered file &quot; + fileName + &quot; as font &quot; +</span>
<span class="udiff-line-removed">-                             physicalFont + &quot; rank=&quot;  + fontRank);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;Registered file &quot; + fileName + &quot; as font &quot; +</span>
<span class="udiff-line-modified-added">+                                 physicalFont + &quot; rank=&quot;  + fontRank);</span>
              }
          } catch (FontFormatException ffe) {
              if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger().warning(&quot;Unusable font: &quot; +</span>
<span class="udiff-line-removed">-                                fileName + &quot; &quot; + ffe.toString());</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;Unusable font: &quot; + fileName + &quot; &quot; + ffe.toString());</span>
              }
          }
          if (physicalFont != null &amp;&amp;
              fontFormat != FONTFORMAT_NATIVE) {
              registeredFonts.put(fileName, physicalFont);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1040,12 +1032,11 @@</span>
              if (font2d != null) {
                  if (font2d instanceof PhysicalFont) {
                      defaultPhysicalFont = (PhysicalFont)font2d;
                  } else {
                      if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                         FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                             .warning(&quot;Font returned by findFont2D for default font name &quot; +</span>
<span class="udiff-line-modified-added">+                         FontUtilities.logWarning(&quot;Font returned by findFont2D for default font name &quot; +</span>
                                       defaultFontName + &quot; is not a physical font: &quot; + font2d.getFontName(null));
                      }
                  }
              }
              if (defaultPhysicalFont == null) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1302,12 +1293,11 @@</span>
                              }
                          }
                      }
                      fontToFamilyNameMap.remove(name);
                      if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                         FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                                              .info(&quot;No file for font:&quot; + name);</span>
<span class="udiff-line-modified-added">+                         FontUtilities.logInfo(&quot;No file for font:&quot; + name);</span>
                      }
                  }
              }
          }
      }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1353,12 +1343,11 @@</span>
          HashMap&lt;String,ArrayList&lt;String&gt;&gt; familyToFontListMap2 = null;;
  
          for (String pathFile : getFontFilesFromPath(false)) {
              if (!registryFiles.contains(pathFile)) {
                  if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                     FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                                  .info(&quot;Found non-registry file : &quot; + pathFile);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logInfo(&quot;Found non-registry file : &quot; + pathFile);</span>
                  }
                  PhysicalFont f = registerFontFile(getPathName(pathFile));
                  if (f == null) {
                      continue;
                  }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1398,24 +1387,22 @@</span>
              try {
                  int fn = 0;
                  TrueTypeFont ttf;
                  String fullPath = getPathName(file);
                  if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                     FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                                    .info(&quot;Trying to resolve file &quot; + fullPath);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logInfo(&quot;Trying to resolve file &quot; + fullPath);</span>
                  }
                  do {
                      ttf = new TrueTypeFont(fullPath, null, fn++, false);
                      //  prefer the font&#39;s locale name.
                      String fontName = ttf.getFontName(l).toLowerCase();
                      if (unmappedFonts.contains(fontName)) {
                          fontToFileMap.put(fontName, file);
                          unmappedFonts.remove(fontName);
                          if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                             FontUtilities.getLogger()</span>
<span class="udiff-line-modified-removed">-                                   .info(&quot;Resolved absent registry entry for &quot; +</span>
<span class="udiff-line-removed">-                                         fontName + &quot; located in &quot; + fullPath);</span>
<span class="udiff-line-modified-added">+                             FontUtilities.logInfo(&quot;Resolved absent registry entry for &quot; +</span>
<span class="udiff-line-modified-added">+                                             fontName + &quot; located in &quot; + fullPath);</span>
                          }
                      }
                  }
                  while (fn &lt; ttf.getFontCount());
              } catch (Exception e) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1536,12 +1523,11 @@</span>
              }
          }
  
          if (failure) {
              if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger().</span>
<span class="udiff-line-removed">-                     info(&quot;Hardcoded file missing looking for &quot; + lcName);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;Hardcoded file missing looking for &quot; + lcName);</span>
              }
              platformFontMap.remove(firstWord);
              return null;
          }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1564,12 +1550,11 @@</span>
               }
           });
  
          if (failure) {
              if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger().</span>
<span class="udiff-line-removed">-                     info(&quot;Hardcoded file missing looking for &quot; + lcName);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;Hardcoded file missing looking for &quot; + lcName);</span>
              }
              platformFontMap.remove(firstWord);
              return null;
          }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1832,13 +1817,12 @@</span>
          for (int f=0;f&lt;fontList.length;f++) {
              String fontNameLC = fontList[f].toLowerCase(Locale.ENGLISH);
              String fileName = fontToFileMap.get(fontNameLC);
              if (fileName == null) {
                  if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                     FontUtilities.getLogger()</span>
<span class="udiff-line-modified-removed">-                           .info(&quot;Platform lookup : No file for font &quot; +</span>
<span class="udiff-line-removed">-                                 fontList[f] + &quot; in family &quot; +familyName);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logInfo(&quot;Platform lookup : No file for font &quot; +</span>
<span class="udiff-line-modified-added">+                                     fontList[f] + &quot; in family &quot; +familyName);</span>
                  }
                  return null;
              }
          }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1903,13 +1887,12 @@</span>
           */
          Font2D font = fontNameCache.get(mapName);
          if (font != null) {
              return font;
          }
<span class="udiff-line-removed">- </span>
          if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-             FontUtilities.getLogger().info(&quot;Search for font: &quot; + name);</span>
<span class="udiff-line-modified-added">+             FontUtilities.logInfo(&quot;Search for font: &quot; + name);</span>
          }
  
          // The check below is just so that the bitmap fonts being set by
          // AWT and Swing thru the desktop properties do not trigger the
          // the load fonts case. The two bitmap fonts are now mapped to
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2019,13 +2002,13 @@</span>
  
          if (FontUtilities.isWindows) {
  
              font = findFontFromPlatformMap(lowerCaseName, style);
              if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                     .info(&quot;findFontFromPlatformMap returned &quot; + font);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;findFontFromPlatformMap returned &quot; + font);</span>
              }
<span class="udiff-line-added">+ </span>
              if (font != null) {
                  fontNameCache.put(mapName, font);
                  return font;
              }
              /* Don&#39;t want Windows to return a font from C:\Windows\Fonts
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2040,14 +2023,13 @@</span>
                  }
              }
              font = findFontFromPlatform(lowerCaseName, style);
              if (font != null) {
                  if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                     FontUtilities.getLogger()</span>
<span class="udiff-line-modified-removed">-                           .info(&quot;Found font via platform API for request:\&quot;&quot; +</span>
<span class="udiff-line-modified-removed">-                                 name + &quot;\&quot;:, style=&quot;+style+</span>
<span class="udiff-line-removed">-                                 &quot; found font: &quot; + font);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logInfo(&quot;Found font via platform API for request:\&quot;&quot; +</span>
<span class="udiff-line-modified-added">+                                     name + &quot;\&quot;:, style=&quot;+style+</span>
<span class="udiff-line-modified-added">+                                     &quot; found font: &quot; + font);</span>
                  }
                  fontNameCache.put(mapName, font);
                  return font;
              }
          }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2114,22 +2096,20 @@</span>
          /* If reach here and no match has been located, then if all fonts
           * are not yet loaded, do so, and then recurse.
           */
          if (!loadedAllFonts) {
              if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                                        .info(&quot;Load fonts looking for:&quot; + name);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;Load fonts looking for:&quot; + name);</span>
              }
              loadFonts();
              loadedAllFonts = true;
              return findFont2D(name, style, fallback);
          }
  
          if (!loadedAllFontFiles) {
              if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                                   .info(&quot;Load font files looking for:&quot; + name);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;Load font files looking for:&quot; + name);</span>
              }
              loadFontFiles();
              loadedAllFontFiles = true;
              return findFont2D(name, style, fallback);
          }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2183,13 +2163,12 @@</span>
          } else if (lowerCaseName.equals(&quot;courier&quot;)) {
              font = findFont2D(&quot;monospaced&quot;, style, fallback);
              fontNameCache.put(mapName, font);
              return font;
          }
<span class="udiff-line-removed">- </span>
          if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-             FontUtilities.getLogger().info(&quot;No font found for:&quot; + name);</span>
<span class="udiff-line-modified-added">+             FontUtilities.logInfo(&quot;No font found for:&quot; + name);</span>
          }
  
          switch (fallback) {
          case PHYSICAL_FALLBACK: return getDefaultPhysicalFont();
          case LOGICAL_FALLBACK: return getDefaultLogicalFont(style);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2360,12 +2339,11 @@</span>
          if (!(font2D instanceof PhysicalFont)) {
              /* We should never reach here, but just in case */
              return;
          } else {
              if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                                      .severe(&quot;Deregister bad font: &quot; + font2D);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logSevere(&quot;Deregister bad font: &quot; + font2D);</span>
              }
              replaceFont((PhysicalFont)font2D, getDefaultPhysicalFont());
          }
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2384,24 +2362,22 @@</span>
          /* If we try to replace the font with itself, that won&#39;t work,
           * so pick any alternative physical font
           */
          if (oldFont == newFont) {
              if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                       .severe(&quot;Can&#39;t replace bad font with itself &quot; + oldFont);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logSevere(&quot;Can&#39;t replace bad font with itself &quot; + oldFont);</span>
              }
              PhysicalFont[] physFonts = getPhysicalFonts();
              for (int i=0; i&lt;physFonts.length;i++) {
                  if (physFonts[i] != newFont) {
                      newFont = physFonts[i];
                      break;
                  }
              }
              if (oldFont == newFont) {
                  if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-                     FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                            .severe(&quot;This is bad. No good physicalFonts found.&quot;);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logSevere(&quot;This is bad. No good physicalFonts found.&quot;);</span>
                  }
                  return;
              }
          }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2498,14 +2474,12 @@</span>
       * almost never used. The main case in which it is called is when
       * a bogus font name is used and we need to check all possible names
       * before returning the default case.
       */
      private Font2D findFont2DAllLocales(String name, int style) {
<span class="udiff-line-removed">- </span>
          if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-             FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                            .info(&quot;Searching localised font names for:&quot; + name);</span>
<span class="udiff-line-modified-added">+             FontUtilities.logInfo(&quot;Searching localised font names for:&quot; + name);</span>
          }
  
          /* If reach here and no match has been located, then if we have
           * not yet built the map of localeFullNamesToFont for TT fonts, do so
           * now. This method must be called after all fonts have been loaded.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2637,13 +2611,13 @@</span>
       * to use Mincho instead of Gothic for dialoginput in JA locales
       * on windows. Not needed on other platforms.
       */
      public synchronized void useAlternateFontforJALocales() {
          if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-             FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                 .info(&quot;Entered useAlternateFontforJALocales().&quot;);</span>
<span class="udiff-line-modified-added">+             FontUtilities.logInfo(&quot;Entered useAlternateFontforJALocales().&quot;);</span>
          }
<span class="udiff-line-added">+ </span>
          if (!FontUtilities.isWindows) {
              return;
          }
          gAltJAFont = true;
      }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2652,12 +2626,13 @@</span>
          return gAltJAFont;
      }
  
      public synchronized void preferLocaleFonts() {
          if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-             FontUtilities.getLogger().info(&quot;Entered preferLocaleFonts().&quot;);</span>
<span class="udiff-line-modified-added">+             FontUtilities.logInfo(&quot;Entered preferLocaleFonts().&quot;);</span>
          }
<span class="udiff-line-added">+ </span>
          /* Test if re-ordering will have any effect */
          if (!FontConfiguration.willReorderForStartupLocale()) {
              return;
          }
          if (gLocalePref == true) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2668,13 +2643,13 @@</span>
          _usingAlternateComposites = true;
      }
  
      public synchronized void preferProportionalFonts() {
          if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-             FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                 .info(&quot;Entered preferProportionalFonts().&quot;);</span>
<span class="udiff-line-modified-added">+             FontUtilities.logInfo(&quot;Entered preferProportionalFonts().&quot;);</span>
          }
<span class="udiff-line-added">+ </span>
          /* If no proportional fonts are configured, there&#39;s no need
           * to take any action.
           */
          if (!FontConfiguration.hasMonoToPropMap()) {
              return;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2910,12 +2885,11 @@</span>
                  continue;
              }
  
              if (badFonts != null &amp;&amp; badFonts.contains(fullName)) {
                  if (FontUtilities.debugFonts()) {
<span class="udiff-line-modified-removed">-                     FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                                          .warning(&quot;skip bad font &quot; + fullName);</span>
<span class="udiff-line-modified-added">+                     FontUtilities.logWarning(&quot;skip bad font &quot; + fullName);</span>
                  }
                  continue; // skip this font file.
              }
  
              registeredFontFiles.add(fullName);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2930,11 +2904,11 @@</span>
                      message += &quot; with native name(s) &quot; + natNames[0];
                      for (int nn = 1; nn &lt; natNames.length; nn++) {
                          message += &quot;, &quot; + natNames[nn];
                      }
                  }
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger().info(message);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(message);</span>
              }
              fontNames[fontCount] = fullName;
              nativeNames[fontCount++] = getNativeNames(fullName, null);
          }
          registerFonts(fontNames, nativeNames, fontCount, fontFormat,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2980,12 +2954,11 @@</span>
          }
          /* Use lock specific to the font system */
          synchronized (this) {
              if (FontUtilities.debugFonts()) {
                  Thread.dumpStack();
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                             .info(&quot;SunGraphicsEnvironment.loadFonts() called&quot;);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;SunGraphicsEnvironment.loadFonts() called&quot;);</span>
              }
              initialiseDeferredFonts();
  
              AccessController.doPrivileged(new PrivilegedAction&lt;Void&gt;() {
                  public Void run() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3099,11 +3072,11 @@</span>
          }
          /* Use lock specific to the font system */
          synchronized (this) {
              if (FontUtilities.debugFonts()) {
                  Thread.dumpStack();
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger().info(&quot;loadAllFontFiles() called&quot;);</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;loadAllFontFiles() called&quot;);</span>
              }
              AccessController.doPrivileged(new PrivilegedAction&lt;Void&gt;() {
                  public Void run() {
                      if (fontPath == null) {
                          fontPath = getPlatformFontPath(noType1Font);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3131,14 +3104,12 @@</span>
       * The composites themselves are then registered.
       */
      private void
          initCompositeFonts(FontConfiguration fontConfig,
                             ConcurrentHashMap&lt;String, Font2D&gt;  altNameCache) {
<span class="udiff-line-removed">- </span>
          if (FontUtilities.isLogging()) {
<span class="udiff-line-modified-removed">-             FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                             .info(&quot;Initialising composite fonts&quot;);</span>
<span class="udiff-line-modified-added">+             FontUtilities.logInfo(&quot;Initialising composite fonts&quot;);</span>
          }
  
          int numCoreFonts = fontConfig.getNumberCoreFonts();
          String[] fcFonts = fontConfig.getPlatformFontNames();
          for (int f=0; f&lt;fcFonts.length; f++) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3234,12 +3205,11 @@</span>
                                        descriptor.getExclusionRanges(),
                                        descriptor.getExclusionRangeLimits(),
                                        true);
              }
              if (FontUtilities.debugFonts()) {
<span class="udiff-line-modified-removed">-                 FontUtilities.getLogger()</span>
<span class="udiff-line-removed">-                                .info(&quot;registered &quot; + descriptor.getFaceName());</span>
<span class="udiff-line-modified-added">+                 FontUtilities.logInfo(&quot;registered &quot; + descriptor.getFaceName());</span>
              }
          }
      }
  
      /**
</pre>
<center><a href="GlyphLayout.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TrueTypeFont.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>