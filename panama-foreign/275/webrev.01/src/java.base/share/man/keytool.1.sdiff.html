<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/man/keytool.1</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="jfr.1.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../native/libfdlibm/k_standard.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/man/keytool.1</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 .\&quot;t
<span class="line-modified">   2 .\&quot; Copyright (c) 1994, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3 .\&quot; DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4 .\&quot;
   5 .\&quot; This code is free software; you can redistribute it and/or modify it
   6 .\&quot; under the terms of the GNU General Public License version 2 only, as
   7 .\&quot; published by the Free Software Foundation.
   8 .\&quot;
   9 .\&quot; This code is distributed in the hope that it will be useful, but WITHOUT
  10 .\&quot; ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11 .\&quot; FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
  12 .\&quot; version 2 for more details (a copy is included in the LICENSE file that
  13 .\&quot; accompanied this code).
  14 .\&quot;
  15 .\&quot; You should have received a copy of the GNU General Public License version
  16 .\&quot; 2 along with this work; if not, write to the Free Software Foundation,
  17 .\&quot; Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18 .\&quot;
  19 .\&quot; Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20 .\&quot; or visit www.oracle.com if you need additional information or have any
  21 .\&quot; questions.
  22 .\&quot;
  23 .\&quot; Automatically generated by Pandoc 2.3.1
  24 .\&quot;
<span class="line-modified">  25 .TH &quot;KEYTOOL&quot; &quot;1&quot; &quot;2020&quot; &quot;JDK 14&quot; &quot;JDK Commands&quot;</span>
  26 .hy
  27 .SH NAME
  28 .PP
  29 keytool \- a key and certificate management utility
  30 .SH SYNOPSIS
  31 .PP
  32 \f[CB]keytool\f[R] [\f[I]commands\f[R]]
  33 .TP
  34 .B \f[I]commands\f[R]
  35 Commands for \f[CB]keytool\f[R] include the following:
  36 .RS
  37 .IP \[bu] 2
  38 \f[CB]\-certreq\f[R]: Generates a certificate request
  39 .IP \[bu] 2
  40 \f[CB]\-changealias\f[R]: Changes an entry\[aq]s alias
  41 .IP \[bu] 2
  42 \f[CB]\-delete\f[R]: Deletes an entry
  43 .IP \[bu] 2
  44 \f[CB]\-exportcert\f[R]: Exports certificate
  45 .IP \[bu] 2
</pre>
<hr />
<pre>
  84 and authentication services, by using digital signatures.
  85 The \f[CB]keytool\f[R] command also enables users to cache the public keys
  86 (in the form of certificates) of their communicating peers.
  87 .PP
  88 A certificate is a digitally signed statement from one entity (person,
  89 company, and so on), which says that the public key (and some other
  90 information) of some other entity has a particular value.
  91 When data is digitally signed, the signature can be verified to check
  92 the data integrity and authenticity.
  93 Integrity means that the data hasn\[aq]t been modified or tampered with,
  94 and authenticity means that the data comes from the individual who
  95 claims to have created and signed it.
  96 .PP
  97 The \f[CB]keytool\f[R] command also enables users to administer secret
  98 keys and passphrases used in symmetric encryption and decryption (Data
  99 Encryption Standard).
 100 It can also display other security\-related information.
 101 .PP
 102 The \f[CB]keytool\f[R] command stores the keys and certificates in a
 103 keystore.










 104 .SH COMMAND AND OPTION NOTES
 105 .PP
 106 The following notes apply to the descriptions in \f[B]Commands and
 107 Options\f[R]:
 108 .IP \[bu] 2
 109 All command and option names are preceded by a hyphen sign
 110 (\f[CB]\-\f[R]).
 111 .IP \[bu] 2
 112 Only one command can be provided.
 113 .IP \[bu] 2
 114 Options for each command can be provided in any order.
 115 .IP \[bu] 2
 116 There are two kinds of options, one is single\-valued which should be
 117 only provided once.
 118 If a single\-valued option is provided multiple times, the value of the
 119 last one is used.
 120 The other type is multi\-valued, which can be provided multiple times
 121 and all values are used.
 122 The only multi\-valued option currently supported is the \f[CB]\-ext\f[R]
 123 option used to generate X.509v3 certificate extensions.
</pre>
<hr />
<pre>
 243 .IP \[bu] 2
 244 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
 245 .IP \[bu] 2
 246 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
 247 .IP \[bu] 2
 248 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 249 \f[I]arg\f[R]]}: Adds a security provider by name (such as SunPKCS11)
 250 with an optional configure argument.
 251 The value of the security provider is the name of a security provider
 252 that is defined in a module.
 253 .RS 2
 254 .PP
 255 For example,
 256 .RS
 257 .PP
 258 \f[CB]keytool\ \-addprovider\ SunPKCS11\ \-providerarg\ some.cfg\ ...\f[R]
 259 .RE
 260 .PP
 261 \f[B]Note:\f[R]
 262 .PP
<span class="line-modified"> 263 For compatibility reasons, the SunPKCS11 and OracleUcrypto providers can</span>
<span class="line-modified"> 264 still be loaded with</span>
<span class="line-modified"> 265 \f[CB]\-providerclass\ sun.security.pkcs11.SunPKCS11\f[R] and</span>
<span class="line-modified"> 266 \f[CB]\-providerclass\ com.oracle.security.crypto.UcryptoProvider\f[R]</span>
<span class="line-removed"> 267 even if they are now defined in modules.</span>
<span class="line-removed"> 268 These are the only modules included in JDK that need a configuration,</span>
 269 and therefore the most widely used with the \f[CB]\-providerclass\f[R]
 270 option.
 271 For legacy security providers located on classpath and loaded by
 272 reflection, \f[CB]\-providerclass\f[R] should still be used.
 273 .RE
 274 .IP \[bu] 2
 275 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 276 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
 277 an optional configure argument.
 278 .RS 2
 279 .PP
 280 For example, if \f[CB]MyProvider\f[R] is a legacy provider loaded via
 281 reflection,
 282 .RS
 283 .PP
 284 \f[CB]keytool\ \-providerclass\ com.example.MyProvider\ ...\f[R]
 285 .RE
 286 .RE
 287 .IP \[bu] 2
 288 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
</pre>
<hr />
<pre>
2182 the keystore and the integrity of the keystore.
2183 Keystore implementations of different types aren\[aq]t compatible.
2184 .PP
2185 The \f[CB]keytool\f[R] command works on any file\-based keystore
2186 implementation.
2187 It treats the keystore location that is passed to it at the command line
2188 as a file name and converts it to a \f[CB]FileInputStream\f[R], from which
2189 it loads the keystore information.)The \f[CB]jarsigner\f[R] commands can
2190 read a keystore from any location that can be specified with a URL.
2191 .PP
2192 For \f[CB]keytool\f[R] and \f[CB]jarsigner\f[R], you can specify a keystore
2193 type at the command line, with the \f[CB]\-storetype\f[R] option.
2194 .PP
2195 If you don\[aq]t explicitly specify a keystore type, then the tools
2196 choose a keystore implementation based on the value of the
2197 \f[CB]keystore.type\f[R] property specified in the security properties
2198 file.
2199 The security properties file is called \f[CB]java.security\f[R], and
2200 resides in the security properties directory:
2201 .IP \[bu] 2
<span class="line-modified">2202 \f[B]Oracle Solaris, Linux, and OS X:\f[R]</span>
<span class="line-removed">2203 \f[CB]java.home/lib/security\f[R]</span>
2204 .IP \[bu] 2
2205 \f[B]Windows:\f[R] \f[CB]java.home\\lib\\security\f[R]
2206 .PP
2207 Each tool gets the \f[CB]keystore.type\f[R] value and then examines all
2208 the currently installed providers until it finds one that implements a
2209 keystores of that type.
2210 It then uses the keystore implementation from that provider.The
2211 \f[CB]KeyStore\f[R] class defines a static method named
2212 \f[CB]getDefaultType\f[R] that lets applications retrieve the value of the
2213 \f[CB]keystore.type\f[R] property.
2214 The following line of code creates an instance of the default keystore
2215 type as specified in the \f[CB]keystore.type\f[R] property:
2216 .RS
2217 .PP
2218 \f[CB]KeyStore\ keyStore\ =\ KeyStore.getInstance(KeyStore.getDefaultType());\f[R]
2219 .RE
2220 .PP
2221 The default keystore type is \f[CB]pkcs12\f[R], which is a cross\-platform
2222 keystore based on the RSA PKCS12 Personal Information Exchange Syntax
2223 Standard.
</pre>
<hr />
<pre>
2460 The top\-level (root) CA certificate is self\-signed.
2461 However, the trust into the root\[aq]s public key doesn\[aq]t come from
2462 the root certificate itself, but from other sources such as a newspaper.
2463 This is because anybody could generate a self\-signed certificate with
2464 the distinguished name of, for example, the DigiCert root CA.
2465 The root CA public key is widely known.
2466 The only reason it is stored in a certificate is because this is the
2467 format understood by most tools, so the certificate in this case is only
2468 used as a vehicle to transport the root CA\[aq]s public key.
2469 Before you add the root CA certificate to your keystore, you should view
2470 it with the \f[CB]\-printcert\f[R] option and compare the displayed
2471 fingerprint with the well\-known fingerprint obtained from a newspaper,
2472 the root CA\[aq]s Web page, and so on.
2473 .RE
2474 .TP
2475 .B cacerts Certificates File
2476 A certificates file named \f[CB]cacerts\f[R] resides in the security
2477 properties directory:
2478 .RS
2479 .IP \[bu] 2
<span class="line-modified">2480 \f[B]Oracle Solaris, Linux, and OS X:\f[R]</span>
<span class="line-removed">2481 \f[I]JAVA_HOME\f[R]\f[CB]/lib/security\f[R]</span>
2482 .IP \[bu] 2
2483 \f[B]Windows:\f[R] \f[I]JAVA_HOME\f[R]\f[CB]\\lib\\security\f[R]
2484 .PP
<span class="line-removed">2485 \f[I]JAVA_HOME\f[R] is the runtime environment directory, which is the</span>
<span class="line-removed">2486 \f[CB]jre\f[R] directory in the JDK or the top\-level directory of the</span>
<span class="line-removed">2487 Java Runtime Environment (JRE).</span>
<span class="line-removed">2488 .PP</span>
2489 The \f[CB]cacerts\f[R] file represents a system\-wide keystore with CA
2490 certificates.
2491 System administrators can configure and manage that file with the
2492 \f[CB]keytool\f[R] command by specifying \f[CB]jks\f[R] as the keystore
2493 type.
2494 The \f[CB]cacerts\f[R] keystore file ships with a default set of root CA
2495 certificates.
<span class="line-modified">2496 For Oracle Solaris, Linux, OS X, and Windows, you can list the default</span>
<span class="line-modified">2497 certificates with the following command:</span>
2498 .RS
2499 .PP
2500 \f[CB]keytool\ \-list\ \-cacerts\f[R]
2501 .RE
2502 .PP
2503 The initial password of the \f[CB]cacerts\f[R] keystore file is
2504 \f[CB]changeit\f[R].
2505 System administrators should change that password and the default access
2506 permission of that file upon installing the SDK.
2507 .PP
2508 \f[B]Note:\f[R]
2509 .PP
2510 It is important to verify your \f[CB]cacerts\f[R] file.
2511 Because you trust the CAs in the \f[CB]cacerts\f[R] file as entities for
2512 signing and issuing certificates to other entities, you must manage the
2513 \f[CB]cacerts\f[R] file carefully.
2514 The \f[CB]cacerts\f[R] file should contain only certificates of the CAs
2515 you trust.
2516 It is your responsibility to verify the trusted root CA certificates
2517 bundled in the \f[CB]cacerts\f[R] file and make your own trust decisions.
2518 .PP
2519 To remove an untrusted CA certificate from the \f[CB]cacerts\f[R] file,
2520 use the \f[CB]\-delete\f[R] option of the \f[CB]keytool\f[R] command.
<span class="line-modified">2521 You can find the \f[CB]cacerts\f[R] file in the JRE installation</span>
<span class="line-modified">2522 directory.</span>
2523 Contact your system administrator if you don\[aq]t have permission to
<span class="line-modified">2524 edit this file</span>
2525 .RE
2526 .TP
2527 .B Internet RFC 1421 Certificate Encoding Standard
2528 Certificates are often stored using the printable encoding format
2529 defined by the Internet RFC 1421 standard, instead of their binary
2530 encoding.
2531 This certificate format, also known as Base64 encoding, makes it easy to
2532 export certificates to other applications by email or through some other
2533 mechanism.
2534 .RS
2535 .PP
2536 Certificates read by the \f[CB]\-importcert\f[R] and \f[CB]\-printcert\f[R]
2537 commands can be in either this format or binary encoded.
2538 The \f[CB]\-exportcert\f[R] command by default outputs a certificate in
2539 binary encoding, but will instead output a certificate in the printable
2540 encoding format, when the \f[CB]\-rfc\f[R] option is specified.
2541 .PP
2542 The \f[CB]\-list\f[R] command by default prints the SHA\-256 fingerprint
2543 of a certificate.
2544 If the \f[CB]\-v\f[R] option is specified, then the certificate is printed
</pre>
<hr />
<pre>
2655 put it in a file named \f[CB]\\tmp\\cert\f[R].
2656 Before you consider adding the certificate to your list of trusted
2657 certificates, you can execute a \f[CB]\-printcert\f[R] command to view its
2658 fingerprints, as follows:
2659 .IP
2660 .nf
2661 \f[CB]
2662 \ \ keytool\ \-printcert\ \-file\ \\tmp\\cert
2663 \ \ \ \ Owner:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2664 \ \ \ \ Issuer:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2665 \ \ \ \ Serial\ Number:\ 59092b34
2666 \ \ \ \ Valid\ from:\ Thu\ Jun\ 24\ 18:01:13\ PDT\ 2016\ until:\ Wed\ Jun\ 23\ 17:01:13\ PST\ 2016
2667 \ \ \ \ Certificate\ Fingerprints:
2668 
2669 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-1:\ 20:B6:17:FA:EF:E5:55:8A:D0:71:1F:E8:D6:9D:C0:37:13:0E:5E:FE
2670 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-256:\ 90:7B:70:0A:EA:DC:16:79:92:99:41:FF:8A:FE:EB:90:
2671 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 17:75:E0:90:B2:24:4D:3A:2A:16:A6:E4:11:0F:67:A4
2672 \f[R]
2673 .fi
2674 .PP
<span class="line-modified">2675 \f[B]Oracle Solaris Example:\f[R]</span>
2676 .PP
2677 View the certificate first with the \f[CB]\-printcert\f[R] command or the
2678 \f[CB]\-importcert\f[R] command without the \f[CB]\-noprompt\f[R] option.
2679 Ensure that the displayed certificate fingerprints match the expected
2680 ones.
2681 For example, suppose someone sends or emails you a certificate that you
2682 put it in a file named \f[CB]/tmp/cert\f[R].
2683 Before you consider adding the certificate to your list of trusted
2684 certificates, you can execute a \f[CB]\-printcert\f[R] command to view its
2685 fingerprints, as follows:
2686 .IP
2687 .nf
2688 \f[CB]
2689 \ \ keytool\ \-printcert\ \-file\ /tmp/cert
2690 \ \ \ \ Owner:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2691 \ \ \ \ Issuer:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2692 \ \ \ \ Serial\ Number:\ 59092b34
2693 \ \ \ \ Valid\ from:\ Thu\ Jun\ 24\ 18:01:13\ PDT\ 2016\ until:\ Wed\ Jun\ 23\ 17:01:13\ PST\ 2016
2694 \ \ \ \ Certificate\ Fingerprints:
2695 
</pre>
<hr />
<pre>
2726 Some commands require a private/secret key password.
2727 Passwords can be specified on the command line in the
2728 \f[CB]\-storepass\f[R] and \f[CB]\-keypass\f[R] options.
2729 However, a password shouldn\[aq]t be specified on a command line or in a
2730 script unless it is for testing, or you are on a secure system.
2731 When you don\[aq]t specify a required password option on a command line,
2732 you are prompted for it.
2733 .SH CERTIFICATE CONFORMANCE WARNING
2734 .PP
2735 \f[B]Internet X.509 Public Key Infrastructure Certificate and
2736 Certificate Revocation List (CRL) Profile\f[R]
2737 [https://tools.ietf.org/rfc/rfc5280.txt] defined a profile on conforming
2738 X.509 certificates, which includes what values and value combinations
2739 are valid for certificate fields and extensions.
2740 .PP
2741 The \f[CB]keytool\f[R] command doesn\[aq]t enforce all of these rules so
2742 it can generate certificates that don\[aq]t conform to the standard,
2743 such as self\-signed certificates that would be used for internal
2744 testing purposes.
2745 Certificates that don\[aq]t conform to the standard might be rejected by
<span class="line-modified">2746 JRE or other applications.</span>
2747 Users should ensure that they provide the correct options for
2748 \f[CB]\-dname\f[R], \f[CB]\-ext\f[R], and so on.
2749 .SH IMPORT A NEW TRUSTED CERTIFICATE
2750 .PP
2751 Before you add the certificate to the keystore, the \f[CB]keytool\f[R]
2752 command verifies it by attempting to construct a chain of trust from
2753 that certificate to a self\-signed certificate (belonging to a root CA),
2754 using trusted certificates that are already available in the keystore.
2755 .PP
2756 If the \f[CB]\-trustcacerts\f[R] option was specified, then additional
2757 certificates are considered for the chain of trust, namely the
2758 certificates in a file named \f[CB]cacerts\f[R].
2759 .PP
2760 If the \f[CB]keytool\f[R] command fails to establish a trust path from the
2761 certificate to be imported up to a self\-signed certificate (either from
2762 the keystore or the \f[CB]cacerts\f[R] file), then the certificate
2763 information is printed, and the user is prompted to verify it by
2764 comparing the displayed certificate fingerprints with the fingerprints
2765 obtained from some other (trusted) source of information, which might be
2766 the certificate owner.
</pre>
</td>
<td>
<hr />
<pre>
   1 .\&quot;t
<span class="line-modified">   2 .\&quot; Copyright (c) 1998, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3 .\&quot; DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4 .\&quot;
   5 .\&quot; This code is free software; you can redistribute it and/or modify it
   6 .\&quot; under the terms of the GNU General Public License version 2 only, as
   7 .\&quot; published by the Free Software Foundation.
   8 .\&quot;
   9 .\&quot; This code is distributed in the hope that it will be useful, but WITHOUT
  10 .\&quot; ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11 .\&quot; FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
  12 .\&quot; version 2 for more details (a copy is included in the LICENSE file that
  13 .\&quot; accompanied this code).
  14 .\&quot;
  15 .\&quot; You should have received a copy of the GNU General Public License version
  16 .\&quot; 2 along with this work; if not, write to the Free Software Foundation,
  17 .\&quot; Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18 .\&quot;
  19 .\&quot; Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20 .\&quot; or visit www.oracle.com if you need additional information or have any
  21 .\&quot; questions.
  22 .\&quot;
  23 .\&quot; Automatically generated by Pandoc 2.3.1
  24 .\&quot;
<span class="line-modified">  25 .TH &quot;KEYTOOL&quot; &quot;1&quot; &quot;2020&quot; &quot;JDK 15&quot; &quot;JDK Commands&quot;</span>
  26 .hy
  27 .SH NAME
  28 .PP
  29 keytool \- a key and certificate management utility
  30 .SH SYNOPSIS
  31 .PP
  32 \f[CB]keytool\f[R] [\f[I]commands\f[R]]
  33 .TP
  34 .B \f[I]commands\f[R]
  35 Commands for \f[CB]keytool\f[R] include the following:
  36 .RS
  37 .IP \[bu] 2
  38 \f[CB]\-certreq\f[R]: Generates a certificate request
  39 .IP \[bu] 2
  40 \f[CB]\-changealias\f[R]: Changes an entry\[aq]s alias
  41 .IP \[bu] 2
  42 \f[CB]\-delete\f[R]: Deletes an entry
  43 .IP \[bu] 2
  44 \f[CB]\-exportcert\f[R]: Exports certificate
  45 .IP \[bu] 2
</pre>
<hr />
<pre>
  84 and authentication services, by using digital signatures.
  85 The \f[CB]keytool\f[R] command also enables users to cache the public keys
  86 (in the form of certificates) of their communicating peers.
  87 .PP
  88 A certificate is a digitally signed statement from one entity (person,
  89 company, and so on), which says that the public key (and some other
  90 information) of some other entity has a particular value.
  91 When data is digitally signed, the signature can be verified to check
  92 the data integrity and authenticity.
  93 Integrity means that the data hasn\[aq]t been modified or tampered with,
  94 and authenticity means that the data comes from the individual who
  95 claims to have created and signed it.
  96 .PP
  97 The \f[CB]keytool\f[R] command also enables users to administer secret
  98 keys and passphrases used in symmetric encryption and decryption (Data
  99 Encryption Standard).
 100 It can also display other security\-related information.
 101 .PP
 102 The \f[CB]keytool\f[R] command stores the keys and certificates in a
 103 keystore.
<span class="line-added"> 104 .PP</span>
<span class="line-added"> 105 The \f[CB]keytool\f[R] command uses the</span>
<span class="line-added"> 106 \f[CB]jdk.certpath.disabledAlgorithms\f[R] and</span>
<span class="line-added"> 107 \f[CB]jdk.security.legacyAlgorithms\f[R] security properties to determine</span>
<span class="line-added"> 108 which algorithms are considered a security risk.</span>
<span class="line-added"> 109 It emits warnings when disabled or legacy algorithms are being used.</span>
<span class="line-added"> 110 The \f[CB]jdk.certpath.disabledAlgorithms\f[R] and</span>
<span class="line-added"> 111 \f[CB]jdk.security.legacyAlgorithms\f[R] security properties are defined</span>
<span class="line-added"> 112 in the \f[CB]java.security\f[R] file (located in the JDK\[aq]s</span>
<span class="line-added"> 113 \f[CB]$JAVA_HOME/conf/security\f[R] directory).</span>
 114 .SH COMMAND AND OPTION NOTES
 115 .PP
 116 The following notes apply to the descriptions in \f[B]Commands and
 117 Options\f[R]:
 118 .IP \[bu] 2
 119 All command and option names are preceded by a hyphen sign
 120 (\f[CB]\-\f[R]).
 121 .IP \[bu] 2
 122 Only one command can be provided.
 123 .IP \[bu] 2
 124 Options for each command can be provided in any order.
 125 .IP \[bu] 2
 126 There are two kinds of options, one is single\-valued which should be
 127 only provided once.
 128 If a single\-valued option is provided multiple times, the value of the
 129 last one is used.
 130 The other type is multi\-valued, which can be provided multiple times
 131 and all values are used.
 132 The only multi\-valued option currently supported is the \f[CB]\-ext\f[R]
 133 option used to generate X.509v3 certificate extensions.
</pre>
<hr />
<pre>
 253 .IP \[bu] 2
 254 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
 255 .IP \[bu] 2
 256 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
 257 .IP \[bu] 2
 258 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 259 \f[I]arg\f[R]]}: Adds a security provider by name (such as SunPKCS11)
 260 with an optional configure argument.
 261 The value of the security provider is the name of a security provider
 262 that is defined in a module.
 263 .RS 2
 264 .PP
 265 For example,
 266 .RS
 267 .PP
 268 \f[CB]keytool\ \-addprovider\ SunPKCS11\ \-providerarg\ some.cfg\ ...\f[R]
 269 .RE
 270 .PP
 271 \f[B]Note:\f[R]
 272 .PP
<span class="line-modified"> 273 For compatibility reasons, the SunPKCS11 provider can still be loaded</span>
<span class="line-modified"> 274 with \f[CB]\-providerclass\ sun.security.pkcs11.SunPKCS11\f[R] even if it</span>
<span class="line-modified"> 275 is now defined in a module.</span>
<span class="line-modified"> 276 This is the only module included in the JDK that needs a configuration,</span>


 277 and therefore the most widely used with the \f[CB]\-providerclass\f[R]
 278 option.
 279 For legacy security providers located on classpath and loaded by
 280 reflection, \f[CB]\-providerclass\f[R] should still be used.
 281 .RE
 282 .IP \[bu] 2
 283 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 284 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
 285 an optional configure argument.
 286 .RS 2
 287 .PP
 288 For example, if \f[CB]MyProvider\f[R] is a legacy provider loaded via
 289 reflection,
 290 .RS
 291 .PP
 292 \f[CB]keytool\ \-providerclass\ com.example.MyProvider\ ...\f[R]
 293 .RE
 294 .RE
 295 .IP \[bu] 2
 296 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
</pre>
<hr />
<pre>
2190 the keystore and the integrity of the keystore.
2191 Keystore implementations of different types aren\[aq]t compatible.
2192 .PP
2193 The \f[CB]keytool\f[R] command works on any file\-based keystore
2194 implementation.
2195 It treats the keystore location that is passed to it at the command line
2196 as a file name and converts it to a \f[CB]FileInputStream\f[R], from which
2197 it loads the keystore information.)The \f[CB]jarsigner\f[R] commands can
2198 read a keystore from any location that can be specified with a URL.
2199 .PP
2200 For \f[CB]keytool\f[R] and \f[CB]jarsigner\f[R], you can specify a keystore
2201 type at the command line, with the \f[CB]\-storetype\f[R] option.
2202 .PP
2203 If you don\[aq]t explicitly specify a keystore type, then the tools
2204 choose a keystore implementation based on the value of the
2205 \f[CB]keystore.type\f[R] property specified in the security properties
2206 file.
2207 The security properties file is called \f[CB]java.security\f[R], and
2208 resides in the security properties directory:
2209 .IP \[bu] 2
<span class="line-modified">2210 \f[B]Linux and OS X:\f[R] \f[CB]java.home/lib/security\f[R]</span>

2211 .IP \[bu] 2
2212 \f[B]Windows:\f[R] \f[CB]java.home\\lib\\security\f[R]
2213 .PP
2214 Each tool gets the \f[CB]keystore.type\f[R] value and then examines all
2215 the currently installed providers until it finds one that implements a
2216 keystores of that type.
2217 It then uses the keystore implementation from that provider.The
2218 \f[CB]KeyStore\f[R] class defines a static method named
2219 \f[CB]getDefaultType\f[R] that lets applications retrieve the value of the
2220 \f[CB]keystore.type\f[R] property.
2221 The following line of code creates an instance of the default keystore
2222 type as specified in the \f[CB]keystore.type\f[R] property:
2223 .RS
2224 .PP
2225 \f[CB]KeyStore\ keyStore\ =\ KeyStore.getInstance(KeyStore.getDefaultType());\f[R]
2226 .RE
2227 .PP
2228 The default keystore type is \f[CB]pkcs12\f[R], which is a cross\-platform
2229 keystore based on the RSA PKCS12 Personal Information Exchange Syntax
2230 Standard.
</pre>
<hr />
<pre>
2467 The top\-level (root) CA certificate is self\-signed.
2468 However, the trust into the root\[aq]s public key doesn\[aq]t come from
2469 the root certificate itself, but from other sources such as a newspaper.
2470 This is because anybody could generate a self\-signed certificate with
2471 the distinguished name of, for example, the DigiCert root CA.
2472 The root CA public key is widely known.
2473 The only reason it is stored in a certificate is because this is the
2474 format understood by most tools, so the certificate in this case is only
2475 used as a vehicle to transport the root CA\[aq]s public key.
2476 Before you add the root CA certificate to your keystore, you should view
2477 it with the \f[CB]\-printcert\f[R] option and compare the displayed
2478 fingerprint with the well\-known fingerprint obtained from a newspaper,
2479 the root CA\[aq]s Web page, and so on.
2480 .RE
2481 .TP
2482 .B cacerts Certificates File
2483 A certificates file named \f[CB]cacerts\f[R] resides in the security
2484 properties directory:
2485 .RS
2486 .IP \[bu] 2
<span class="line-modified">2487 \f[B]Linux and OS X:\f[R] \f[I]JAVA_HOME\f[R]\f[CB]/lib/security\f[R]</span>

2488 .IP \[bu] 2
2489 \f[B]Windows:\f[R] \f[I]JAVA_HOME\f[R]\f[CB]\\lib\\security\f[R]
2490 .PP




2491 The \f[CB]cacerts\f[R] file represents a system\-wide keystore with CA
2492 certificates.
2493 System administrators can configure and manage that file with the
2494 \f[CB]keytool\f[R] command by specifying \f[CB]jks\f[R] as the keystore
2495 type.
2496 The \f[CB]cacerts\f[R] keystore file ships with a default set of root CA
2497 certificates.
<span class="line-modified">2498 For Linux, OS X, and Windows, you can list the default certificates with</span>
<span class="line-modified">2499 the following command:</span>
2500 .RS
2501 .PP
2502 \f[CB]keytool\ \-list\ \-cacerts\f[R]
2503 .RE
2504 .PP
2505 The initial password of the \f[CB]cacerts\f[R] keystore file is
2506 \f[CB]changeit\f[R].
2507 System administrators should change that password and the default access
2508 permission of that file upon installing the SDK.
2509 .PP
2510 \f[B]Note:\f[R]
2511 .PP
2512 It is important to verify your \f[CB]cacerts\f[R] file.
2513 Because you trust the CAs in the \f[CB]cacerts\f[R] file as entities for
2514 signing and issuing certificates to other entities, you must manage the
2515 \f[CB]cacerts\f[R] file carefully.
2516 The \f[CB]cacerts\f[R] file should contain only certificates of the CAs
2517 you trust.
2518 It is your responsibility to verify the trusted root CA certificates
2519 bundled in the \f[CB]cacerts\f[R] file and make your own trust decisions.
2520 .PP
2521 To remove an untrusted CA certificate from the \f[CB]cacerts\f[R] file,
2522 use the \f[CB]\-delete\f[R] option of the \f[CB]keytool\f[R] command.
<span class="line-modified">2523 You can find the \f[CB]cacerts\f[R] file in the JDK\[aq]s</span>
<span class="line-modified">2524 \f[CB]$JAVA_HOME/lib/security\f[R] directory.</span>
2525 Contact your system administrator if you don\[aq]t have permission to
<span class="line-modified">2526 edit this file.</span>
2527 .RE
2528 .TP
2529 .B Internet RFC 1421 Certificate Encoding Standard
2530 Certificates are often stored using the printable encoding format
2531 defined by the Internet RFC 1421 standard, instead of their binary
2532 encoding.
2533 This certificate format, also known as Base64 encoding, makes it easy to
2534 export certificates to other applications by email or through some other
2535 mechanism.
2536 .RS
2537 .PP
2538 Certificates read by the \f[CB]\-importcert\f[R] and \f[CB]\-printcert\f[R]
2539 commands can be in either this format or binary encoded.
2540 The \f[CB]\-exportcert\f[R] command by default outputs a certificate in
2541 binary encoding, but will instead output a certificate in the printable
2542 encoding format, when the \f[CB]\-rfc\f[R] option is specified.
2543 .PP
2544 The \f[CB]\-list\f[R] command by default prints the SHA\-256 fingerprint
2545 of a certificate.
2546 If the \f[CB]\-v\f[R] option is specified, then the certificate is printed
</pre>
<hr />
<pre>
2657 put it in a file named \f[CB]\\tmp\\cert\f[R].
2658 Before you consider adding the certificate to your list of trusted
2659 certificates, you can execute a \f[CB]\-printcert\f[R] command to view its
2660 fingerprints, as follows:
2661 .IP
2662 .nf
2663 \f[CB]
2664 \ \ keytool\ \-printcert\ \-file\ \\tmp\\cert
2665 \ \ \ \ Owner:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2666 \ \ \ \ Issuer:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2667 \ \ \ \ Serial\ Number:\ 59092b34
2668 \ \ \ \ Valid\ from:\ Thu\ Jun\ 24\ 18:01:13\ PDT\ 2016\ until:\ Wed\ Jun\ 23\ 17:01:13\ PST\ 2016
2669 \ \ \ \ Certificate\ Fingerprints:
2670 
2671 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-1:\ 20:B6:17:FA:EF:E5:55:8A:D0:71:1F:E8:D6:9D:C0:37:13:0E:5E:FE
2672 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-256:\ 90:7B:70:0A:EA:DC:16:79:92:99:41:FF:8A:FE:EB:90:
2673 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 17:75:E0:90:B2:24:4D:3A:2A:16:A6:E4:11:0F:67:A4
2674 \f[R]
2675 .fi
2676 .PP
<span class="line-modified">2677 \f[B]Linux Example:\f[R]</span>
2678 .PP
2679 View the certificate first with the \f[CB]\-printcert\f[R] command or the
2680 \f[CB]\-importcert\f[R] command without the \f[CB]\-noprompt\f[R] option.
2681 Ensure that the displayed certificate fingerprints match the expected
2682 ones.
2683 For example, suppose someone sends or emails you a certificate that you
2684 put it in a file named \f[CB]/tmp/cert\f[R].
2685 Before you consider adding the certificate to your list of trusted
2686 certificates, you can execute a \f[CB]\-printcert\f[R] command to view its
2687 fingerprints, as follows:
2688 .IP
2689 .nf
2690 \f[CB]
2691 \ \ keytool\ \-printcert\ \-file\ /tmp/cert
2692 \ \ \ \ Owner:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2693 \ \ \ \ Issuer:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2694 \ \ \ \ Serial\ Number:\ 59092b34
2695 \ \ \ \ Valid\ from:\ Thu\ Jun\ 24\ 18:01:13\ PDT\ 2016\ until:\ Wed\ Jun\ 23\ 17:01:13\ PST\ 2016
2696 \ \ \ \ Certificate\ Fingerprints:
2697 
</pre>
<hr />
<pre>
2728 Some commands require a private/secret key password.
2729 Passwords can be specified on the command line in the
2730 \f[CB]\-storepass\f[R] and \f[CB]\-keypass\f[R] options.
2731 However, a password shouldn\[aq]t be specified on a command line or in a
2732 script unless it is for testing, or you are on a secure system.
2733 When you don\[aq]t specify a required password option on a command line,
2734 you are prompted for it.
2735 .SH CERTIFICATE CONFORMANCE WARNING
2736 .PP
2737 \f[B]Internet X.509 Public Key Infrastructure Certificate and
2738 Certificate Revocation List (CRL) Profile\f[R]
2739 [https://tools.ietf.org/rfc/rfc5280.txt] defined a profile on conforming
2740 X.509 certificates, which includes what values and value combinations
2741 are valid for certificate fields and extensions.
2742 .PP
2743 The \f[CB]keytool\f[R] command doesn\[aq]t enforce all of these rules so
2744 it can generate certificates that don\[aq]t conform to the standard,
2745 such as self\-signed certificates that would be used for internal
2746 testing purposes.
2747 Certificates that don\[aq]t conform to the standard might be rejected by
<span class="line-modified">2748 the JDK or other applications.</span>
2749 Users should ensure that they provide the correct options for
2750 \f[CB]\-dname\f[R], \f[CB]\-ext\f[R], and so on.
2751 .SH IMPORT A NEW TRUSTED CERTIFICATE
2752 .PP
2753 Before you add the certificate to the keystore, the \f[CB]keytool\f[R]
2754 command verifies it by attempting to construct a chain of trust from
2755 that certificate to a self\-signed certificate (belonging to a root CA),
2756 using trusted certificates that are already available in the keystore.
2757 .PP
2758 If the \f[CB]\-trustcacerts\f[R] option was specified, then additional
2759 certificates are considered for the chain of trust, namely the
2760 certificates in a file named \f[CB]cacerts\f[R].
2761 .PP
2762 If the \f[CB]keytool\f[R] command fails to establish a trust path from the
2763 certificate to be imported up to a self\-signed certificate (either from
2764 the keystore or the \f[CB]cacerts\f[R] file), then the certificate
2765 information is printed, and the user is prompted to verify it by
2766 comparing the displayed certificate fingerprints with the fingerprints
2767 obtained from some other (trusted) source of information, which might be
2768 the certificate owner.
</pre>
</td>
</tr>
</table>
<center><a href="jfr.1.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../native/libfdlibm/k_standard.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>