<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.base/share/man/keytool.1</title>
    <link rel="stylesheet" href="../../../../style.css" />
    <script type="text/javascript" src="../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 .\&quot;t
<a name="1" id="anc1"></a><span class="line-modified">   2 .\&quot; Copyright (c) 1998, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3 .\&quot; DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4 .\&quot;
   5 .\&quot; This code is free software; you can redistribute it and/or modify it
   6 .\&quot; under the terms of the GNU General Public License version 2 only, as
   7 .\&quot; published by the Free Software Foundation.
   8 .\&quot;
   9 .\&quot; This code is distributed in the hope that it will be useful, but WITHOUT
  10 .\&quot; ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11 .\&quot; FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
  12 .\&quot; version 2 for more details (a copy is included in the LICENSE file that
  13 .\&quot; accompanied this code).
  14 .\&quot;
  15 .\&quot; You should have received a copy of the GNU General Public License version
  16 .\&quot; 2 along with this work; if not, write to the Free Software Foundation,
  17 .\&quot; Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18 .\&quot;
  19 .\&quot; Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20 .\&quot; or visit www.oracle.com if you need additional information or have any
  21 .\&quot; questions.
  22 .\&quot;
  23 .\&quot; Automatically generated by Pandoc 2.3.1
  24 .\&quot;
<a name="2" id="anc2"></a><span class="line-modified">  25 .TH &quot;KEYTOOL&quot; &quot;1&quot; &quot;2020&quot; &quot;JDK 15&quot; &quot;JDK Commands&quot;</span>
  26 .hy
  27 .SH NAME
  28 .PP
  29 keytool \- a key and certificate management utility
  30 .SH SYNOPSIS
  31 .PP
  32 \f[CB]keytool\f[R] [\f[I]commands\f[R]]
  33 .TP
  34 .B \f[I]commands\f[R]
  35 Commands for \f[CB]keytool\f[R] include the following:
  36 .RS
  37 .IP \[bu] 2
  38 \f[CB]\-certreq\f[R]: Generates a certificate request
  39 .IP \[bu] 2
  40 \f[CB]\-changealias\f[R]: Changes an entry\[aq]s alias
  41 .IP \[bu] 2
  42 \f[CB]\-delete\f[R]: Deletes an entry
  43 .IP \[bu] 2
  44 \f[CB]\-exportcert\f[R]: Exports certificate
  45 .IP \[bu] 2
  46 \f[CB]\-genkeypair\f[R]: Generates a key pair
  47 .IP \[bu] 2
  48 \f[CB]\-genseckey\f[R]: Generates a secret key
  49 .IP \[bu] 2
  50 \f[CB]\-gencert\f[R]: Generates a certificate from a certificate request
  51 .IP \[bu] 2
  52 \f[CB]\-importcert\f[R]: Imports a certificate or a certificate chain
  53 .IP \[bu] 2
  54 \f[CB]\-importpass\f[R]: Imports a password
  55 .IP \[bu] 2
  56 \f[CB]\-importkeystore\f[R]: Imports one or all entries from another
  57 keystore
  58 .IP \[bu] 2
  59 \f[CB]\-keypasswd\f[R]: Changes the key password of an entry
  60 .IP \[bu] 2
  61 \f[CB]\-list\f[R]: Lists entries in a keystore
  62 .IP \[bu] 2
  63 \f[CB]\-printcert\f[R]: Prints the content of a certificate
  64 .IP \[bu] 2
  65 \f[CB]\-printcertreq\f[R]: Prints the content of a certificate request
  66 .IP \[bu] 2
  67 \f[CB]\-printcrl\f[R]: Prints the content of a Certificate Revocation List
  68 (CRL) file
  69 .IP \[bu] 2
  70 \f[CB]\-storepasswd\f[R]: Changes the store password of a keystore
  71 .IP \[bu] 2
  72 \f[CB]\-showinfo\f[R]: Displays security\-related information
  73 .PP
  74 See \f[B]Commands and Options\f[R] for a description of these commands
  75 with their options.
  76 .RE
  77 .SH DESCRIPTION
  78 .PP
  79 The \f[CB]keytool\f[R] command is a key and certificate management
  80 utility.
  81 It enables users to administer their own public/private key pairs and
  82 associated certificates for use in self\-authentication (where a user
  83 authenticates themselves to other users and services) or data integrity
  84 and authentication services, by using digital signatures.
  85 The \f[CB]keytool\f[R] command also enables users to cache the public keys
  86 (in the form of certificates) of their communicating peers.
  87 .PP
  88 A certificate is a digitally signed statement from one entity (person,
  89 company, and so on), which says that the public key (and some other
  90 information) of some other entity has a particular value.
  91 When data is digitally signed, the signature can be verified to check
  92 the data integrity and authenticity.
  93 Integrity means that the data hasn\[aq]t been modified or tampered with,
  94 and authenticity means that the data comes from the individual who
  95 claims to have created and signed it.
  96 .PP
  97 The \f[CB]keytool\f[R] command also enables users to administer secret
  98 keys and passphrases used in symmetric encryption and decryption (Data
  99 Encryption Standard).
 100 It can also display other security\-related information.
 101 .PP
 102 The \f[CB]keytool\f[R] command stores the keys and certificates in a
 103 keystore.
<a name="3" id="anc3"></a><span class="line-added"> 104 .PP</span>
<span class="line-added"> 105 The \f[CB]keytool\f[R] command uses the</span>
<span class="line-added"> 106 \f[CB]jdk.certpath.disabledAlgorithms\f[R] and</span>
<span class="line-added"> 107 \f[CB]jdk.security.legacyAlgorithms\f[R] security properties to determine</span>
<span class="line-added"> 108 which algorithms are considered a security risk.</span>
<span class="line-added"> 109 It emits warnings when disabled or legacy algorithms are being used.</span>
<span class="line-added"> 110 The \f[CB]jdk.certpath.disabledAlgorithms\f[R] and</span>
<span class="line-added"> 111 \f[CB]jdk.security.legacyAlgorithms\f[R] security properties are defined</span>
<span class="line-added"> 112 in the \f[CB]java.security\f[R] file (located in the JDK\[aq]s</span>
<span class="line-added"> 113 \f[CB]$JAVA_HOME/conf/security\f[R] directory).</span>
 114 .SH COMMAND AND OPTION NOTES
 115 .PP
 116 The following notes apply to the descriptions in \f[B]Commands and
 117 Options\f[R]:
 118 .IP \[bu] 2
 119 All command and option names are preceded by a hyphen sign
 120 (\f[CB]\-\f[R]).
 121 .IP \[bu] 2
 122 Only one command can be provided.
 123 .IP \[bu] 2
 124 Options for each command can be provided in any order.
 125 .IP \[bu] 2
 126 There are two kinds of options, one is single\-valued which should be
 127 only provided once.
 128 If a single\-valued option is provided multiple times, the value of the
 129 last one is used.
 130 The other type is multi\-valued, which can be provided multiple times
 131 and all values are used.
 132 The only multi\-valued option currently supported is the \f[CB]\-ext\f[R]
 133 option used to generate X.509v3 certificate extensions.
 134 .IP \[bu] 2
 135 All items not italicized or in braces ({ }) or brackets ([ ]) are
 136 required to appear as is.
 137 .IP \[bu] 2
 138 Braces surrounding an option signify that a default value is used when
 139 the option isn\[aq]t specified on the command line.
 140 Braces are also used around the \f[CB]\-v\f[R], \f[CB]\-rfc\f[R], and
 141 \f[CB]\-J\f[R] options, which have meaning only when they appear on the
 142 command line.
 143 They don\[aq]t have any default values.
 144 .IP \[bu] 2
 145 Brackets surrounding an option signify that the user is prompted for the
 146 values when the option isn\[aq]t specified on the command line.
 147 For the \f[CB]\-keypass\f[R] option, if you don\[aq]t specify the option
 148 on the command line, then the \f[CB]keytool\f[R] command first attempts to
 149 use the keystore password to recover the private/secret key.
 150 If this attempt fails, then the \f[CB]keytool\f[R] command prompts you for
 151 the private/secret key password.
 152 .IP \[bu] 2
 153 Items in italics (option values) represent the actual values that must
 154 be supplied.
 155 For example, here is the format of the \f[CB]\-printcert\f[R] command:
 156 .RS 2
 157 .RS
 158 .PP
 159 \f[CB]keytool\ \-printcert\f[R] {\f[CB]\-file\f[R] \f[I]cert_file\f[R]}
 160 {\f[CB]\-v\f[R]}
 161 .RE
 162 .PP
 163 When you specify a \f[CB]\-printcert\f[R] command, replace
 164 \f[I]cert_file\f[R] with the actual file name, as follows:
 165 \f[CB]keytool\ \-printcert\ \-file\ VScert.cer\f[R]
 166 .RE
 167 .IP \[bu] 2
 168 Option values must be enclosed in quotation marks when they contain a
 169 blank (space).
 170 .SH COMMANDS AND OPTIONS
 171 .PP
 172 The keytool commands and their options can be grouped by the tasks that
 173 they perform.
 174 .PP
 175 \f[B]Commands for Creating or Adding Data to the Keystore\f[R]:
 176 .IP \[bu] 2
 177 \f[CB]\-gencert\f[R]
 178 .IP \[bu] 2
 179 \f[CB]\-genkeypair\f[R]
 180 .IP \[bu] 2
 181 \f[CB]\-genseckey\f[R]
 182 .IP \[bu] 2
 183 \f[CB]\-importcert\f[R]
 184 .IP \[bu] 2
 185 \f[CB]\-importpass\f[R]
 186 .PP
 187 \f[B]Commands for Importing Contents from Another Keystore\f[R]:
 188 .IP \[bu] 2
 189 \f[CB]\-importkeystore\f[R]
 190 .PP
 191 \f[B]Commands for Generating a Certificate Request\f[R]:
 192 .IP \[bu] 2
 193 \f[CB]\-certreq\f[R]
 194 .PP
 195 \f[B]Commands for Exporting Data\f[R]:
 196 .IP \[bu] 2
 197 \f[CB]\-exportcert\f[R]
 198 .PP
 199 \f[B]Commands for Displaying Data\f[R]:
 200 .IP \[bu] 2
 201 \f[CB]\-list\f[R]
 202 .IP \[bu] 2
 203 \f[CB]\-printcert\f[R]
 204 .IP \[bu] 2
 205 \f[CB]\-printcertreq\f[R]
 206 .IP \[bu] 2
 207 \f[CB]\-printcrl\f[R]
 208 .PP
 209 \f[B]Commands for Managing the Keystore\f[R]:
 210 .IP \[bu] 2
 211 \f[CB]\-storepasswd\f[R]
 212 .IP \[bu] 2
 213 \f[CB]\-keypasswd\f[R]
 214 .IP \[bu] 2
 215 \f[CB]\-delete\f[R]
 216 .IP \[bu] 2
 217 \f[CB]\-changealias\f[R]
 218 .PP
 219 \f[B]Commands for Displaying Security\-related Information\f[R]:
 220 .IP \[bu] 2
 221 \f[CB]\-showinfo\f[R]
 222 .SH COMMANDS FOR CREATING OR ADDING DATA TO THE KEYSTORE
 223 .TP
 224 .B \f[CB]\-gencert\f[R]
 225 The following are the available options for the \f[CB]\-gencert\f[R]
 226 command:
 227 .RS
 228 .IP \[bu] 2
 229 {\f[CB]\-rfc\f[R]}: Output in RFC (Request For Comment) style
 230 .IP \[bu] 2
 231 {\f[CB]\-infile\f[R] \f[I]infile\f[R]}: Input file name
 232 .IP \[bu] 2
 233 {\f[CB]\-outfile\f[R] \f[I]outfile\f[R]}: Output file name
 234 .IP \[bu] 2
 235 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process
 236 .IP \[bu] 2
 237 {\f[CB]\-sigalg\f[R] \f[I]sigalg\f[R]}: Signature algorithm name
 238 .IP \[bu] 2
 239 {\f[CB]\-dname\f[R] \f[I]dname\f[R]}: Distinguished name
 240 .IP \[bu] 2
 241 {\f[CB]\-startdate\f[R] \f[I]startdate\f[R]}: Certificate validity start
 242 date and time
 243 .IP \[bu] 2
 244 {\f[CB]\-ext\f[R] \f[I]ext\f[R]}*: X.509 extension
 245 .IP \[bu] 2
 246 {\f[CB]\-validity\f[R] \f[I]days\f[R]}: Validity number of days
 247 .IP \[bu] 2
 248 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password
 249 .IP \[bu] 2
 250 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
 251 .IP \[bu] 2
 252 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
 253 .IP \[bu] 2
 254 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
 255 .IP \[bu] 2
 256 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
 257 .IP \[bu] 2
 258 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 259 \f[I]arg\f[R]]}: Adds a security provider by name (such as SunPKCS11)
 260 with an optional configure argument.
 261 The value of the security provider is the name of a security provider
 262 that is defined in a module.
 263 .RS 2
 264 .PP
 265 For example,
 266 .RS
 267 .PP
 268 \f[CB]keytool\ \-addprovider\ SunPKCS11\ \-providerarg\ some.cfg\ ...\f[R]
 269 .RE
 270 .PP
 271 \f[B]Note:\f[R]
 272 .PP
<a name="4" id="anc4"></a><span class="line-modified"> 273 For compatibility reasons, the SunPKCS11 provider can still be loaded</span>
<span class="line-modified"> 274 with \f[CB]\-providerclass\ sun.security.pkcs11.SunPKCS11\f[R] even if it</span>
<span class="line-modified"> 275 is now defined in a module.</span>
<span class="line-modified"> 276 This is the only module included in the JDK that needs a configuration,</span>


 277 and therefore the most widely used with the \f[CB]\-providerclass\f[R]
 278 option.
 279 For legacy security providers located on classpath and loaded by
 280 reflection, \f[CB]\-providerclass\f[R] should still be used.
 281 .RE
 282 .IP \[bu] 2
 283 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 284 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
 285 an optional configure argument.
 286 .RS 2
 287 .PP
 288 For example, if \f[CB]MyProvider\f[R] is a legacy provider loaded via
 289 reflection,
 290 .RS
 291 .PP
 292 \f[CB]keytool\ \-providerclass\ com.example.MyProvider\ ...\f[R]
 293 .RE
 294 .RE
 295 .IP \[bu] 2
 296 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
 297 .IP \[bu] 2
 298 {\f[CB]\-v\f[R]}: Verbose output
 299 .IP \[bu] 2
 300 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism
 301 .PP
 302 Use the \f[CB]\-gencert\f[R] command to generate a certificate as a
 303 response to a certificate request file (which can be created by the
 304 \f[CB]keytool\ \-certreq\f[R] command).
 305 The command reads the request either from \f[I]infile\f[R] or, if
 306 omitted, from the standard input, signs it by using the alias\[aq]s
 307 private key, and outputs the X.509 certificate into either
 308 \f[I]outfile\f[R] or, if omitted, to the standard output.
 309 When \f[CB]\-rfc\f[R] is specified, the output format is Base64\-encoded
 310 PEM; otherwise, a binary DER is created.
 311 .PP
 312 The \f[CB]\-sigalg\f[R] value specifies the algorithm that should be used
 313 to sign the certificate.
 314 The \f[I]startdate\f[R] argument is the start time and date that the
 315 certificate is valid.
 316 The \f[I]days\f[R] argument tells the number of days for which the
 317 certificate should be considered valid.
 318 .PP
 319 When \f[I]dname\f[R] is provided, it is used as the subject of the
 320 generated certificate.
 321 Otherwise, the one from the certificate request is used.
 322 .PP
 323 The \f[CB]\-ext\f[R] value shows what X.509 extensions will be embedded in
 324 the certificate.
 325 Read \f[B]Common Command Options\f[R] for the grammar of \f[CB]\-ext\f[R].
 326 .PP
 327 The \f[CB]\-gencert\f[R] option enables you to create certificate chains.
 328 The following example creates a certificate, \f[CB]e1\f[R], that contains
 329 three certificates in its certificate chain.
 330 .PP
 331 The following commands creates four key pairs named \f[CB]ca\f[R],
 332 \f[CB]ca1\f[R], \f[CB]ca2\f[R], and \f[CB]e1\f[R]:
 333 .IP
 334 .nf
 335 \f[CB]
 336 keytool\ \-alias\ ca\ \-dname\ CN=CA\ \-genkeypair\ \-keyalg\ rsa
 337 keytool\ \-alias\ ca1\ \-dname\ CN=CA\ \-genkeypair\ \-keyalg\ rsa
 338 keytool\ \-alias\ ca2\ \-dname\ CN=CA\ \-genkeypair\ \-keyalg\ rsa
 339 keytool\ \-alias\ e1\ \-dname\ CN=E1\ \-genkeypair\ \-keyalg\ rsa
 340 \f[R]
 341 .fi
 342 .PP
 343 The following two commands create a chain of signed certificates;
 344 \f[CB]ca\f[R] signs \f[CB]ca1\f[R] and \f[CB]ca1\f[R] signs \f[CB]ca2\f[R], all
 345 of which are self\-issued:
 346 .IP
 347 .nf
 348 \f[CB]
 349 keytool\ \-alias\ ca1\ \-certreq\ |
 350 \ \ \ \ keytool\ \-alias\ ca\ \-gencert\ \-ext\ san=dns:ca1\ |
 351 \ \ \ \ keytool\ \-alias\ ca1\ \-importcert
 352 
 353 keytool\ \-alias\ ca2\ \-certreq\ |
 354 \ \ \ \ keytool\ \-alias\ ca1\ \-gencert\ \-ext\ san=dns:ca2\ |
 355 \ \ \ \ keytool\ \-alias\ ca2\ \-importcert
 356 \f[R]
 357 .fi
 358 .PP
 359 The following command creates the certificate \f[CB]e1\f[R] and stores it
 360 in the \f[CB]e1.cert\f[R] file, which is signed by \f[CB]ca2\f[R].
 361 As a result, \f[CB]e1\f[R] should contain \f[CB]ca\f[R], \f[CB]ca1\f[R], and
 362 \f[CB]ca2\f[R] in its certificate chain:
 363 .RS
 364 .PP
 365 \f[CB]keytool\ \-alias\ e1\ \-certreq\ |\ keytool\ \-alias\ ca2\ \-gencert\ &gt;\ e1.cert\f[R]
 366 .RE
 367 .RE
 368 .TP
 369 .B \f[CB]\-genkeypair\f[R]
 370 The following are the available options for the \f[CB]\-genkeypair\f[R]
 371 command:
 372 .RS
 373 .IP \[bu] 2
 374 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process
 375 .IP \[bu] 2
 376 \f[CB]\-keyalg\f[R] \f[I]alg\f[R]: Key algorithm name
 377 .IP \[bu] 2
 378 {\f[CB]\-keysize\f[R] \f[I]size\f[R]}: Key bit size
 379 .IP \[bu] 2
 380 {\f[CB]\-groupname\f[R] \f[I]name\f[R]}: Group name.
 381 For example, an Elliptic Curve name.
 382 .IP \[bu] 2
 383 {\f[CB]\-sigalg\f[R] \f[I]alg\f[R]}: Signature algorithm name
 384 .IP \[bu] 2
 385 [\f[CB]\-dname\f[R] \f[I]name\f[R]]: Distinguished name
 386 .IP \[bu] 2
 387 {\f[CB]\-startdate\f[R] \f[I]date\f[R]}: Certificate validity start date
 388 and time
 389 .IP \[bu] 2
 390 {\f[CB]\-ext\f[R] \f[I]value\f[R]}*: X.509 extension
 391 .IP \[bu] 2
 392 {\f[CB]\-validity\f[R] \f[I]days\f[R]}: Validity number of days
 393 .IP \[bu] 2
 394 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password
 395 .IP \[bu] 2
 396 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
 397 .IP \[bu] 2
 398 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
 399 .IP \[bu] 2
 400 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
 401 .IP \[bu] 2
 402 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
 403 .IP \[bu] 2
 404 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 405 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
 406 an optional configure argument.
 407 .IP \[bu] 2
 408 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 409 \f[I]arg\f[R]] }: Add security provider by fully qualified class name
 410 with an optional configure argument.
 411 .IP \[bu] 2
 412 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
 413 .IP \[bu] 2
 414 {\f[CB]\-v\f[R]}: Verbose output
 415 .IP \[bu] 2
 416 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism
 417 .PP
 418 Use the \f[CB]\-genkeypair\f[R] command to generate a key pair (a public
 419 key and associated private key).
 420 Wraps the public key in an X.509 v3 self\-signed certificate, which is
 421 stored as a single\-element certificate chain.
 422 This certificate chain and the private key are stored in a new keystore
 423 entry that is identified by its alias.
 424 .PP
 425 The \f[CB]\-keyalg\f[R] value specifies the algorithm to be used to
 426 generate the key pair, and the \f[CB]\-keysize\f[R] value specifies the
 427 size of each key to be generated.
 428 The \f[CB]\-sigalg\f[R] value specifies the algorithm that should be used
 429 to sign the self\-signed certificate.
 430 This algorithm must be compatible with the \f[CB]\-keyalg\f[R] value.
 431 .PP
 432 The \f[CB]\-groupname\f[R] value specifies the named group (for example,
 433 the standard or predefined name of an Elliptic Curve) of the key to be
 434 generated.
 435 Only one of \f[CB]\-groupname\f[R] and \f[CB]\-keysize\f[R] can be
 436 specified.
 437 .PP
 438 The \f[CB]\-dname\f[R] value specifies the X.500 Distinguished Name to be
 439 associated with the value of \f[CB]\-alias\f[R], and is used as the issuer
 440 and subject fields in the self\-signed certificate.
 441 If a distinguished name is not provided at the command line, then the
 442 user is prompted for one.
 443 .PP
 444 The value of \f[CB]\-keypass\f[R] is a password used to protect the
 445 private key of the generated key pair.
 446 If a password is not provided, then the user is prompted for it.
 447 If you press the \f[B]Return\f[R] key at the prompt, then the key
 448 password is set to the same password as the keystore password.
 449 The \f[CB]\-keypass\f[R] value must have at least six characters.
 450 .PP
 451 The value of \f[CB]\-startdate\f[R] specifies the issue time of the
 452 certificate, also known as the &quot;Not Before&quot; value of the X.509
 453 certificate\[aq]s Validity field.
 454 .PP
 455 The option value can be set in one of these two forms:
 456 .PP
 457 ([\f[CB]+\-\f[R]]\f[I]nnn\f[R][\f[CB]ymdHMS\f[R]])+
 458 .PP
 459 [\f[I]yyyy\f[R]\f[CB]/\f[R]\f[I]mm\f[R]\f[CB]/\f[R]\f[I]dd\f[R]]
 460 [\f[I]HH\f[R]\f[CB]:\f[R]\f[I]MM\f[R]\f[CB]:\f[R]\f[I]SS\f[R]]
 461 .PP
 462 With the first form, the issue time is shifted by the specified value
 463 from the current time.
 464 The value is a concatenation of a sequence of subvalues.
 465 Inside each subvalue, the plus sign (+) means shift forward, and the
 466 minus sign (\-) means shift backward.
 467 The time to be shifted is \f[I]nnn\f[R] units of years, months, days,
 468 hours, minutes, or seconds (denoted by a single character of \f[CB]y\f[R],
 469 \f[CB]m\f[R], \f[CB]d\f[R], \f[CB]H\f[R], \f[CB]M\f[R], or \f[CB]S\f[R]
 470 respectively).
 471 The exact value of the issue time is calculated by using the
 472 \f[CB]java.util.GregorianCalendar.add(int\ field,\ int\ amount)\f[R]
 473 method on each subvalue, from left to right.
 474 For example, the issue time can be specified by:
 475 .IP
 476 .nf
 477 \f[CB]
 478 Calendar\ c\ =\ new\ GregorianCalendar();
 479 c.add(Calendar.YEAR,\ \-1);
 480 c.add(Calendar.MONTH,\ 1);
 481 c.add(Calendar.DATE,\ \-1);
 482 return\ c.getTime()
 483 \f[R]
 484 .fi
 485 .PP
 486 With the second form, the user sets the exact issue time in two parts,
 487 year/month/day and hour:minute:second (using the local time zone).
 488 The user can provide only one part, which means the other part is the
 489 same as the current date (or time).
 490 The user must provide the exact number of digits shown in the format
 491 definition (padding with 0 when shorter).
 492 When both date and time are provided, there is one (and only one) space
 493 character between the two parts.
 494 The hour should always be provided in 24\-hour format.
 495 .PP
 496 When the option isn\[aq]t provided, the start date is the current time.
 497 The option can only be provided one time.
 498 .PP
 499 The value of \f[I]date\f[R] specifies the number of days (starting at the
 500 date specified by \f[CB]\-startdate\f[R], or the current date when
 501 \f[CB]\-startdate\f[R] isn\[aq]t specified) for which the certificate
 502 should be considered valid.
 503 .RE
 504 .TP
 505 .B \f[CB]\-genseckey\f[R]
 506 The following are the available options for the \f[CB]\-genseckey\f[R]
 507 command:
 508 .RS
 509 .IP \[bu] 2
 510 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process
 511 .IP \[bu] 2
 512 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password
 513 .IP \[bu] 2
 514 \f[CB]\-keyalg\f[R] \f[I]alg\f[R]: Key algorithm name
 515 .IP \[bu] 2
 516 {\f[CB]\-keysize\f[R] \f[I]size\f[R]}: Key bit size
 517 .IP \[bu] 2
 518 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
 519 .IP \[bu] 2
 520 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
 521 .IP \[bu] 2
 522 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
 523 .IP \[bu] 2
 524 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
 525 .IP \[bu] 2
 526 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 527 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
 528 an optional configure argument.
 529 .IP \[bu] 2
 530 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 531 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
 532 an optional configure argument.
 533 .IP \[bu] 2
 534 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
 535 .IP \[bu] 2
 536 {\f[CB]\-v\f[R]}: Verbose output
 537 .IP \[bu] 2
 538 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism
 539 .PP
 540 Use the \f[CB]\-genseckey\f[R] command to generate a secret key and store
 541 it in a new \f[CB]KeyStore.SecretKeyEntry\f[R] identified by
 542 \f[CB]alias\f[R].
 543 .PP
 544 The value of \f[CB]\-keyalg\f[R] specifies the algorithm to be used to
 545 generate the secret key, and the value of \f[CB]\-keysize\f[R] specifies
 546 the size of the key that is generated.
 547 The \f[CB]\-keypass\f[R] value is a password that protects the secret key.
 548 If a password is not provided, then the user is prompted for it.
 549 If you press the \f[B]Return\f[R] key at the prompt, then the key
 550 password is set to the same password that is used for the
 551 \f[CB]\-keystore\f[R].
 552 The \f[CB]\-keypass\f[R] value must contain at least six characters.
 553 .RE
 554 .TP
 555 .B \f[CB]\-importcert\f[R]
 556 The following are the available options for the \f[CB]\-importcert\f[R]
 557 command:
 558 .RS
 559 .IP \[bu] 2
 560 {\f[CB]\-noprompt\f[R]}: Do not prompt
 561 .IP \[bu] 2
 562 {\f[CB]\-trustcacerts\f[R]}: Trust certificates from cacerts
 563 .IP \[bu] 2
 564 {\f[CB]\-protected\f[R]}: Password is provided through protected mechanism
 565 .IP \[bu] 2
 566 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process
 567 .IP \[bu] 2
 568 {\f[CB]\-file\f[R] \f[I]file\f[R]}: Input file name
 569 .IP \[bu] 2
 570 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password
 571 .IP \[bu] 2
 572 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
 573 .IP \[bu] 2
 574 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore
 575 .IP \[bu] 2
 576 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
 577 .IP \[bu] 2
 578 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
 579 .IP \[bu] 2
 580 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
 581 .IP \[bu] 2
 582 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 583 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
 584 an optional configure argument.
 585 .IP \[bu] 2
 586 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 587 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
 588 an optional configure argument.
 589 .IP \[bu] 2
 590 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
 591 .IP \[bu] 2
 592 {\f[CB]\-v\f[R]}: Verbose output
 593 .PP
 594 Use the \f[CB]\-importcert\f[R] command to read the certificate or
 595 certificate chain (where the latter is supplied in a PKCS#7 formatted
 596 reply or in a sequence of X.509 certificates) from \f[CB]\-file\f[R]
 597 \f[I]file\f[R], and store it in the \f[CB]keystore\f[R] entry identified by
 598 \f[CB]\-alias\f[R].
 599 If \f[CB]\-file\f[R] \f[I]file\f[R] is not specified, then the certificate
 600 or certificate chain is read from \f[CB]stdin\f[R].
 601 .PP
 602 The \f[CB]keytool\f[R] command can import X.509 v1, v2, and v3
 603 certificates, and PKCS#7 formatted certificate chains consisting of
 604 certificates of that type.
 605 The data to be imported must be provided either in binary encoding
 606 format or in printable encoding format (also known as Base64 encoding)
 607 as defined by the Internet RFC 1421 standard.
 608 In the latter case, the encoding must be bounded at the beginning by a
 609 string that starts with \f[CB]\-\-\-\-\-BEGIN\f[R], and bounded at the end
 610 by a string that starts with \f[CB]\-\-\-\-\-END\f[R].
 611 .PP
 612 You import a certificate for two reasons: To add it to the list of
 613 trusted certificates, and to import a certificate reply received from a
 614 certificate authority (CA) as the result of submitting a Certificate
 615 Signing Request (CSR) to that CA.
 616 See the \f[CB]\-certreq\f[R] command in \f[B]Commands for Generating a
 617 Certificate Request\f[R].
 618 .PP
 619 The type of import is indicated by the value of the \f[CB]\-alias\f[R]
 620 option.
 621 If the alias doesn\[aq]t point to a key entry, then the \f[CB]keytool\f[R]
 622 command assumes you are adding a trusted certificate entry.
 623 In this case, the alias shouldn\[aq]t already exist in the keystore.
 624 If the alias does exist, then the \f[CB]keytool\f[R] command outputs an
 625 error because a trusted certificate already exists for that alias, and
 626 doesn\[aq]t import the certificate.
 627 If \f[CB]\-alias\f[R] points to a key entry, then the \f[CB]keytool\f[R]
 628 command assumes that you\[aq]re importing a certificate reply.
 629 .RE
 630 .TP
 631 .B \f[CB]\-importpass\f[R]
 632 The following are the available options for the \f[CB]\-importpass\f[R]
 633 command:
 634 .RS
 635 .IP \[bu] 2
 636 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process
 637 .IP \[bu] 2
 638 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password
 639 .IP \[bu] 2
 640 {\f[CB]\-keyalg\f[R] \f[I]alg\f[R]}: Key algorithm name
 641 .IP \[bu] 2
 642 {\f[CB]\-keysize\f[R] \f[I]size\f[R]}: Key bit size
 643 .IP \[bu] 2
 644 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
 645 .IP \[bu] 2
 646 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
 647 .IP \[bu] 2
 648 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
 649 .IP \[bu] 2
 650 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
 651 .IP \[bu] 2
 652 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 653 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
 654 an optional configure argument.
 655 .IP \[bu] 2
 656 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 657 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
 658 an optional configure argument.
 659 .IP \[bu] 2
 660 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
 661 .IP \[bu] 2
 662 {\f[CB]\-v\f[R]}: Verbose output
 663 .IP \[bu] 2
 664 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism
 665 .PP
 666 Use the \f[CB]\-importpass\f[R] command to imports a passphrase and store
 667 it in a new \f[CB]KeyStore.SecretKeyEntry\f[R] identified by
 668 \f[CB]\-alias\f[R].
 669 The passphrase may be supplied via the standard input stream; otherwise
 670 the user is prompted for it.
 671 The \f[CB]\-keypass\f[R] option provides a password to protect the
 672 imported passphrase.
 673 If a password is not provided, then the user is prompted for it.
 674 If you press the \f[B]Return\f[R] key at the prompt, then the key
 675 password is set to the same password as that used for the
 676 \f[CB]keystore\f[R].
 677 The \f[CB]\-keypass\f[R] value must contain at least six characters.
 678 .RE
 679 .SH COMMANDS FOR IMPORTING CONTENTS FROM ANOTHER KEYSTORE
 680 .TP
 681 .B \f[CB]\-importkeystore\f[R]
 682 The following are the available options for the
 683 \f[CB]\-importkeystore\f[R] command:
 684 .RS
 685 .IP \[bu] 2
 686 \f[CB]\-srckeystore\f[R] \f[I]keystore\f[R]: Source keystore name
 687 .IP \[bu] 2
 688 {\f[CB]\-destkeystore\f[R] \f[I]keystore\f[R]}: Destination keystore name
 689 .IP \[bu] 2
 690 {\f[CB]\-srcstoretype\f[R] \f[I]type\f[R]}: Source keystore type
 691 .IP \[bu] 2
 692 {\f[CB]\-deststoretype\f[R] \f[I]type\f[R]}: Destination keystore type
 693 .IP \[bu] 2
 694 [\f[CB]\-srcstorepass\f[R] \f[I]arg\f[R]]: Source keystore password
 695 .IP \[bu] 2
 696 [\f[CB]\-deststorepass\f[R] \f[I]arg\f[R]]: Destination keystore password
 697 .IP \[bu] 2
 698 {\f[CB]\-srcprotected\f[R]}: Source keystore password protected
 699 .IP \[bu] 2
 700 {\f[CB]\-destprotected\f[R]}: Destination keystore password protected
 701 .IP \[bu] 2
 702 {\f[CB]\-srcprovidername\f[R] \f[I]name\f[R]}: Source keystore provider
 703 name
 704 .IP \[bu] 2
 705 {\f[CB]\-destprovidername\f[R] \f[I]name\f[R]}: Destination keystore
 706 provider name
 707 .IP \[bu] 2
 708 {\f[CB]\-srcalias\f[R] \f[I]alias\f[R]}: Source alias
 709 .IP \[bu] 2
 710 {\f[CB]\-destalias\f[R] \f[I]alias\f[R]}: Destination alias
 711 .IP \[bu] 2
 712 [\f[CB]\-srckeypass\f[R] \f[I]arg\f[R]]: Source key password
 713 .IP \[bu] 2
 714 [\f[CB]\-destkeypass\f[R] \f[I]arg\f[R]]: Destination key password
 715 .IP \[bu] 2
 716 {\f[CB]\-noprompt\f[R]}: Do not prompt
 717 .IP \[bu] 2
 718 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 719 \f[I]arg\f[R]]: Add security provider by name (such as SunPKCS11) with an
 720 optional configure argument.
 721 .IP \[bu] 2
 722 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 723 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
 724 an optional configure argument
 725 .IP \[bu] 2
 726 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
 727 .IP \[bu] 2
 728 {\f[CB]\-v\f[R]}: Verbose output
 729 .PP
 730 \f[B]Note:\f[R]
 731 .PP
 732 This is the first line of all options:
 733 .RS
 734 .PP
 735 \f[CB]\-srckeystore\f[R] \f[I]keystore\f[R] \f[CB]\-destkeystore\f[R]
 736 \f[I]keystore\f[R]
 737 .RE
 738 .PP
 739 Use the \f[CB]\-importkeystore\f[R] command to import a single entry or
 740 all entries from a source keystore to a destination keystore.
 741 .PP
 742 \f[B]Note:\f[R]
 743 .PP
 744 If you do not specify \f[CB]\-destkeystore\f[R] when using the
 745 \f[CB]keytool\ \-importkeystore\f[R] command, then the default keystore
 746 used is \f[CB]$HOME/.keystore\f[R].
 747 .PP
 748 When the \f[CB]\-srcalias\f[R] option is provided, the command imports the
 749 single entry identified by the alias to the destination keystore.
 750 If a destination alias isn\[aq]t provided with \f[CB]\-destalias\f[R],
 751 then \f[CB]\-srcalias\f[R] is used as the destination alias.
 752 If the source entry is protected by a password, then
 753 \f[CB]\-srckeypass\f[R] is used to recover the entry.
 754 If \f[CB]\-srckeypass\f[R] isn\[aq]t provided, then the \f[CB]keytool\f[R]
 755 command attempts to use \f[CB]\-srcstorepass\f[R] to recover the entry.
 756 If \f[CB]\-srcstorepass\f[R] is not provided or is incorrect, then the
 757 user is prompted for a password.
 758 The destination entry is protected with \f[CB]\-destkeypass\f[R].
 759 If \f[CB]\-destkeypass\f[R] isn\[aq]t provided, then the destination entry
 760 is protected with the source entry password.
 761 For example, most third\-party tools require \f[CB]storepass\f[R] and
 762 \f[CB]keypass\f[R] in a PKCS #12 keystore to be the same.
 763 To create a PKCS#12 keystore for these tools, always specify a
 764 \f[CB]\-destkeypass\f[R] that is the same as \f[CB]\-deststorepass\f[R].
 765 .PP
 766 If the \f[CB]\-srcalias\f[R] option isn\[aq]t provided, then all entries
 767 in the source keystore are imported into the destination keystore.
 768 Each destination entry is stored under the alias from the source entry.
 769 If the source entry is protected by a password, then
 770 \f[CB]\-srcstorepass\f[R] is used to recover the entry.
 771 If \f[CB]\-srcstorepass\f[R] is not provided or is incorrect, then the
 772 user is prompted for a password.
 773 If a source keystore entry type isn\[aq]t supported in the destination
 774 keystore, or if an error occurs while storing an entry into the
 775 destination keystore, then the user is prompted either to skip the entry
 776 and continue or to quit.
 777 The destination entry is protected with the source entry password.
 778 .PP
 779 If the destination alias already exists in the destination keystore,
 780 then the user is prompted either to overwrite the entry or to create a
 781 new entry under a different alias name.
 782 .PP
 783 If the \f[CB]\-noprompt\f[R] option is provided, then the user isn\[aq]t
 784 prompted for a new destination alias.
 785 Existing entries are overwritten with the destination alias name.
 786 Entries that can\[aq]t be imported are skipped and a warning is
 787 displayed.
 788 .RE
 789 .SH COMMANDS FOR GENERATING A CERTIFICATE REQUEST
 790 .TP
 791 .B \f[CB]\-certreq\f[R]
 792 The following are the available options for the \f[CB]\-certreq\f[R]
 793 command:
 794 .RS
 795 .IP \[bu] 2
 796 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process
 797 .IP \[bu] 2
 798 {\f[CB]\-sigalg\f[R] \f[I]alg\f[R]}: Signature algorithm name
 799 .IP \[bu] 2
 800 {\f[CB]\-file\f[R] \f[I]file\f[R]}: Output file name
 801 .IP \[bu] 2
 802 [ \f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password
 803 .IP \[bu] 2
 804 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
 805 .IP \[bu] 2
 806 {\f[CB]\-dname\f[R] \f[I]name\f[R]}: Distinguished name
 807 .IP \[bu] 2
 808 {\f[CB]\-ext\f[R] \f[I]value\f[R]}: X.509 extension
 809 .IP \[bu] 2
 810 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
 811 .IP \[bu] 2
 812 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
 813 .IP \[bu] 2
 814 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
 815 .IP \[bu] 2
 816 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 817 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
 818 an optional configure argument.
 819 .IP \[bu] 2
 820 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 821 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
 822 an optional configure argument.
 823 .IP \[bu] 2
 824 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
 825 .IP \[bu] 2
 826 {\f[CB]\-v\f[R]}: Verbose output
 827 .IP \[bu] 2
 828 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism
 829 .PP
 830 Use the \f[CB]\-certreq\f[R] command to generate a Certificate Signing
 831 Request (CSR) using the PKCS #10 format.
 832 .PP
 833 A CSR is intended to be sent to a CA.
 834 The CA authenticates the certificate requestor (usually offline) and
 835 returns a certificate or certificate chain to replace the existing
 836 certificate chain (initially a self\-signed certificate) in the
 837 keystore.
 838 .PP
 839 The private key associated with \f[I]alias\f[R] is used to create the
 840 PKCS #10 certificate request.
 841 To access the private key, the correct password must be provided.
 842 If \f[CB]\-keypass\f[R] isn\[aq]t provided at the command line and is
 843 different from the password used to protect the integrity of the
 844 keystore, then the user is prompted for it.
 845 If \f[CB]\-dname\f[R] is provided, then it is used as the subject in the
 846 CSR.
 847 Otherwise, the X.500 Distinguished Name associated with alias is used.
 848 .PP
 849 The \f[CB]\-sigalg\f[R] value specifies the algorithm that should be used
 850 to sign the CSR.
 851 .PP
 852 The CSR is stored in the \f[CB]\-file\f[R] \f[I]file\f[R].
 853 If a file is not specified, then the CSR is output to \f[CB]\-stdout\f[R].
 854 .PP
 855 Use the \f[CB]\-importcert\f[R] command to import the response from the
 856 CA.
 857 .RE
 858 .SH COMMANDS FOR EXPORTING DATA
 859 .TP
 860 .B \f[CB]\-exportcert\f[R]
 861 The following are the available options for the \f[CB]\-exportcert\f[R]
 862 command:
 863 .RS
 864 .IP \[bu] 2
 865 {\f[CB]\-rfc\f[R]}: Output in RFC style
 866 .IP \[bu] 2
 867 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process
 868 .IP \[bu] 2
 869 {\f[CB]\-file\f[R] \f[I]file\f[R]}: Output file name
 870 .IP \[bu] 2
 871 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
 872 .IP \[bu] 2
 873 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore
 874 .IP \[bu] 2
 875 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
 876 .IP \[bu] 2
 877 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
 878 .IP \[bu] 2
 879 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
 880 .IP \[bu] 2
 881 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 882 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
 883 an optional configure argument.
 884 .IP \[bu] 2
 885 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 886 \f[I]arg\f[R]] }: Add security provider by fully qualified class name
 887 with an optional configure argument.
 888 .IP \[bu] 2
 889 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
 890 .IP \[bu] 2
 891 {\f[CB]\-v\f[R]}: Verbose output
 892 .IP \[bu] 2
 893 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism
 894 .PP
 895 Use the \f[CB]\-exportcert\f[R] command to read a certificate from the
 896 keystore that is associated with \f[CB]\-alias\f[R] \f[I]alias\f[R] and
 897 store it in the \f[CB]\-file\f[R] \f[I]file\f[R].
 898 When a file is not specified, the certificate is output to
 899 \f[CB]stdout\f[R].
 900 .PP
 901 By default, the certificate is output in binary encoding.
 902 If the \f[CB]\-rfc\f[R] option is specified, then the output in the
 903 printable encoding format defined by the Internet RFC 1421 Certificate
 904 Encoding Standard.
 905 .PP
 906 If \f[CB]\-alias\f[R] refers to a trusted certificate, then that
 907 certificate is output.
 908 Otherwise, \f[CB]\-alias\f[R] refers to a key entry with an associated
 909 certificate chain.
 910 In that case, the first certificate in the chain is returned.
 911 This certificate authenticates the public key of the entity addressed by
 912 \f[CB]\-alias\f[R].
 913 .RE
 914 .SH COMMANDS FOR DISPLAYING DATA
 915 .TP
 916 .B \f[CB]\-list\f[R]
 917 The following are the available options for the \f[CB]\-list\f[R] command:
 918 .RS
 919 .IP \[bu] 2
 920 {\f[CB]\-rfc\f[R]}: Output in RFC style
 921 .IP \[bu] 2
 922 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process
 923 .IP \[bu] 2
 924 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
 925 .IP \[bu] 2
 926 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore
 927 .IP \[bu] 2
 928 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
 929 .IP \[bu] 2
 930 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
 931 .IP \[bu] 2
 932 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
 933 .IP \[bu] 2
 934 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
 935 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
 936 an optional configure argument.
 937 .IP \[bu] 2
 938 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
 939 \f[I]arg\f[R]] }: Add security provider by fully qualified class name
 940 with an optional configure argument.
 941 .IP \[bu] 2
 942 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
 943 .IP \[bu] 2
 944 {\f[CB]\-v\f[R]}: Verbose output
 945 .IP \[bu] 2
 946 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism
 947 .PP
 948 Use the \f[CB]\-list\f[R] command to print the contents of the keystore
 949 entry identified by \f[CB]\-alias\f[R] to \f[CB]stdout\f[R].
 950 If \f[CB]\-alias\f[R] \f[I]alias\f[R] is not specified, then the contents
 951 of the entire keystore are printed.
 952 .PP
 953 By default, this command prints the SHA\-256 fingerprint of a
 954 certificate.
 955 If the \f[CB]\-v\f[R] option is specified, then the certificate is printed
 956 in human\-readable format, with additional information such as the
 957 owner, issuer, serial number, and any extensions.
 958 If the \f[CB]\-rfc\f[R] option is specified, then the certificate contents
 959 are printed by using the printable encoding format, as defined by the
 960 Internet RFC 1421 Certificate Encoding Standard.
 961 .PP
 962 \f[B]Note:\f[R]
 963 .PP
 964 You can\[aq]t specify both \f[CB]\-v\f[R] and \f[CB]\-rfc\f[R] in the same
 965 command.
 966 Otherwise, an error is reported.
 967 .RE
 968 .TP
 969 .B \f[CB]\-printcert\f[R]
 970 The following are the available options for the \f[CB]\-printcert\f[R]
 971 command:
 972 .RS
 973 .IP \[bu] 2
 974 {\f[CB]\-rfc\f[R]}: Output in RFC style
 975 .IP \[bu] 2
 976 {\f[CB]\-file\f[R] \f[I]cert_file\f[R]}: Input file name
 977 .IP \[bu] 2
 978 {\f[CB]\-sslserver\f[R] \f[I]server\f[R][\f[CB]:\f[R]\f[I]port\f[R]]}:: Secure
 979 Sockets Layer (SSL) server host and port
 980 .IP \[bu] 2
 981 {\f[CB]\-jarfile\f[R] \f[I]JAR_file\f[R]}: Signed \f[CB]\&amp;.jar\f[R] file
 982 .IP \[bu] 2
 983 {\f[CB]\-v\f[R]}: Verbose output
 984 .PP
 985 Use the \f[CB]\-printcert\f[R] command to read and print the certificate
 986 from \f[CB]\-file\f[R] \f[I]cert_file\f[R], the SSL server located at
 987 \f[CB]\-sslserver\f[R] \f[I]server\f[R][\f[CB]:\f[R]\f[I]port\f[R]], or the
 988 signed JAR file specified by \f[CB]\-jarfile\f[R] \f[I]JAR_file\f[R].
 989 It prints its contents in a human\-readable format.
 990 When a port is not specified, the standard HTTPS port 443 is assumed.
 991 .PP
 992 \f[B]Note:\f[R]
 993 .PP
 994 The \f[CB]\-sslserver\f[R] and \f[CB]\-file\f[R] options can\[aq]t be
 995 provided in the same command.
 996 Otherwise, an error is reported.
 997 If you don\[aq]t specify either option, then the certificate is read
 998 from \f[CB]stdin\f[R].
 999 .PP
1000 When\f[CB]\-rfc\f[R] is specified, the \f[CB]keytool\f[R] command prints the
1001 certificate in PEM mode as defined by the Internet RFC 1421 Certificate
1002 Encoding standard.
1003 .PP
1004 If the certificate is read from a file or \f[CB]stdin\f[R], then it might
1005 be either binary encoded or in printable encoding format, as defined by
1006 the RFC 1421 Certificate Encoding standard.
1007 .PP
1008 If the SSL server is behind a firewall, then the
1009 \f[CB]\-J\-Dhttps.proxyHost=proxyhost\f[R] and
1010 \f[CB]\-J\-Dhttps.proxyPort=proxyport\f[R] options can be specified on the
1011 command line for proxy tunneling.
1012 .PP
1013 \f[B]Note:\f[R]
1014 .PP
1015 This option can be used independently of a keystore.
1016 .RE
1017 .TP
1018 .B \f[CB]\-printcertreq\f[R]
1019 The following are the available options for the \f[CB]\-printcertreq\f[R]
1020 command:
1021 .RS
1022 .IP \[bu] 2
1023 {\f[CB]\-file\f[R] \f[I]file\f[R]}: Input file name
1024 .IP \[bu] 2
1025 {\f[CB]\-v\f[R]}: Verbose output
1026 .PP
1027 Use the \f[CB]\-printcertreq\f[R] command to print the contents of a PKCS
1028 #10 format certificate request, which can be generated by the
1029 \f[CB]keytool\ \-certreq\f[R] command.
1030 The command reads the request from file.
1031 If there is no file, then the request is read from the standard input.
1032 .RE
1033 .TP
1034 .B \f[CB]\-printcrl\f[R]
1035 The following are the available options for the \f[CB]\-printcrl\f[R]
1036 command:
1037 .RS
1038 .IP \[bu] 2
1039 {\f[CB]\-file\ crl\f[R]}: Input file name
1040 .IP \[bu] 2
1041 {\f[CB]\-v\f[R]}: Verbose output
1042 .PP
1043 Use the \f[CB]\-printcrl\f[R] command to read the Certificate Revocation
1044 List (CRL) from \f[CB]\-file\ crl\f[R] .
1045 A CRL is a list of the digital certificates that were revoked by the CA
1046 that issued them.
1047 The CA generates the \f[CB]crl\f[R] file.
1048 .PP
1049 \f[B]Note:\f[R]
1050 .PP
1051 This option can be used independently of a keystore.
1052 .RE
1053 .SH COMMANDS FOR MANAGING THE KEYSTORE
1054 .TP
1055 .B \f[CB]\-storepasswd\f[R]
1056 The following are the available options for the \f[CB]\-storepasswd\f[R]
1057 command:
1058 .RS
1059 .IP \[bu] 2
1060 [\f[CB]\-new\f[R] \f[I]arg\f[R]]: New password
1061 .IP \[bu] 2
1062 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
1063 .IP \[bu] 2
1064 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore
1065 .IP \[bu] 2
1066 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
1067 .IP \[bu] 2
1068 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
1069 .IP \[bu] 2
1070 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
1071 .IP \[bu] 2
1072 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
1073 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
1074 an optional configure argument.
1075 .IP \[bu] 2
1076 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
1077 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
1078 an optional configure argument.
1079 .IP \[bu] 2
1080 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
1081 .IP \[bu] 2
1082 {\f[CB]\-v\f[R]}: Verbose output
1083 .PP
1084 Use the \f[CB]\-storepasswd\f[R] command to change the password used to
1085 protect the integrity of the keystore contents.
1086 The new password is set by \f[CB]\-new\f[R] \f[I]arg\f[R] and must contain
1087 at least six characters.
1088 .RE
1089 .TP
1090 .B \f[CB]\-keypasswd\f[R]
1091 The following are the available options for the \f[CB]\-keypasswd\f[R]
1092 command:
1093 .RS
1094 .IP \[bu] 2
1095 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process
1096 .IP \[bu] 2
1097 [\f[CB]\-keypass\f[R] \f[I]old_keypass\f[R]]: Key password
1098 .IP \[bu] 2
1099 [\f[CB]\-new\f[R] \f[I]new_keypass\f[R]]: New password
1100 .IP \[bu] 2
1101 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
1102 .IP \[bu] 2
1103 {\f[CB]\-storepass\f[R] \f[I]arg\f[R]}: Keystore password
1104 .IP \[bu] 2
1105 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
1106 .IP \[bu] 2
1107 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
1108 .IP \[bu] 2
1109 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
1110 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
1111 an optional configure argument.
1112 .IP \[bu] 2
1113 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
1114 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
1115 an optional configure argument.
1116 .IP \[bu] 2
1117 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
1118 .IP \[bu] 2
1119 {\f[CB]\-v\f[R]}: Verbose output
1120 .PP
1121 Use the \f[CB]\-keypasswd\f[R] command to change the password (under which
1122 private/secret keys identified by \f[CB]\-alias\f[R] are protected) from
1123 \f[CB]\-keypass\f[R] \f[I]old_keypass\f[R] to \f[CB]\-new\f[R]
1124 \f[I]new_keypass\f[R].
1125 The password value must contain at least six characters.
1126 .PP
1127 If the \f[CB]\-keypass\f[R] option isn\[aq]t provided at the command line
1128 and the \f[CB]\-keypass\f[R] password is different from the keystore
1129 password (\f[CB]\-storepass\f[R] \f[I]arg\f[R]), then the user is prompted
1130 for it.
1131 .PP
1132 If the \f[CB]\-new\f[R] option isn\[aq]t provided at the command line,
1133 then the user is prompted for it.
1134 .RE
1135 .TP
1136 .B \f[CB]\-delete\f[R]
1137 The following are the available options for the \f[CB]\-delete\f[R]
1138 command:
1139 .RS
1140 .IP \[bu] 2
1141 [\f[CB]\-alias\f[R] \f[I]alias\f[R]]: Alias name of the entry to process
1142 .IP \[bu] 2
1143 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
1144 .IP \[bu] 2
1145 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore
1146 .IP \[bu] 2
1147 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
1148 .IP \[bu] 2
1149 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
1150 .IP \[bu] 2
1151 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
1152 .IP \[bu] 2
1153 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
1154 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
1155 an optional configure argument.
1156 .IP \[bu] 2
1157 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
1158 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
1159 an optional configure argument.
1160 .IP \[bu] 2
1161 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
1162 .IP \[bu] 2
1163 {\f[CB]\-v\f[R]}: Verbose output
1164 .IP \[bu] 2
1165 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism
1166 .PP
1167 Use the \f[CB]\-delete\f[R] command to delete the \f[CB]\-alias\f[R]
1168 \f[I]alias\f[R] entry from the keystore.
1169 When not provided at the command line, the user is prompted for the
1170 \f[CB]alias\f[R].
1171 .RE
1172 .TP
1173 .B \f[CB]\-changealias\f[R]
1174 The following are the available options for the \f[CB]\-changealias\f[R]
1175 command:
1176 .RS
1177 .IP \[bu] 2
1178 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process
1179 .IP \[bu] 2
1180 [\f[CB]\-destalias\f[R] \f[I]alias\f[R]]: Destination alias
1181 .IP \[bu] 2
1182 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password
1183 .IP \[bu] 2
1184 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name
1185 .IP \[bu] 2
1186 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore
1187 .IP \[bu] 2
1188 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password
1189 .IP \[bu] 2
1190 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type
1191 .IP \[bu] 2
1192 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name
1193 .IP \[bu] 2
1194 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]
1195 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with
1196 an optional configure argument.
1197 .IP \[bu] 2
1198 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]
1199 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with
1200 an optional configure argument.
1201 .IP \[bu] 2
1202 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath
1203 .IP \[bu] 2
1204 {\f[CB]\-v\f[R]}: Verbose output
1205 .IP \[bu] 2
1206 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism
1207 .PP
1208 Use the \f[CB]\-changealias\f[R] command to move an existing keystore
1209 entry from \f[CB]\-alias\f[R] \f[I]alias\f[R] to a new \f[CB]\-destalias\f[R]
1210 \f[I]alias\f[R].
1211 If a destination alias is not provided, then the command prompts you for
1212 one.
1213 If the original entry is protected with an entry password, then the
1214 password can be supplied with the \f[CB]\-keypass\f[R] option.
1215 If a key password is not provided, then the \f[CB]\-storepass\f[R] (if
1216 provided) is attempted first.
1217 If the attempt fails, then the user is prompted for a password.
1218 .RE
1219 .SH COMMANDS FOR DISPLAYING SECURITY\-RELATED INFORMATION
1220 .TP
1221 .B \f[CB]\-showinfo\f[R]
1222 The following are the available options for the \f[CB]\-showinfo\f[R]
1223 command:
1224 .RS
1225 .IP \[bu] 2
1226 {\f[CB]\-tls\f[R]}: Displays TLS configuration information
1227 .IP \[bu] 2
1228 {\f[CB]\-v\f[R]}: Verbose output
1229 .PP
1230 Use the \f[CB]\-showinfo\f[R] command to display various security\-related
1231 information.
1232 The \f[CB]\-tls\f[R] option displays TLS configurations, such as the list
1233 of enabled protocols and cipher suites.
1234 .RE
1235 .SH COMMANDS FOR DISPLAYING HELP INFORMATION
1236 .PP
1237 You can use \f[CB]\-\-help\f[R] to display a list of \f[CB]keytool\f[R]
1238 commands or to display help information about a specific
1239 \f[CB]keytool\f[R] command.
1240 .IP \[bu] 2
1241 To display a list of \f[CB]keytool\f[R] commands, enter:
1242 .RS 2
1243 .RS
1244 .PP
1245 \f[CB]keytool\ \-\-help\f[R]
1246 .RE
1247 .RE
1248 .IP \[bu] 2
1249 To display help information about a specific \f[CB]keytool\f[R] command,
1250 enter:
1251 .RS 2
1252 .RS
1253 .PP
1254 \f[CB]keytool\ \-&lt;command&gt;\ \-\-help\f[R]
1255 .RE
1256 .RE
1257 .SH COMMON COMMAND OPTIONS
1258 .PP
1259 The \f[CB]\-v\f[R] option can appear for all commands except
1260 \f[CB]\-\-help\f[R].
1261 When the \f[CB]\-v\f[R] option appears, it signifies verbose mode, which
1262 means that more information is provided in the output.
1263 .PP
1264 The \f[CB]\-J\f[R]\f[I]option\f[R] argument can appear for any command.
1265 When the \f[CB]\-J\f[R]\f[I]option\f[R] is used, the specified
1266 \f[I]option\f[R] string is passed directly to the Java interpreter.
1267 This option doesn\[aq]t contain any spaces.
1268 It\[aq]s useful for adjusting the execution environment or memory usage.
1269 For a list of possible interpreter options, enter \f[CB]java\ \-h\f[R] or
1270 \f[CB]java\ \-X\f[R] at the command line.
1271 .PP
1272 These options can appear for all commands operating on a keystore:
1273 .TP
1274 .B \f[CB]\-storetype\f[R] \f[I]storetype\f[R]
1275 This qualifier specifies the type of keystore to be instantiated.
1276 .RS
1277 .RE
1278 .TP
1279 .B \f[CB]\-keystore\f[R] \f[I]keystore\f[R]
1280 The keystore location.
1281 .RS
1282 .PP
1283 If the JKS \f[CB]storetype\f[R] is used and a keystore file doesn\[aq]t
1284 yet exist, then certain \f[CB]keytool\f[R] commands can result in a new
1285 keystore file being created.
1286 For example, if \f[CB]keytool\ \-genkeypair\f[R] is called and the
1287 \f[CB]\-keystore\f[R] option isn\[aq]t specified, the default keystore
1288 file named \f[CB]\&amp;.keystore\f[R] is created in the user\[aq]s home
1289 directory if it doesn\[aq]t already exist.
1290 Similarly, if the \f[CB]\-keystore\ ks_file\f[R] option is specified but
1291 \f[CB]ks_file\f[R] doesn\[aq]t exist, then it is created.
1292 For more information on the JKS \f[CB]storetype\f[R], see the
1293 \f[B]KeyStore Implementation\f[R] section in \f[B]KeyStore aliases\f[R].
1294 .PP
1295 Note that the input stream from the \f[CB]\-keystore\f[R] option is passed
1296 to the \f[CB]KeyStore.load\f[R] method.
1297 If \f[CB]NONE\f[R] is specified as the URL, then a null stream is passed
1298 to the \f[CB]KeyStore.load\f[R] method.
1299 \f[CB]NONE\f[R] should be specified if the keystore isn\[aq]t file\-based.
1300 For example, when the keystore resides on a hardware token device.
1301 .RE
1302 .TP
1303 .B \f[CB]\-cacerts\f[R] \f[I]cacerts\f[R]
1304 Operates on the \f[I]cacerts\f[R] keystore .
1305 This option is equivalent to \f[CB]\-keystore\f[R]
1306 \f[I]path_to_cacerts\f[R] \f[CB]\-storetype\f[R] \f[I]type_of_cacerts\f[R].
1307 An error is reported if the \f[CB]\-keystore\f[R] or \f[CB]\-storetype\f[R]
1308 option is used with the \f[CB]\-cacerts\f[R] option.
1309 .RS
1310 .RE
1311 .TP
1312 .B \f[CB]\-storepass\f[R] [\f[CB]:env\f[R] | \f[CB]:file\f[R] ] \f[I]argument\f[R]
1313 The password that is used to protect the integrity of the keystore.
1314 .RS
1315 .PP
1316 If the modifier \f[CB]env\f[R] or \f[CB]file\f[R] isn\[aq]t specified, then
1317 the password has the value \f[I]argument\f[R], which must contain at
1318 least six characters.
1319 Otherwise, the password is retrieved as follows:
1320 .IP \[bu] 2
1321 \f[CB]env\f[R]: Retrieve the password from the environment variable named
1322 \f[I]argument\f[R].
1323 .IP \[bu] 2
1324 \f[CB]file\f[R]: Retrieve the password from the file named
1325 \f[I]argument\f[R].
1326 .PP
1327 \f[B]Note:\f[R] All other options that require passwords, such as
1328 \f[CB]\-keypass\f[R], \f[CB]\-srckeypass\f[R], \f[CB]\-destkeypass\f[R],
1329 \f[CB]\-srcstorepass\f[R], and \f[CB]\-deststorepass\f[R], accept the
1330 \f[CB]env\f[R] and \f[CB]file\f[R] modifiers.
1331 Remember to separate the password option and the modifier with a colon
1332 (:).
1333 .PP
1334 The password must be provided to all commands that access the keystore
1335 contents.
1336 For such commands, when the \f[CB]\-storepass\f[R] option isn\[aq]t
1337 provided at the command line, the user is prompted for it.
1338 .PP
1339 When retrieving information from the keystore, the password is optional.
1340 If a password is not specified, then the integrity of the retrieved
1341 information can\[aq]t be verified and a warning is displayed.
1342 .RE
1343 .TP
1344 .B \f[CB]\-providername\f[R] \f[I]name\f[R]
1345 Used to identify a cryptographic service provider\[aq]s name when listed
1346 in the security properties file.
1347 .RS
1348 .RE
1349 .TP
1350 .B \f[CB]\-addprovider\f[R] \f[I]name\f[R]
1351 Used to add a security provider by name (such as SunPKCS11) .
1352 .RS
1353 .RE
1354 .TP
1355 .B \f[CB]\-providerclass\f[R] \f[I]class\f[R]
1356 Used to specify the name of a cryptographic service provider\[aq]s
1357 master class file when the service provider isn\[aq]t listed in the
1358 security properties file.
1359 .RS
1360 .RE
1361 .TP
1362 .B \f[CB]\-providerpath\f[R] \f[I]list\f[R]
1363 Used to specify the provider classpath.
1364 .RS
1365 .RE
1366 .TP
1367 .B \f[CB]\-providerarg\f[R] \f[I]arg\f[R]
1368 Used with the \f[CB]\-addprovider\f[R] or \f[CB]\-providerclass\f[R] option
1369 to represent an optional string input argument for the constructor of
1370 \f[I]class\f[R] name.
1371 .RS
1372 .RE
1373 .TP
1374 .B \f[CB]\-protected=true\f[R]|\f[CB]false\f[R]
1375 Specify this value as \f[CB]true\f[R] when a password must be specified by
1376 way of a protected authentication path, such as a dedicated PIN reader.
1377 Because there are two keystores involved in the
1378 \f[CB]\-importkeystore\f[R] command, the following two options,
1379 \f[CB]\-srcprotected\f[R] and \f[CB]\-destprotected\f[R], are provided for
1380 the source keystore and the destination keystore respectively.
1381 .RS
1382 .RE
1383 .TP
1384 .B \f[CB]\-ext\f[R] {\f[I]name\f[R]{\f[CB]:critical\f[R]} {\f[CB]=\f[R]\f[I]value\f[R]}}
1385 Denotes an X.509 certificate extension.
1386 The option can be used in \f[CB]\-genkeypair\f[R] and \f[CB]\-gencert\f[R]
1387 to embed extensions into the generated certificate, or in
1388 \f[CB]\-certreq\f[R] to show what extensions are requested in the
1389 certificate request.
1390 The option can appear multiple times.
1391 The \f[I]name\f[R] argument can be a supported extension name (see
1392 \f[B]Supported Named Extensions\f[R]) or an arbitrary OID number.
1393 The \f[I]value\f[R] argument, when provided, denotes the argument for the
1394 extension.
1395 When \f[I]value\f[R] is omitted, the default value of the extension or
1396 the extension itself requires no argument.
1397 The \f[CB]:critical\f[R] modifier, when provided, means the
1398 extension\[aq]s \f[CB]isCritical\f[R] attribute is \f[CB]true\f[R];
1399 otherwise, it is \f[CB]false\f[R].
1400 You can use \f[CB]:c\f[R] in place of \f[CB]:critical\f[R].
1401 .RS
1402 .RE
1403 .TP
1404 .B \f[CB]\-conf\f[R] \f[I]file\f[R]
1405 Specifies a pre\-configured options file.
1406 .RS
1407 .RE
1408 .SH PRE\-CONFIGURED OPTIONS FILE
1409 .PP
1410 A pre\-configured options file is a Java properties file that can be
1411 specified with the \f[CB]\-conf\f[R] option.
1412 Each property represents the default option(s) for a keytool command
1413 using &quot;keytool.\f[I]command_name\f[R]&quot; as the property name.
1414 A special property named &quot;keytool.all&quot; represents the default option(s)
1415 applied to all commands.
1416 A property value can include \f[CB]${prop}\f[R] which will be expanded to
1417 the system property associated with it.
1418 If an option value includes white spaces inside, it should be surrounded
1419 by quotation marks (&quot; or \[aq]).
1420 All property names must be in lower case.
1421 .PP
1422 When \f[CB]keytool\f[R] is launched with a pre\-configured options file,
1423 the value for &quot;keytool.all&quot; (if it exists) is prepended to the
1424 \f[CB]keytool\f[R] command line first, with the value for the command name
1425 (if it exists) comes next, and the existing options on the command line
1426 at last.
1427 For a single\-valued option, this allows the property for a specific
1428 command to override the &quot;keytool.all&quot; value, and the value specified on
1429 the command line to override both.
1430 For multiple\-valued options, all of them will be used by
1431 \f[CB]keytool\f[R].
1432 .PP
1433 For example, given the following file named \f[CB]preconfig\f[R]:
1434 .IP
1435 .nf
1436 \f[CB]
1437 \ \ \ \ #\ A\ tiny\ pre\-configured\ options\ file
1438 \ \ \ \ keytool.all\ =\ \-keystore\ ${user.home}/ks
1439 \ \ \ \ keytool.list\ =\ \-v
1440 \ \ \ \ keytool.genkeypair\ =\ \-keyalg\ rsa
1441 \f[R]
1442 .fi
1443 .PP
1444 \f[CB]keytool\ \-conf\ preconfig\ \-list\f[R] is identical to
1445 .RS
1446 .PP
1447 \f[CB]keytool\ \-keystore\ ~/ks\ \-v\ \-list\f[R]
1448 .RE
1449 .PP
1450 \f[CB]keytool\ \-conf\ preconfig\ \-genkeypair\ \-alias\ me\f[R] is
1451 identical to
1452 .RS
1453 .PP
1454 \f[CB]keytool\ \-keystore\ ~/ks\ \-keyalg\ rsa\ \-genkeypair\ \-alias\ me\f[R]
1455 .RE
1456 .PP
1457 \f[CB]keytool\ \-conf\ preconfig\ \-genkeypair\ \-alias\ you\ \-keyalg\ ec\f[R]
1458 is identical to
1459 .RS
1460 .PP
1461 \f[CB]keytool\ \-keystore\ ~/ks\ \-keyalg\ rsa\ \-genkeypair\ \-alias\ you\ \-keyalg\ ec\f[R]
1462 .RE
1463 .PP
1464 which is equivalent to
1465 .RS
1466 .PP
1467 \f[CB]keytool\ \-keystore\ ~/ks\ \-genkeypair\ \-alias\ you\ \-keyalg\ ec\f[R]
1468 .RE
1469 .PP
1470 because \f[CB]\-keyalg\f[R] is a single\-valued option and the \f[CB]ec\f[R]
1471 value specified on the command line overrides the preconfigured options
1472 file.
1473 .SH EXAMPLES OF OPTION VALUES
1474 .PP
1475 The following examples show the defaults for various option values:
1476 .IP
1477 .nf
1478 \f[CB]
1479 \-alias\ &quot;mykey&quot;
1480 
1481 \-keysize
1482 \ \ \ \ 2048\ (when\ using\ \-genkeypair\ and\ \-keyalg\ is\ &quot;RSA&quot;)
1483 \ \ \ \ 2048\ (when\ using\ \-genkeypair\ and\ \-keyalg\ is\ &quot;DSA&quot;)
1484 \ \ \ \ 256\ (when\ using\ \-genkeypair\ and\ \-keyalg\ is\ &quot;EC&quot;)
1485 \ \ \ \ 56\ (when\ using\ \-genseckey\ and\ \-keyalg\ is\ &quot;DES&quot;)
1486 \ \ \ \ 168\ (when\ using\ \-genseckey\ and\ \-keyalg\ is\ &quot;DESede&quot;)
1487 
1488 \-validity\ 90
1489 
1490 \-keystore\ &lt;the\ file\ named\ .keystore\ in\ the\ user\[aq]s\ home\ directory&gt;
1491 
1492 \-destkeystore\ &lt;the\ file\ named\ .keystore\ in\ the\ user\[aq]s\ home\ directory&gt;
1493 
1494 \-storetype\ &lt;the\ value\ of\ the\ &quot;keystore.type&quot;\ property\ in\ the
1495 \ \ \ \ security\ properties\ file,\ which\ is\ returned\ by\ the\ static
1496 \ \ \ \ getDefaultType\ method\ in\ java.security.KeyStore&gt;
1497 
1498 \-file
1499 \ \ \ \ stdin\ (if\ reading)
1500 \ \ \ \ stdout\ (if\ writing)
1501 
1502 \-protected\ false
1503 \f[R]
1504 .fi
1505 .PP
1506 When generating a certificate or a certificate request, the default
1507 signature algorithm (\f[CB]\-sigalg\f[R] option) is derived from the
1508 algorithm of the underlying private key to provide an appropriate level
1509 of security strength as follows:
1510 .PP
1511 .TS
1512 tab(@);
1513 l l l.
1514 T{
1515 keyalg
1516 T}@T{
1517 keysize
1518 T}@T{
1519 default sigalg
1520 T}
1521 _
1522 T{
1523 DSA
1524 T}@T{
1525 any size
1526 T}@T{
1527 SHA256withDSA
1528 T}
1529 T{
1530 RSA
1531 T}@T{
1532 &lt;= 3072
1533 T}@T{
1534 SHA256withRSA
1535 T}
1536 T{
1537 T}@T{
1538 &lt;= 7680
1539 T}@T{
1540 SHA384withRSA
1541 T}
1542 T{
1543 T}@T{
1544 &gt; 7680
1545 T}@T{
1546 SHA512withRSA
1547 T}
1548 T{
1549 EC
1550 T}@T{
1551 &lt; 384
1552 T}@T{
1553 SHA256withECDSA
1554 T}
1555 T{
1556 T}@T{
1557 &lt; 512
1558 T}@T{
1559 SHA384withECDSA
1560 T}
1561 T{
1562 T}@T{
1563 = 512
1564 T}@T{
1565 SHA512withECDSA
1566 T}
1567 .TE
1568 .PP
1569 \f[B]Note:\f[R]
1570 .PP
1571 To improve out of the box security, default key size and signature
1572 algorithm names are periodically updated to stronger values with each
1573 release of the JDK.
1574 If interoperability with older releases of the JDK is important, make
1575 sure that the defaults are supported by those releases.
1576 Alternatively, you can use the \f[CB]\-keysize\f[R] or \f[CB]\-sigalg\f[R]
1577 options to override the default values at your own risk.
1578 .SH SUPPORTED NAMED EXTENSIONS
1579 .PP
1580 The \f[CB]keytool\f[R] command supports these named extensions.
1581 The names aren\[aq]t case\-sensitive.
1582 .TP
1583 .B \f[CB]BC\f[R] or \f[CB]BasicContraints\f[R]
1584 Values:
1585 .RS
1586 .PP
1587 The full form is
1588 \f[CB]ca:\f[R]{\f[CB]true\f[R]|\f[CB]false\f[R]}[\f[CB],pathlen:\f[R]\f[I]len\f[R]]
1589 or \f[I]len\f[R], which is short for
1590 \f[CB]ca:true,pathlen:\f[R]\f[I]len\f[R].
1591 .PP
1592 When \f[I]len\f[R] is omitted, the resulting value is \f[CB]ca:true\f[R].
1593 .RE
1594 .TP
1595 .B \f[CB]KU\f[R] or \f[CB]KeyUsage\f[R]
1596 Values:
1597 .RS
1598 .PP
1599 \f[I]usage\f[R](\f[CB],\f[R] \f[I]usage\f[R])*
1600 .PP
1601 \f[I]usage\f[R] can be one of the following:
1602 .IP \[bu] 2
1603 \f[CB]digitalSignature\f[R]
1604 .IP \[bu] 2
1605 \f[CB]nonRepudiation\f[R] (\f[CB]contentCommitment\f[R])
1606 .IP \[bu] 2
1607 \f[CB]keyEncipherment\f[R]
1608 .IP \[bu] 2
1609 \f[CB]dataEncipherment\f[R]
1610 .IP \[bu] 2
1611 \f[CB]keyAgreement\f[R]
1612 .IP \[bu] 2
1613 \f[CB]keyCertSign\f[R]
1614 .IP \[bu] 2
1615 \f[CB]cRLSign\f[R]
1616 .IP \[bu] 2
1617 \f[CB]encipherOnly\f[R]
1618 .IP \[bu] 2
1619 \f[CB]decipherOnly\f[R]
1620 .PP
1621 Provided there is no ambiguity, the \f[I]usage\f[R] argument can be
1622 abbreviated with the first few letters (such as \f[CB]dig\f[R] for
1623 \f[CB]digitalSignature\f[R]) or in camel\-case style (such as \f[CB]dS\f[R]
1624 for \f[CB]digitalSignature\f[R] or \f[CB]cRLS\f[R] for \f[CB]cRLSign\f[R]).
1625 The \f[I]usage\f[R] values are case\-sensitive.
1626 .RE
1627 .TP
1628 .B \f[CB]EKU\f[R] or \f[CB]ExtendedKeyUsage\f[R]
1629 Values:
1630 .RS
1631 .PP
1632 \f[I]usage\f[R](\f[CB],\f[R] \f[I]usage\f[R])*
1633 .PP
1634 \f[I]usage\f[R] can be one of the following:
1635 .IP \[bu] 2
1636 \f[CB]anyExtendedKeyUsage\f[R]
1637 .IP \[bu] 2
1638 \f[CB]serverAuth\f[R]
1639 .IP \[bu] 2
1640 \f[CB]clientAuth\f[R]
1641 .IP \[bu] 2
1642 \f[CB]codeSigning\f[R]
1643 .IP \[bu] 2
1644 \f[CB]emailProtection\f[R]
1645 .IP \[bu] 2
1646 \f[CB]timeStamping\f[R]
1647 .IP \[bu] 2
1648 \f[CB]OCSPSigning\f[R]
1649 .IP \[bu] 2
1650 Any OID string
1651 .PP
1652 Provided there is no ambiguity, the \f[I]usage\f[R] argument can be
1653 abbreviated with the first few letters or in camel\-case style.
1654 The \f[I]usage\f[R] values are case\-sensitive.
1655 .RE
1656 .TP
1657 .B \f[CB]SAN\f[R] or \f[CB]SubjectAlternativeName\f[R]
1658 Values:
1659 .RS
1660 .PP
1661 \f[I]type\f[R]\f[CB]:\f[R]\f[I]value\f[R](\f[CB],\f[R]
1662 \f[I]type\f[R]\f[CB]:\f[R]\f[I]value\f[R])*
1663 .PP
1664 \f[I]type\f[R] can be one of the following:
1665 .IP \[bu] 2
1666 \f[CB]EMAIL\f[R]
1667 .IP \[bu] 2
1668 \f[CB]URI\f[R]
1669 .IP \[bu] 2
1670 \f[CB]DNS\f[R]
1671 .IP \[bu] 2
1672 \f[CB]IP\f[R]
1673 .IP \[bu] 2
1674 \f[CB]OID\f[R]
1675 .PP
1676 The \f[I]value\f[R] argument is the string format value for the
1677 \f[I]type\f[R].
1678 .RE
1679 .TP
1680 .B \f[CB]IAN\f[R] or \f[CB]IssuerAlternativeName\f[R]
1681 Values:
1682 .RS
1683 .PP
1684 Same as \f[CB]SAN\f[R] or \f[CB]SubjectAlternativeName\f[R].
1685 .RE
1686 .TP
1687 .B \f[CB]SIA\f[R] or \f[CB]SubjectInfoAccess\f[R]
1688 Values:
1689 .RS
1690 .PP
1691 \f[I]method\f[R]\f[CB]:\f[R]\f[I]location\-type\f[R]\f[CB]:\f[R]\f[I]location\-value\f[R](\f[CB],\f[R]
1692 \f[I]method\f[R]\f[CB]:\f[R]\f[I]location\-type\f[R]\f[CB]:\f[R]\f[I]location\-value\f[R])*
1693 .PP
1694 \f[I]method\f[R] can be one of the following:
1695 .IP \[bu] 2
1696 \f[CB]timeStamping\f[R]
1697 .IP \[bu] 2
1698 \f[CB]caRepository\f[R]
1699 .IP \[bu] 2
1700 Any OID
1701 .PP
1702 The \f[I]location\-type\f[R] and \f[I]location\-value\f[R] arguments can
1703 be any \f[I]type\f[R]\f[CB]:\f[R]\f[I]value\f[R] supported by the
1704 \f[CB]SubjectAlternativeName\f[R] extension.
1705 .RE
1706 .TP
1707 .B \f[CB]AIA\f[R] or \f[CB]AuthorityInfoAccess\f[R]
1708 Values:
1709 .RS
1710 .PP
1711 Same as \f[CB]SIA\f[R] or \f[CB]SubjectInfoAccess\f[R].
1712 .PP
1713 The \f[I]method\f[R] argument can be one of the following:
1714 .IP \[bu] 2
1715 \f[CB]ocsp\f[R]
1716 .IP \[bu] 2
1717 \f[CB]caIssuers\f[R]
1718 .IP \[bu] 2
1719 Any OID
1720 .RE
1721 .PP
1722 When \f[I]name\f[R] is OID, the value is the hexadecimal dumped Definite
1723 Encoding Rules (DER) encoding of the \f[CB]extnValue\f[R] for the
1724 extension excluding the OCTET STRING type and length bytes.
1725 Other than standard hexadecimal numbers (0\-9, a\-f, A\-F), any extra
1726 characters are ignored in the HEX string.
1727 Therefore, both 01:02:03:04 and 01020304 are accepted as identical
1728 values.
1729 When there is no value, the extension has an empty value field.
1730 .PP
1731 A special name \f[CB]honored\f[R], used only in \f[CB]\-gencert\f[R],
1732 denotes how the extensions included in the certificate request should be
1733 honored.
1734 The value for this name is a comma\-separated list of \f[CB]all\f[R] (all
1735 requested extensions are honored),
1736 \f[I]name\f[R]{\f[CB]:\f[R][\f[CB]critical\f[R]|\f[CB]non\-critical\f[R]]} (the
1737 named extension is honored, but it uses a different \f[CB]isCritical\f[R]
1738 attribute), and \f[CB]\-name\f[R] (used with \f[CB]all\f[R], denotes an
1739 exception).
1740 Requested extensions aren\[aq]t honored by default.
1741 .PP
1742 If, besides the\f[CB]\-ext\ honored\f[R] option, another named or OID
1743 \f[CB]\-ext\f[R] option is provided, this extension is added to those
1744 already honored.
1745 However, if this name (or OID) also appears in the honored value, then
1746 its value and criticality override that in the request.
1747 If an extension of the same type is provided multiple times through
1748 either a name or an OID, only the last extension is used.
1749 .PP
1750 The \f[CB]subjectKeyIdentifier\f[R] extension is always created.
1751 For non\-self\-signed certificates, the \f[CB]authorityKeyIdentifier\f[R]
1752 is created.
1753 .PP
1754 \f[B]CAUTION:\f[R]
1755 .PP
1756 Users should be aware that some combinations of extensions (and other
1757 certificate fields) may not conform to the Internet standard.
1758 See \f[B]Certificate Conformance Warning\f[R].
1759 .SH EXAMPLES OF TASKS IN CREATING A KEYSTORE
1760 .PP
1761 The following examples describe the sequence actions in creating a
1762 keystore for managing public/private key pairs and certificates from
1763 trusted entities.
1764 .IP \[bu] 2
1765 \f[B]Generating the Key Pair\f[R]
1766 .IP \[bu] 2
1767 \f[B]Requesting a Signed Certificate from a CA\f[R]
1768 .IP \[bu] 2
1769 \f[B]Importing a Certificate for the CA\f[R]
1770 .IP \[bu] 2
1771 \f[B]Importing the Certificate Reply from the CA\f[R]
1772 .IP \[bu] 2
1773 \f[B]Exporting a Certificate That Authenticates the Public Key\f[R]
1774 .IP \[bu] 2
1775 \f[B]Importing the Keystore\f[R]
1776 .IP \[bu] 2
1777 \f[B]Generating Certificates for an SSL Server\f[R]
1778 .SH GENERATING THE KEY PAIR
1779 .PP
1780 Create a keystore and then generate the key pair.
1781 .PP
1782 You can enter the command as a single line such as the following:
1783 .RS
1784 .PP
1785 \f[CB]keytool\ \-genkeypair\ \-dname\ &quot;cn=myname,\ ou=mygroup,\ o=mycompany,\ c=mycountry&quot;\ \-alias\ business\ \-keyalg\ rsa\ \-keypass\f[R]
1786 \f[I]password\f[R]
1787 \f[CB]\-keystore\ /working/mykeystore\ \-storepass\ password\ \-validity\ 180\f[R]
1788 .RE
1789 .PP
1790 The command creates the keystore named \f[CB]mykeystore\f[R] in the
1791 working directory (provided it doesn\[aq]t already exist), and assigns
1792 it the password specified by \f[CB]\-keypass\f[R].
1793 It generates a public/private key pair for the entity whose
1794 distinguished name is \f[CB]myname\f[R], \f[CB]mygroup\f[R],
1795 \f[CB]mycompany\f[R], and a two\-letter country code of
1796 \f[CB]mycountry\f[R].
1797 It uses the RSA key generation algorithm to create the keys; both are
1798 2048 bits
1799 .PP
1800 The command uses the default SHA256withRSA signature algorithm to create
1801 a self\-signed certificate that includes the public key and the
1802 distinguished name information.
1803 The certificate is valid for 180 days, and is associated with the
1804 private key in a keystore entry referred to by
1805 \f[CB]\-alias\ business\f[R].
1806 The private key is assigned the password specified by
1807 \f[CB]\-keypass\f[R].
1808 .PP
1809 The command is significantly shorter when the option defaults are
1810 accepted.
1811 In this case, only \f[CB]\-keyalg\f[R] is required, and the defaults are
1812 used for unspecified options that have default values.
1813 You are prompted for any required values.
1814 You could have the following:
1815 .RS
1816 .PP
1817 \f[CB]keytool\ \-genkeypair\ \-keyalg\ rsa\f[R]
1818 .RE
1819 .PP
1820 In this case, a keystore entry with the alias \f[CB]mykey\f[R] is created,
1821 with a newly generated key pair and a certificate that is valid for 90
1822 days.
1823 This entry is placed in your home directory in a keystore named
1824 \f[CB]\&amp;.keystore\f[R] .
1825 \f[CB]\&amp;.keystore\f[R] is created if it doesn\[aq]t already exist.
1826 You are prompted for the distinguished name information, the keystore
1827 password, and the private key password.
1828 .PP
1829 \f[B]Note:\f[R]
1830 .PP
1831 The rest of the examples assume that you responded to the prompts with
1832 values equal to those specified in the first \f[CB]\-genkeypair\f[R]
1833 command.
1834 For example, a distinguished name of
1835 \f[CB]cn=\f[R]\f[I]myname\f[R]\f[CB],\ ou=\f[R]\f[I]mygroup\f[R]\f[CB],\ o=\f[R]\f[I]mycompany\f[R]\f[CB],\ c=\f[R]\f[I]mycountry\f[R]).
1836 .SH REQUESTING A SIGNED CERTIFICATE FROM A CA
1837 .PP
1838 \f[B]Note:\f[R]
1839 .PP
1840 Generating the key pair created a self\-signed certificate; however, a
1841 certificate is more likely to be trusted by others when it is signed by
1842 a CA.
1843 .PP
1844 To get a CA signature, complete the following process:
1845 .IP &quot;1.&quot; 3
1846 Generate a CSR:
1847 .RS 4
1848 .RS
1849 .PP
1850 \f[CB]keytool\ \-certreq\ \-file\ myname.csr\f[R]
1851 .RE
1852 .PP
1853 This creates a CSR for the entity identified by the default alias
1854 \f[CB]mykey\f[R] and puts the request in the file named
1855 \f[CB]myname.csr\f[R].
1856 .RE
1857 .IP &quot;2.&quot; 3
1858 Submit \f[CB]myname.csr\f[R] to a CA, such as DigiCert.
1859 .PP
1860 The CA authenticates you, the requestor (usually offline), and returns a
1861 certificate, signed by them, authenticating your public key.
1862 In some cases, the CA returns a chain of certificates, each one
1863 authenticating the public key of the signer of the previous certificate
1864 in the chain.
1865 .SH IMPORTING A CERTIFICATE FOR THE CA
1866 .PP
1867 To import a certificate for the CA, complete the following process:
1868 .IP &quot;1.&quot; 3
1869 Before you import the certificate reply from a CA, you need one or more
1870 trusted certificates either in your keystore or in the \f[CB]cacerts\f[R]
1871 keystore file.
1872 See \f[CB]\-importcert\f[R] in \f[B]Commands\f[R].
1873 .RS 4
1874 .IP \[bu] 2
1875 If the certificate reply is a certificate chain, then you need the top
1876 certificate of the chain.
1877 The root CA certificate that authenticates the public key of the CA.
1878 .IP \[bu] 2
1879 If the certificate reply is a single certificate, then you need a
1880 certificate for the issuing CA (the one that signed it).
1881 If that certificate isn\[aq]t self\-signed, then you need a certificate
1882 for its signer, and so on, up to a self\-signed root CA certificate.
1883 .PP
1884 The \f[CB]cacerts\f[R] keystore ships with a set of root certificates
1885 issued by the CAs of \f[B]the Oracle Java Root Certificate program\f[R]
1886 [http://www.oracle.com/technetwork/java/javase/javasecarootcertsprogram\-1876540.html].
1887 If you request a signed certificate from a CA, and a certificate
1888 authenticating that CA\[aq]s public key hasn\[aq]t been added to
1889 \f[CB]cacerts\f[R], then you must import a certificate from that CA as a
1890 trusted certificate.
1891 .PP
1892 A certificate from a CA is usually self\-signed or signed by another CA.
1893 If it is signed by another CA, you need a certificate that authenticates
1894 that CA\[aq]s public key.
1895 .PP
1896 For example, you have obtained a \f[I]X\f[R]\f[CB]\&amp;.cer\f[R] file from a
1897 company that is a CA and the file is supposed to be a self\-signed
1898 certificate that authenticates that CA\[aq]s public key.
1899 Before you import it as a trusted certificate, you should ensure that
1900 the certificate is valid by:
1901 .IP &quot;1.&quot; 3
1902 Viewing it with the \f[CB]keytool\ \-printcert\f[R] command or the
1903 \f[CB]keytool\ \-importcert\f[R] command without using the
1904 \f[CB]\-noprompt\f[R] option.
1905 Make sure that the displayed certificate fingerprints match the expected
1906 fingerprints.
1907 .IP &quot;2.&quot; 3
1908 Calling the person who sent the certificate, and comparing the
1909 fingerprints that you see with the ones that they show or that a secure
1910 public key repository shows.
1911 .PP
1912 Only when the fingerprints are equal is it assured that the certificate
1913 wasn\[aq]t replaced in transit with somebody else\[aq]s certificate
1914 (such as an attacker\[aq]s certificate).
1915 If such an attack takes place, and you didn\[aq]t check the certificate
1916 before you imported it, then you would be trusting anything that the
1917 attacker signed.
1918 .RE
1919 .IP &quot;2.&quot; 3
1920 Replace the self\-signed certificate with a certificate chain, where
1921 each certificate in the chain authenticates the public key of the signer
1922 of the previous certificate in the chain, up to a root CA.
1923 .RS 4
1924 .PP
1925 If you trust that the certificate is valid, then you can add it to your
1926 keystore by entering the following command:
1927 .RS
1928 .PP
1929 \f[CB]keytool\ \-importcert\ \-alias\f[R] \f[I]alias\f[R]
1930 \f[CB]\-file\ *X*\f[R].cer`
1931 .RE
1932 .PP
1933 This command creates a trusted certificate entry in the keystore from
1934 the data in the CA certificate file and assigns the values of the
1935 \f[I]alias\f[R] to the entry.
1936 .RE
1937 .SH IMPORTING THE CERTIFICATE REPLY FROM THE CA
1938 .PP
1939 After you import a certificate that authenticates the public key of the
1940 CA that you submitted your certificate signing request to (or there is
1941 already such a certificate in the \f[CB]cacerts\f[R] file), you can import
1942 the certificate reply and replace your self\-signed certificate with a
1943 certificate chain.
1944 .PP
1945 The certificate chain is one of the following:
1946 .IP \[bu] 2
1947 Returned by the CA when the CA reply is a chain.
1948 .IP \[bu] 2
1949 Constructed when the CA reply is a single certificate.
1950 This certificate chain is constructed by using the certificate reply and
1951 trusted certificates available either in the keystore where you import
1952 the reply or in the \f[CB]cacerts\f[R] keystore file.
1953 .PP
1954 For example, if you sent your certificate signing request to DigiCert,
1955 then you can import their reply by entering the following command:
1956 .PP
1957 \f[B]Note:\f[R]
1958 .PP
1959 In this example, the returned certificate is named
1960 \f[CB]DCmyname.cer\f[R].
1961 .RS
1962 .PP
1963 \f[CB]keytool\ \-importcert\ \-trustcacerts\ \-file\ DCmyname.cer\f[R]
1964 .RE
1965 .SH EXPORTING A CERTIFICATE THAT AUTHENTICATES THE PUBLIC KEY
1966 .PP
1967 \f[B]Note:\f[R]
1968 .PP
1969 If you used the \f[CB]jarsigner\f[R] command to sign a Java Archive (JAR)
1970 file, then clients that use the file will want to authenticate your
1971 signature.
1972 .PP
1973 One way that clients can authenticate you is by importing your public
1974 key certificate into their keystore as a trusted entry.
1975 You can then export the certificate and supply it to your clients.
1976 .PP
1977 For example:
1978 .IP &quot;1.&quot; 3
1979 Copy your certificate to a file named \f[CB]myname.cer\f[R] by entering
1980 the following command:
1981 .RS 4
1982 .PP
1983 \f[B]Note:\f[R]
1984 .PP
1985 In this example, the entry has an alias of \f[CB]mykey\f[R].
1986 .RS
1987 .PP
1988 \f[CB]keytool\ \-exportcert\ \-alias\ mykey\ \-file\ myname.cer\f[R]
1989 .RE
1990 .RE
1991 .IP &quot;2.&quot; 3
1992 With the certificate and the signed JAR file, a client can use the
1993 \f[CB]jarsigner\f[R] command to authenticate your signature.
1994 .SH IMPORTING THE KEYSTORE
1995 .PP
1996 Use the \f[CB]importkeystore\f[R] command to import an entire keystore
1997 into another keystore.
1998 This imports all entries from the source keystore, including keys and
1999 certificates, to the destination keystore with a single command.
2000 You can use this command to import entries from a different type of
2001 keystore.
2002 During the import, all new entries in the destination keystore will have
2003 the same alias names and protection passwords (for secret keys and
2004 private keys).
2005 If the \f[CB]keytool\f[R] command can\[aq]t recover the private keys or
2006 secret keys from the source keystore, then it prompts you for a
2007 password.
2008 If it detects alias duplication, then it asks you for a new alias, and
2009 you can specify a new alias or simply allow the \f[CB]keytool\f[R] command
2010 to overwrite the existing one.
2011 .PP
2012 For example, import entries from a typical JKS type keystore
2013 \f[CB]key.jks\f[R] into a PKCS #11 type hardware\-based keystore, by
2014 entering the following command:
2015 .RS
2016 .PP
2017 \f[CB]keytool\ \-importkeystore\ \-srckeystore\ key.jks\ \-destkeystore\ NONE\ \-srcstoretype\ JKS\ \-deststoretype\ PKCS11\ \-srcstorepass\f[R]
2018 \f[I]password\f[R] \f[CB]\-deststorepass\f[R] \f[I]password\f[R]
2019 .RE
2020 .PP
2021 The \f[CB]importkeystore\f[R] command can also be used to import a single
2022 entry from a source keystore to a destination keystore.
2023 In this case, besides the options you used in the previous example, you
2024 need to specify the alias you want to import.
2025 With the \f[CB]\-srcalias\f[R] option specified, you can also specify the
2026 destination alias name, protection password for a secret or private key,
2027 and the destination protection password you want as follows:
2028 .RS
2029 .PP
2030 \f[CB]keytool\ \-importkeystore\ \-srckeystore\ key.jks\ \-destkeystore\ NONE\ \-srcstoretype\ JKS\ \-deststoretype\ PKCS11\ \-srcstorepass\f[R]
2031 \f[I]password\f[R] \f[CB]\-deststorepass\f[R] \f[I]password\f[R]
2032 \f[CB]\-srcalias\ myprivatekey\ \-destalias\ myoldprivatekey\ \-srckeypass\f[R]
2033 \f[I]password\f[R] \f[CB]\-destkeypass\f[R] \f[I]password\f[R]
2034 \f[CB]\-noprompt\f[R]
2035 .RE
2036 .SH GENERATING CERTIFICATES FOR AN SSL SERVER
2037 .PP
2038 The following are \f[CB]keytool\f[R] commands used to generate key pairs
2039 and certificates for three entities:
2040 .IP \[bu] 2
2041 Root CA (\f[CB]root\f[R])
2042 .IP \[bu] 2
2043 Intermediate CA (\f[CB]ca\f[R])
2044 .IP \[bu] 2
2045 SSL server (\f[CB]server\f[R])
2046 .PP
2047 Ensure that you store all the certificates in the same keystore.
2048 .IP
2049 .nf
2050 \f[CB]
2051 keytool\ \-genkeypair\ \-keystore\ root.jks\ \-alias\ root\ \-ext\ bc:c\ \-keyalg\ rsa
2052 keytool\ \-genkeypair\ \-keystore\ ca.jks\ \-alias\ ca\ \-ext\ bc:c\ \-keyalg\ rsa
2053 keytool\ \-genkeypair\ \-keystore\ server.jks\ \-alias\ server\ \-keyalg\ rsa
2054 
2055 keytool\ \-keystore\ root.jks\ \-alias\ root\ \-exportcert\ \-rfc\ &gt;\ root.pem
2056 
2057 keytool\ \-storepass\ password\ \-keystore\ ca.jks\ \-certreq\ \-alias\ ca\ |
2058 \ \ \ \ keytool\ \-storepass\ password\ \-keystore\ root.jks
2059 \ \ \ \ \-gencert\ \-alias\ root\ \-ext\ BC=0\ \-rfc\ &gt;\ ca.pem
2060 keytool\ \-keystore\ ca.jks\ \-importcert\ \-alias\ ca\ \-file\ ca.pem
2061 
2062 keytool\ \-storepass\ password\ \-keystore\ server.jks\ \-certreq\ \-alias\ server\ |
2063 \ \ \ \ keytool\ \-storepass\ password\ \-keystore\ ca.jks\ \-gencert\ \-alias\ ca
2064 \ \ \ \ \-ext\ ku:c=dig,kE\ \-rfc\ &gt;\ server.pem
2065 cat\ root.pem\ ca.pem\ server.pem\ |
2066 \ \ \ \ keytool\ \-keystore\ server.jks\ \-importcert\ \-alias\ server
2067 \f[R]
2068 .fi
2069 .SH TERMS
2070 .TP
2071 .B Keystore
2072 A keystore is a storage facility for cryptographic keys and
2073 certificates.
2074 .RS
2075 .RE
2076 .TP
2077 .B Keystore entries
2078 Keystores can have different types of entries.
2079 The two most applicable entry types for the \f[CB]keytool\f[R] command
2080 include the following:
2081 .RS
2082 .PP
2083 Key entries: Each entry holds very sensitive cryptographic key
2084 information, which is stored in a protected format to prevent
2085 unauthorized access.
2086 Typically, a key stored in this type of entry is a secret key, or a
2087 private key accompanied by the certificate chain for the corresponding
2088 public key.
2089 See \f[B]Certificate Chains\f[R].
2090 The \f[CB]keytool\f[R] command can handle both types of entries, while the
2091 \f[CB]jarsigner\f[R] tool only handles the latter type of entry, that is
2092 private keys and their associated certificate chains.
2093 .PP
2094 Trusted certificate entries: Each entry contains a single public key
2095 certificate that belongs to another party.
2096 The entry is called a trusted certificate because the keystore owner
2097 trusts that the public key in the certificate belongs to the identity
2098 identified by the subject (owner) of the certificate.
2099 The issuer of the certificate vouches for this, by signing the
2100 certificate.
2101 .RE
2102 .TP
2103 .B Keystore aliases
2104 All keystore entries (key and trusted certificate entries) are accessed
2105 by way of unique aliases.
2106 .RS
2107 .PP
2108 An alias is specified when you add an entity to the keystore with the
2109 \f[CB]\-genseckey\f[R] command to generate a secret key, the
2110 \f[CB]\-genkeypair\f[R] command to generate a key pair (public and private
2111 key), or the \f[CB]\-importcert\f[R] command to add a certificate or
2112 certificate chain to the list of trusted certificates.
2113 Subsequent \f[CB]keytool\f[R] commands must use this same alias to refer
2114 to the entity.
2115 .PP
2116 For example, you can use the alias \f[CB]duke\f[R] to generate a new
2117 public/private key pair and wrap the public key into a self\-signed
2118 certificate with the following command.
2119 See \f[B]Certificate Chains\f[R].
2120 .RS
2121 .PP
2122 \f[CB]keytool\ \-genkeypair\ \-alias\ duke\ \-keyalg\ rsa\ \-keypass\f[R]
2123 \f[I]passwd\f[R]
2124 .RE
2125 .PP
2126 This example specifies an initial \f[I]passwd\f[R] required by subsequent
2127 commands to access the private key associated with the alias
2128 \f[CB]duke\f[R].
2129 If you later want to change Duke\[aq]s private key password, use a
2130 command such as the following:
2131 .RS
2132 .PP
2133 \f[CB]keytool\ \-keypasswd\ \-alias\ duke\ \-keypass\f[R] \f[I]passwd\f[R]
2134 \f[CB]\-new\f[R] \f[I]newpasswd\f[R]
2135 .RE
2136 .PP
2137 This changes the initial \f[I]passwd\f[R] to \f[I]newpasswd\f[R].
2138 A password shouldn\[aq]t be specified on a command line or in a script
2139 unless it is for testing purposes, or you are on a secure system.
2140 If you don\[aq]t specify a required password option on a command line,
2141 then you are prompted for it.
2142 .RE
2143 .TP
2144 .B Keystore implementation
2145 The \f[CB]KeyStore\f[R] class provided in the \f[CB]java.security\f[R]
2146 package supplies well\-defined interfaces to access and modify the
2147 information in a keystore.
2148 It is possible for there to be multiple different concrete
2149 implementations, where each implementation is that for a particular type
2150 of keystore.
2151 .RS
2152 .PP
2153 Currently, two command\-line tools (\f[CB]keytool\f[R] and
2154 \f[CB]jarsigner\f[R]) make use of keystore implementations.
2155 Because the \f[CB]KeyStore\f[R] class is \f[CB]public\f[R], users can write
2156 additional security applications that use it.
2157 .PP
2158 In JDK 9 and later, the default keystore implementation is
2159 \f[CB]PKCS12\f[R].
2160 This is a cross platform keystore based on the RSA PKCS12 Personal
2161 Information Exchange Syntax Standard.
2162 This standard is primarily meant for storing or transporting a
2163 user\[aq]s private keys, certificates, and miscellaneous secrets.
2164 There is another built\-in implementation, provided by Oracle.
2165 It implements the keystore as a file with a proprietary keystore type
2166 (format) named \f[CB]JKS\f[R].
2167 It protects each private key with its individual password, and also
2168 protects the integrity of the entire keystore with a (possibly
2169 different) password.
2170 .PP
2171 Keystore implementations are provider\-based.
2172 More specifically, the application interfaces supplied by
2173 \f[CB]KeyStore\f[R] are implemented in terms of a Service Provider
2174 Interface (SPI).
2175 That is, there is a corresponding abstract \f[CB]KeystoreSpi\f[R] class,
2176 also in the \f[CB]java.security\ package\f[R], which defines the Service
2177 Provider Interface methods that providers must implement.
2178 The term \f[I]provider\f[R] refers to a package or a set of packages that
2179 supply a concrete implementation of a subset of services that can be
2180 accessed by the Java Security API.
2181 To provide a keystore implementation, clients must implement a provider
2182 and supply a \f[CB]KeystoreSpi\f[R] subclass implementation, as described
2183 in Steps to Implement and Integrate a Provider.
2184 .PP
2185 Applications can choose different types of keystore implementations from
2186 different providers, using the \f[CB]getInstance\f[R] factory method
2187 supplied in the \f[CB]KeyStore\f[R] class.
2188 A keystore type defines the storage and data format of the keystore
2189 information, and the algorithms used to protect private/secret keys in
2190 the keystore and the integrity of the keystore.
2191 Keystore implementations of different types aren\[aq]t compatible.
2192 .PP
2193 The \f[CB]keytool\f[R] command works on any file\-based keystore
2194 implementation.
2195 It treats the keystore location that is passed to it at the command line
2196 as a file name and converts it to a \f[CB]FileInputStream\f[R], from which
2197 it loads the keystore information.)The \f[CB]jarsigner\f[R] commands can
2198 read a keystore from any location that can be specified with a URL.
2199 .PP
2200 For \f[CB]keytool\f[R] and \f[CB]jarsigner\f[R], you can specify a keystore
2201 type at the command line, with the \f[CB]\-storetype\f[R] option.
2202 .PP
2203 If you don\[aq]t explicitly specify a keystore type, then the tools
2204 choose a keystore implementation based on the value of the
2205 \f[CB]keystore.type\f[R] property specified in the security properties
2206 file.
2207 The security properties file is called \f[CB]java.security\f[R], and
2208 resides in the security properties directory:
2209 .IP \[bu] 2
<a name="5" id="anc5"></a><span class="line-modified">2210 \f[B]Linux and OS X:\f[R] \f[CB]java.home/lib/security\f[R]</span>

2211 .IP \[bu] 2
2212 \f[B]Windows:\f[R] \f[CB]java.home\\lib\\security\f[R]
2213 .PP
2214 Each tool gets the \f[CB]keystore.type\f[R] value and then examines all
2215 the currently installed providers until it finds one that implements a
2216 keystores of that type.
2217 It then uses the keystore implementation from that provider.The
2218 \f[CB]KeyStore\f[R] class defines a static method named
2219 \f[CB]getDefaultType\f[R] that lets applications retrieve the value of the
2220 \f[CB]keystore.type\f[R] property.
2221 The following line of code creates an instance of the default keystore
2222 type as specified in the \f[CB]keystore.type\f[R] property:
2223 .RS
2224 .PP
2225 \f[CB]KeyStore\ keyStore\ =\ KeyStore.getInstance(KeyStore.getDefaultType());\f[R]
2226 .RE
2227 .PP
2228 The default keystore type is \f[CB]pkcs12\f[R], which is a cross\-platform
2229 keystore based on the RSA PKCS12 Personal Information Exchange Syntax
2230 Standard.
2231 This is specified by the following line in the security properties file:
2232 .RS
2233 .PP
2234 \f[CB]keystore.type=pkcs12\f[R]
2235 .RE
2236 .PP
2237 To have the tools utilize a keystore implementation other than the
2238 default, you can change that line to specify a different keystore type.
2239 For example, if you want to use the Oracle\[aq]s \f[CB]jks\f[R] keystore
2240 implementation, then change the line to the following:
2241 .RS
2242 .PP
2243 \f[CB]keystore.type=jks\f[R]
2244 .RE
2245 .PP
2246 \f[B]Note:\f[R]
2247 .PP
2248 Case doesn\[aq]t matter in keystore type designations.
2249 For example, \f[CB]JKS\f[R] would be considered the same as \f[CB]jks\f[R].
2250 .RE
2251 .TP
2252 .B Certificate
2253 A certificate (or public\-key certificate) is a digitally signed
2254 statement from one entity (the issuer), saying that the public key and
2255 some other information of another entity (the subject) has some specific
2256 value.
2257 The following terms are related to certificates:
2258 .RS
2259 .IP \[bu] 2
2260 Public Keys: These are numbers associated with a particular entity, and
2261 are intended to be known to everyone who needs to have trusted
2262 interactions with that entity.
2263 Public keys are used to verify signatures.
2264 .IP \[bu] 2
2265 Digitally Signed: If some data is digitally signed, then it is stored
2266 with the identity of an entity and a signature that proves that entity
2267 knows about the data.
2268 The data is rendered unforgeable by signing with the entity\[aq]s
2269 private key.
2270 .IP \[bu] 2
2271 Identity: A known way of addressing an entity.
2272 In some systems, the identity is the public key, and in others it can be
2273 anything from an Oracle Solaris UID to an email address to an X.509
2274 distinguished name.
2275 .IP \[bu] 2
2276 Signature: A signature is computed over some data using the private key
2277 of an entity.
2278 The signer, which in the case of a certificate is also known as the
2279 issuer.
2280 .IP \[bu] 2
2281 Private Keys: These are numbers, each of which is supposed to be known
2282 only to the particular entity whose private key it is (that is, it is
2283 supposed to be kept secret).
2284 Private and public keys exist in pairs in all public key cryptography
2285 systems (also referred to as public key crypto systems).
2286 In a typical public key crypto system, such as DSA, a private key
2287 corresponds to exactly one public key.
2288 Private keys are used to compute signatures.
2289 .IP \[bu] 2
2290 Entity: An entity is a person, organization, program, computer,
2291 business, bank, or something else you are trusting to some degree.
2292 .PP
2293 Public key cryptography requires access to users\[aq] public keys.
2294 In a large\-scale networked environment, it is impossible to guarantee
2295 that prior relationships between communicating entities were established
2296 or that a trusted repository exists with all used public keys.
2297 Certificates were invented as a solution to this public key distribution
2298 problem.
2299 Now a Certification Authority (CA) can act as a trusted third party.
2300 CAs are entities such as businesses that are trusted to sign (issue)
2301 certificates for other entities.
2302 It is assumed that CAs only create valid and reliable certificates
2303 because they are bound by legal agreements.
2304 There are many public Certification Authorities, such as DigiCert,
2305 Comodo, Entrust, and so on.
2306 .PP
2307 You can also run your own Certification Authority using products such as
2308 Microsoft Certificate Server or the Entrust CA product for your
2309 organization.
2310 With the \f[CB]keytool\f[R] command, it is possible to display, import,
2311 and export certificates.
2312 It is also possible to generate self\-signed certificates.
2313 .PP
2314 The \f[CB]keytool\f[R] command currently handles X.509 certificates.
2315 .RE
2316 .TP
2317 .B X.509 Certificates
2318 The X.509 standard defines what information can go into a certificate
2319 and describes how to write it down (the data format).
2320 All the data in a certificate is encoded with two related standards
2321 called ASN.1/DER.
2322 Abstract Syntax Notation 1 describes data.
2323 The Definite Encoding Rules describe a single way to store and transfer
2324 that data.
2325 .RS
2326 .PP
2327 All X.509 certificates have the following data, in addition to the
2328 signature:
2329 .IP \[bu] 2
2330 Version: This identifies which version of the X.509 standard applies to
2331 this certificate, which affects what information can be specified in it.
2332 Thus far, three versions are defined.
2333 The \f[CB]keytool\f[R] command can import and export v1, v2, and v3
2334 certificates.
2335 It generates v3 certificates.
2336 .RS 2
2337 .IP \[bu] 2
2338 X.509 Version 1 has been available since 1988, is widely deployed, and
2339 is the most generic.
2340 .IP \[bu] 2
2341 X.509 Version 2 introduced the concept of subject and issuer unique
2342 identifiers to handle the possibility of reuse of subject or issuer
2343 names over time.
2344 Most certificate profile documents strongly recommend that names not be
2345 reused and that certificates shouldn\[aq]t make use of unique
2346 identifiers.
2347 Version 2 certificates aren\[aq]t widely used.
2348 .IP \[bu] 2
2349 X.509 Version 3 is the most recent (1996) and supports the notion of
2350 extensions where anyone can define an extension and include it in the
2351 certificate.
2352 Some common extensions are: KeyUsage (limits the use of the keys to
2353 particular purposes such as \f[CB]signing\-only\f[R]) and AlternativeNames
2354 (allows other identities to also be associated with this public key, for
2355 example.
2356 DNS names, email addresses, IP addresses).
2357 Extensions can be marked critical to indicate that the extension should
2358 be checked and enforced or used.
2359 For example, if a certificate has the KeyUsage extension marked critical
2360 and set to \f[CB]keyCertSign\f[R], then when this certificate is presented
2361 during SSL communication, it should be rejected because the certificate
2362 extension indicates that the associated private key should only be used
2363 for signing certificates and not for SSL use.
2364 .RE
2365 .IP \[bu] 2
2366 Serial number: The entity that created the certificate is responsible
2367 for assigning it a serial number to distinguish it from other
2368 certificates it issues.
2369 This information is used in numerous ways.
2370 For example, when a certificate is revoked its serial number is placed
2371 in a Certificate Revocation List (CRL).
2372 .IP \[bu] 2
2373 Signature algorithm identifier: This identifies the algorithm used by
2374 the CA to sign the certificate.
2375 .IP \[bu] 2
2376 Issuer name: The X.500 Distinguished Name of the entity that signed the
2377 certificate.
2378 This is typically a CA.
2379 Using this certificate implies trusting the entity that signed this
2380 certificate.
2381 In some cases, such as root or top\-level CA certificates, the issuer
2382 signs its own certificate.
2383 .IP \[bu] 2
2384 Validity period: Each certificate is valid only for a limited amount of
2385 time.
2386 This period is described by a start date and time and an end date and
2387 time, and can be as short as a few seconds or almost as long as a
2388 century.
2389 The validity period chosen depends on a number of factors, such as the
2390 strength of the private key used to sign the certificate, or the amount
2391 one is willing to pay for a certificate.
2392 This is the expected period that entities can rely on the public value,
2393 when the associated private key has not been compromised.
2394 .IP \[bu] 2
2395 Subject name: The name of the entity whose public key the certificate
2396 identifies.
2397 This name uses the X.500 standard, so it is intended to be unique across
2398 the Internet.
2399 This is the X.500 Distinguished Name (DN) of the entity.
2400 For example,
2401 .RS 2
2402 .RS
2403 .PP
2404 \f[CB]CN=Java\ Duke,\ OU=Java\ Software\ Division,\ O=Oracle\ Corporation,\ C=US\f[R]
2405 .RE
2406 .PP
2407 These refer to the subject\[aq]s common name (CN), organizational unit
2408 (OU), organization (O), and country (C).
2409 .RE
2410 .IP \[bu] 2
2411 Subject public key information: This is the public key of the entity
2412 being named with an algorithm identifier that specifies which public key
2413 crypto system this key belongs to and any associated key parameters.
2414 .RE
2415 .TP
2416 .B Certificate Chains
2417 The \f[CB]keytool\f[R] command can create and manage keystore key entries
2418 that each contain a private key and an associated certificate chain.
2419 The first certificate in the chain contains the public key that
2420 corresponds to the private key.
2421 .RS
2422 .PP
2423 When keys are first generated, the chain starts off containing a single
2424 element, a self\-signed certificate.
2425 See \-genkeypair in \f[B]Commands\f[R].
2426 A self\-signed certificate is one for which the issuer (signer) is the
2427 same as the subject.
2428 The subject is the entity whose public key is being authenticated by the
2429 certificate.
2430 Whenever the \f[CB]\-genkeypair\f[R] command is called to generate a new
2431 public/private key pair, it also wraps the public key into a
2432 self\-signed certificate.
2433 .PP
2434 Later, after a Certificate Signing Request (CSR) was generated with the
2435 \f[CB]\-certreq\f[R] command and sent to a Certification Authority (CA),
2436 the response from the CA is imported with \f[CB]\-importcert\f[R], and the
2437 self\-signed certificate is replaced by a chain of certificates.
2438 At the bottom of the chain is the certificate (reply) issued by the CA
2439 authenticating the subject\[aq]s public key.
2440 The next certificate in the chain is one that authenticates the CA\[aq]s
2441 public key.
2442 .PP
2443 In many cases, this is a self\-signed certificate, which is a
2444 certificate from the CA authenticating its own public key, and the last
2445 certificate in the chain.
2446 In other cases, the CA might return a chain of certificates.
2447 In this case, the bottom certificate in the chain is the same (a
2448 certificate signed by the CA, authenticating the public key of the key
2449 entry), but the second certificate in the chain is a certificate signed
2450 by a different CA that authenticates the public key of the CA you sent
2451 the CSR to.
2452 The next certificate in the chain is a certificate that authenticates
2453 the second CA\[aq]s key, and so on, until a self\-signed root
2454 certificate is reached.
2455 Each certificate in the chain (after the first) authenticates the public
2456 key of the signer of the previous certificate in the chain.
2457 .PP
2458 Many CAs only return the issued certificate, with no supporting chain,
2459 especially when there is a flat hierarchy (no intermediates CAs).
2460 In this case, the certificate chain must be established from trusted
2461 certificate information already stored in the keystore.
2462 .PP
2463 A different reply format (defined by the PKCS #7 standard) includes the
2464 supporting certificate chain in addition to the issued certificate.
2465 Both reply formats can be handled by the \f[CB]keytool\f[R] command.
2466 .PP
2467 The top\-level (root) CA certificate is self\-signed.
2468 However, the trust into the root\[aq]s public key doesn\[aq]t come from
2469 the root certificate itself, but from other sources such as a newspaper.
2470 This is because anybody could generate a self\-signed certificate with
2471 the distinguished name of, for example, the DigiCert root CA.
2472 The root CA public key is widely known.
2473 The only reason it is stored in a certificate is because this is the
2474 format understood by most tools, so the certificate in this case is only
2475 used as a vehicle to transport the root CA\[aq]s public key.
2476 Before you add the root CA certificate to your keystore, you should view
2477 it with the \f[CB]\-printcert\f[R] option and compare the displayed
2478 fingerprint with the well\-known fingerprint obtained from a newspaper,
2479 the root CA\[aq]s Web page, and so on.
2480 .RE
2481 .TP
2482 .B cacerts Certificates File
2483 A certificates file named \f[CB]cacerts\f[R] resides in the security
2484 properties directory:
2485 .RS
2486 .IP \[bu] 2
<a name="6" id="anc6"></a><span class="line-modified">2487 \f[B]Linux and OS X:\f[R] \f[I]JAVA_HOME\f[R]\f[CB]/lib/security\f[R]</span>

2488 .IP \[bu] 2
2489 \f[B]Windows:\f[R] \f[I]JAVA_HOME\f[R]\f[CB]\\lib\\security\f[R]
2490 .PP
<a name="7" id="anc7"></a>



2491 The \f[CB]cacerts\f[R] file represents a system\-wide keystore with CA
2492 certificates.
2493 System administrators can configure and manage that file with the
2494 \f[CB]keytool\f[R] command by specifying \f[CB]jks\f[R] as the keystore
2495 type.
2496 The \f[CB]cacerts\f[R] keystore file ships with a default set of root CA
2497 certificates.
<a name="8" id="anc8"></a><span class="line-modified">2498 For Linux, OS X, and Windows, you can list the default certificates with</span>
<span class="line-modified">2499 the following command:</span>
2500 .RS
2501 .PP
2502 \f[CB]keytool\ \-list\ \-cacerts\f[R]
2503 .RE
2504 .PP
2505 The initial password of the \f[CB]cacerts\f[R] keystore file is
2506 \f[CB]changeit\f[R].
2507 System administrators should change that password and the default access
2508 permission of that file upon installing the SDK.
2509 .PP
2510 \f[B]Note:\f[R]
2511 .PP
2512 It is important to verify your \f[CB]cacerts\f[R] file.
2513 Because you trust the CAs in the \f[CB]cacerts\f[R] file as entities for
2514 signing and issuing certificates to other entities, you must manage the
2515 \f[CB]cacerts\f[R] file carefully.
2516 The \f[CB]cacerts\f[R] file should contain only certificates of the CAs
2517 you trust.
2518 It is your responsibility to verify the trusted root CA certificates
2519 bundled in the \f[CB]cacerts\f[R] file and make your own trust decisions.
2520 .PP
2521 To remove an untrusted CA certificate from the \f[CB]cacerts\f[R] file,
2522 use the \f[CB]\-delete\f[R] option of the \f[CB]keytool\f[R] command.
<a name="9" id="anc9"></a><span class="line-modified">2523 You can find the \f[CB]cacerts\f[R] file in the JDK\[aq]s</span>
<span class="line-modified">2524 \f[CB]$JAVA_HOME/lib/security\f[R] directory.</span>
2525 Contact your system administrator if you don\[aq]t have permission to
<a name="10" id="anc10"></a><span class="line-modified">2526 edit this file.</span>
2527 .RE
2528 .TP
2529 .B Internet RFC 1421 Certificate Encoding Standard
2530 Certificates are often stored using the printable encoding format
2531 defined by the Internet RFC 1421 standard, instead of their binary
2532 encoding.
2533 This certificate format, also known as Base64 encoding, makes it easy to
2534 export certificates to other applications by email or through some other
2535 mechanism.
2536 .RS
2537 .PP
2538 Certificates read by the \f[CB]\-importcert\f[R] and \f[CB]\-printcert\f[R]
2539 commands can be in either this format or binary encoded.
2540 The \f[CB]\-exportcert\f[R] command by default outputs a certificate in
2541 binary encoding, but will instead output a certificate in the printable
2542 encoding format, when the \f[CB]\-rfc\f[R] option is specified.
2543 .PP
2544 The \f[CB]\-list\f[R] command by default prints the SHA\-256 fingerprint
2545 of a certificate.
2546 If the \f[CB]\-v\f[R] option is specified, then the certificate is printed
2547 in human\-readable format.
2548 If the \f[CB]\-rfc\f[R] option is specified, then the certificate is
2549 output in the printable encoding format.
2550 .PP
2551 In its printable encoding format, the encoded certificate is bounded at
2552 the beginning and end by the following text:
2553 .IP
2554 .nf
2555 \f[CB]
2556 \-\-\-\-\-BEGIN\ CERTIFICATE\-\-\-\-\-
2557 
2558 encoded\ certificate\ goes\ here.
2559 
2560 \-\-\-\-\-END\ CERTIFICATE\-\-\-\-\-
2561 \f[R]
2562 .fi
2563 .RE
2564 .TP
2565 .B X.500 Distinguished Names
2566 X.500 Distinguished Names are used to identify entities, such as those
2567 that are named by the \f[CB]subject\f[R] and \f[CB]issuer\f[R] (signer)
2568 fields of X.509 certificates.
2569 The \f[CB]keytool\f[R] command supports the following subparts:
2570 .RS
2571 .IP \[bu] 2
2572 commonName: The common name of a person such as Susan Jones.
2573 .IP \[bu] 2
2574 organizationUnit: The small organization (such as department or
2575 division) name.
2576 For example, Purchasing.
2577 .IP \[bu] 2
2578 localityName: The locality (city) name, for example, Palo Alto.
2579 .IP \[bu] 2
2580 stateName: State or province name, for example, California.
2581 .IP \[bu] 2
2582 country: Two\-letter country code, for example, CH.
2583 .PP
2584 When you supply a distinguished name string as the value of a
2585 \f[CB]\-dname\f[R] option, such as for the \f[CB]\-genkeypair\f[R] command,
2586 the string must be in the following format:
2587 .RS
2588 .PP
2589 \f[CB]CN=cName,\ OU=orgUnit,\ O=org,\ L=city,\ S=state,\ C=countryCode\f[R]
2590 .RE
2591 .PP
2592 All the following items represent actual values and the previous
2593 keywords are abbreviations for the following:
2594 .IP
2595 .nf
2596 \f[CB]
2597 CN=commonName
2598 OU=organizationUnit
2599 O=organizationName
2600 L=localityName
2601 S=stateName
2602 C=country
2603 \f[R]
2604 .fi
2605 .PP
2606 A sample distinguished name string is:
2607 .RS
2608 .PP
2609 \f[CB]CN=Mark\ Smith,\ OU=Java,\ O=Oracle,\ L=Cupertino,\ S=California,\ C=US\f[R]
2610 .RE
2611 .PP
2612 A sample command using such a string is:
2613 .RS
2614 .PP
2615 \f[CB]keytool\ \-genkeypair\ \-dname\ &quot;CN=Mark\ Smith,\ OU=Java,\ O=Oracle,\ L=Cupertino,\ S=California,\ C=US&quot;\ \-alias\ mark\ \-keyalg\ rsa\f[R]
2616 .RE
2617 .PP
2618 Case doesn\[aq]t matter for the keyword abbreviations.
2619 For example, CN, cn, and Cn are all treated the same.
2620 .PP
2621 Order matters; each subcomponent must appear in the designated order.
2622 However, it isn\[aq]t necessary to have all the subcomponents.
2623 You can use a subset, for example:
2624 .RS
2625 .PP
2626 \f[CB]CN=Smith,\ OU=Java,\ O=Oracle,\ C=US\f[R]
2627 .RE
2628 .PP
2629 If a distinguished name string value contains a comma, then the comma
2630 must be escaped by a backslash (\\) character when you specify the
2631 string on a command line, as in:
2632 .RS
2633 .PP
2634 \f[CB]cn=Jack,\ ou=Java\\,\ Product\ Development,\ o=Oracle,\ c=US\f[R]
2635 .RE
2636 .PP
2637 It is never necessary to specify a distinguished name string on a
2638 command line.
2639 When the distinguished name is needed for a command, but not supplied on
2640 the command line, the user is prompted for each of the subcomponents.
2641 In this case, a comma doesn\[aq]t need to be escaped by a backslash
2642 (\\).
2643 .RE
2644 .SH WARNINGS
2645 .SH IMPORTING TRUSTED CERTIFICATES WARNING
2646 .PP
2647 \f[B]Important\f[R]: Be sure to check a certificate very carefully before
2648 importing it as a trusted certificate.
2649 .PP
2650 \f[B]Windows Example:\f[R]
2651 .PP
2652 View the certificate first with the \f[CB]\-printcert\f[R] command or the
2653 \f[CB]\-importcert\f[R] command without the \f[CB]\-noprompt\f[R] option.
2654 Ensure that the displayed certificate fingerprints match the expected
2655 ones.
2656 For example, suppose someone sends or emails you a certificate that you
2657 put it in a file named \f[CB]\\tmp\\cert\f[R].
2658 Before you consider adding the certificate to your list of trusted
2659 certificates, you can execute a \f[CB]\-printcert\f[R] command to view its
2660 fingerprints, as follows:
2661 .IP
2662 .nf
2663 \f[CB]
2664 \ \ keytool\ \-printcert\ \-file\ \\tmp\\cert
2665 \ \ \ \ Owner:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2666 \ \ \ \ Issuer:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2667 \ \ \ \ Serial\ Number:\ 59092b34
2668 \ \ \ \ Valid\ from:\ Thu\ Jun\ 24\ 18:01:13\ PDT\ 2016\ until:\ Wed\ Jun\ 23\ 17:01:13\ PST\ 2016
2669 \ \ \ \ Certificate\ Fingerprints:
2670 
2671 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-1:\ 20:B6:17:FA:EF:E5:55:8A:D0:71:1F:E8:D6:9D:C0:37:13:0E:5E:FE
2672 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-256:\ 90:7B:70:0A:EA:DC:16:79:92:99:41:FF:8A:FE:EB:90:
2673 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 17:75:E0:90:B2:24:4D:3A:2A:16:A6:E4:11:0F:67:A4
2674 \f[R]
2675 .fi
2676 .PP
<a name="11" id="anc11"></a><span class="line-modified">2677 \f[B]Linux Example:\f[R]</span>
2678 .PP
2679 View the certificate first with the \f[CB]\-printcert\f[R] command or the
2680 \f[CB]\-importcert\f[R] command without the \f[CB]\-noprompt\f[R] option.
2681 Ensure that the displayed certificate fingerprints match the expected
2682 ones.
2683 For example, suppose someone sends or emails you a certificate that you
2684 put it in a file named \f[CB]/tmp/cert\f[R].
2685 Before you consider adding the certificate to your list of trusted
2686 certificates, you can execute a \f[CB]\-printcert\f[R] command to view its
2687 fingerprints, as follows:
2688 .IP
2689 .nf
2690 \f[CB]
2691 \ \ keytool\ \-printcert\ \-file\ /tmp/cert
2692 \ \ \ \ Owner:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2693 \ \ \ \ Issuer:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll
2694 \ \ \ \ Serial\ Number:\ 59092b34
2695 \ \ \ \ Valid\ from:\ Thu\ Jun\ 24\ 18:01:13\ PDT\ 2016\ until:\ Wed\ Jun\ 23\ 17:01:13\ PST\ 2016
2696 \ \ \ \ Certificate\ Fingerprints:
2697 
2698 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-1:\ 20:B6:17:FA:EF:E5:55:8A:D0:71:1F:E8:D6:9D:C0:37:13:0E:5E:FE
2699 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-256:\ 90:7B:70:0A:EA:DC:16:79:92:99:41:FF:8A:FE:EB:90:
2700 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 17:75:E0:90:B2:24:4D:3A:2A:16:A6:E4:11:0F:67:A4
2701 \f[R]
2702 .fi
2703 .PP
2704 Then call or otherwise contact the person who sent the certificate and
2705 compare the fingerprints that you see with the ones that they show.
2706 Only when the fingerprints are equal is it guaranteed that the
2707 certificate wasn\[aq]t replaced in transit with somebody else\[aq]s
2708 certificate such as an attacker\[aq]s certificate.
2709 If such an attack took place, and you didn\[aq]t check the certificate
2710 before you imported it, then you would be trusting anything the attacker
2711 signed, for example, a JAR file with malicious class files inside.
2712 .PP
2713 \f[B]Note:\f[R]
2714 .PP
2715 It isn\[aq]t required that you execute a \f[CB]\-printcert\f[R] command
2716 before importing a certificate.
2717 This is because before you add a certificate to the list of trusted
2718 certificates in the keystore, the \f[CB]\-importcert\f[R] command prints
2719 out the certificate information and prompts you to verify it.
2720 You can then stop the import operation.
2721 However, you can do this only when you call the \f[CB]\-importcert\f[R]
2722 command without the \f[CB]\-noprompt\f[R] option.
2723 If the \f[CB]\-noprompt\f[R] option is specified, then there is no
2724 interaction with the user.
2725 .SH PASSWORDS WARNING
2726 .PP
2727 Most commands that operate on a keystore require the store password.
2728 Some commands require a private/secret key password.
2729 Passwords can be specified on the command line in the
2730 \f[CB]\-storepass\f[R] and \f[CB]\-keypass\f[R] options.
2731 However, a password shouldn\[aq]t be specified on a command line or in a
2732 script unless it is for testing, or you are on a secure system.
2733 When you don\[aq]t specify a required password option on a command line,
2734 you are prompted for it.
2735 .SH CERTIFICATE CONFORMANCE WARNING
2736 .PP
2737 \f[B]Internet X.509 Public Key Infrastructure Certificate and
2738 Certificate Revocation List (CRL) Profile\f[R]
2739 [https://tools.ietf.org/rfc/rfc5280.txt] defined a profile on conforming
2740 X.509 certificates, which includes what values and value combinations
2741 are valid for certificate fields and extensions.
2742 .PP
2743 The \f[CB]keytool\f[R] command doesn\[aq]t enforce all of these rules so
2744 it can generate certificates that don\[aq]t conform to the standard,
2745 such as self\-signed certificates that would be used for internal
2746 testing purposes.
2747 Certificates that don\[aq]t conform to the standard might be rejected by
<a name="12" id="anc12"></a><span class="line-modified">2748 the JDK or other applications.</span>
2749 Users should ensure that they provide the correct options for
2750 \f[CB]\-dname\f[R], \f[CB]\-ext\f[R], and so on.
2751 .SH IMPORT A NEW TRUSTED CERTIFICATE
2752 .PP
2753 Before you add the certificate to the keystore, the \f[CB]keytool\f[R]
2754 command verifies it by attempting to construct a chain of trust from
2755 that certificate to a self\-signed certificate (belonging to a root CA),
2756 using trusted certificates that are already available in the keystore.
2757 .PP
2758 If the \f[CB]\-trustcacerts\f[R] option was specified, then additional
2759 certificates are considered for the chain of trust, namely the
2760 certificates in a file named \f[CB]cacerts\f[R].
2761 .PP
2762 If the \f[CB]keytool\f[R] command fails to establish a trust path from the
2763 certificate to be imported up to a self\-signed certificate (either from
2764 the keystore or the \f[CB]cacerts\f[R] file), then the certificate
2765 information is printed, and the user is prompted to verify it by
2766 comparing the displayed certificate fingerprints with the fingerprints
2767 obtained from some other (trusted) source of information, which might be
2768 the certificate owner.
2769 Be very careful to ensure the certificate is valid before importing it
2770 as a trusted certificate.
2771 The user then has the option of stopping the import operation.
2772 If the \f[CB]\-noprompt\f[R] option is specified, then there is no
2773 interaction with the user.
2774 .SH IMPORT A CERTIFICATE REPLY
2775 .PP
2776 When you import a certificate reply, the certificate reply is validated
2777 with trusted certificates from the keystore, and optionally, the
2778 certificates configured in the \f[CB]cacerts\f[R] keystore file when the
2779 \f[CB]\-trustcacerts\f[R] option is specified.
2780 .PP
2781 The methods of determining whether the certificate reply is trusted are
2782 as follows:
2783 .IP \[bu] 2
2784 If the reply is a single X.509 certificate, then the \f[CB]keytool\f[R]
2785 command attempts to establish a trust chain, starting at the certificate
2786 reply and ending at a self\-signed certificate (belonging to a root CA).
2787 The certificate reply and the hierarchy of certificates is used to
2788 authenticate the certificate reply from the new certificate chain of
2789 aliases.
2790 If a trust chain can\[aq]t be established, then the certificate reply
2791 isn\[aq]t imported.
2792 In this case, the \f[CB]keytool\f[R] command doesn\[aq]t print the
2793 certificate and prompt the user to verify it, because it is very
2794 difficult for a user to determine the authenticity of the certificate
2795 reply.
2796 .IP \[bu] 2
2797 If the reply is a PKCS #7 formatted certificate chain or a sequence of
2798 X.509 certificates, then the chain is ordered with the user certificate
2799 first followed by zero or more CA certificates.
2800 If the chain ends with a self\-signed root CA certificate and
2801 the\f[CB]\-trustcacerts\f[R] option was specified, the \f[CB]keytool\f[R]
2802 command attempts to match it with any of the trusted certificates in the
2803 keystore or the \f[CB]cacerts\f[R] keystore file.
2804 If the chain doesn\[aq]t end with a self\-signed root CA certificate and
2805 the \f[CB]\-trustcacerts\f[R] option was specified, the \f[CB]keytool\f[R]
2806 command tries to find one from the trusted certificates in the keystore
2807 or the \f[CB]cacerts\f[R] keystore file and add it to the end of the
2808 chain.
2809 If the certificate isn\[aq]t found and the \f[CB]\-noprompt\f[R] option
2810 isn\[aq]t specified, the information of the last certificate in the
2811 chain is printed, and the user is prompted to verify it.
2812 .PP
2813 If the public key in the certificate reply matches the user\[aq]s public
2814 key already stored with \f[CB]alias\f[R], then the old certificate chain
2815 is replaced with the new certificate chain in the reply.
2816 The old chain can only be replaced with a valid \f[CB]keypass\f[R], and so
2817 the password used to protect the private key of the entry is supplied.
2818 If no password is provided, and the private key password is different
2819 from the keystore password, the user is prompted for it.
2820 .PP
2821 This command was named \f[CB]\-import\f[R] in earlier releases.
2822 This old name is still supported in this release.
2823 The new name, \f[CB]\-importcert\f[R], is preferred.
<a name="13" id="anc13"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="13" type="hidden" />
</body>
</html>