<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/services/heapDumper.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="attachListener.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="threadService.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/services/heapDumper.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 828,11 ***</span>
    }
  }
  
  // returns the size of the instance of the given class
  u4 DumperSupport::instance_size(Klass* k) {
<span class="line-removed">-   HandleMark hm;</span>
    InstanceKlass* ik = InstanceKlass::cast(k);
    u4 size = 0;
  
    for (FieldStream fld(ik, false, false); !fld.eos(); fld.next()) {
      if (!fld.access_flags().is_static()) {
<span class="line-new-header">--- 828,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 841,11 ***</span>
    }
    return size;
  }
  
  u4 DumperSupport::get_static_fields_size(InstanceKlass* ik, u2&amp; field_count) {
<span class="line-removed">-   HandleMark hm;</span>
    field_count = 0;
    u4 size = 0;
  
    for (FieldStream fldc(ik, true, true); !fldc.eos(); fldc.next()) {
      if (fldc.access_flags().is_static()) {
<span class="line-new-header">--- 840,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 884,11 ***</span>
    return size + field_count * (sizeof(address) + 1);
  }
  
  // dumps static fields of the given class
  void DumperSupport::dump_static_fields(DumpWriter* writer, Klass* k) {
<span class="line-removed">-   HandleMark hm;</span>
    InstanceKlass* ik = InstanceKlass::cast(k);
  
    // dump the field descriptors and raw values
    for (FieldStream fld(ik, true, true); !fld.eos(); fld.next()) {
      if (fld.access_flags().is_static()) {
<span class="line-new-header">--- 882,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 928,11 ***</span>
    }
  }
  
  // dump the raw values of the instance fields of the given object
  void DumperSupport::dump_instance_fields(DumpWriter* writer, oop o) {
<span class="line-removed">-   HandleMark hm;</span>
    InstanceKlass* ik = InstanceKlass::cast(o-&gt;klass());
  
    for (FieldStream fld(ik, false, false); !fld.eos(); fld.next()) {
      if (!fld.access_flags().is_static()) {
        Symbol* sig = fld.signature();
<span class="line-new-header">--- 925,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 941,11 ***</span>
    }
  }
  
  // dumps the definition of the instance fields for a given class
  u2 DumperSupport::get_instance_fields_count(InstanceKlass* ik) {
<span class="line-removed">-   HandleMark hm;</span>
    u2 field_count = 0;
  
    for (FieldStream fldc(ik, true, true); !fldc.eos(); fldc.next()) {
      if (!fldc.access_flags().is_static()) field_count++;
    }
<span class="line-new-header">--- 937,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 953,11 ***</span>
    return field_count;
  }
  
  // dumps the definition of the instance fields for a given class
  void DumperSupport::dump_instance_field_descriptors(DumpWriter* writer, Klass* k) {
<span class="line-removed">-   HandleMark hm;</span>
    InstanceKlass* ik = InstanceKlass::cast(k);
  
    // dump the field descriptors
    for (FieldStream fld(ik, true, true); !fld.eos(); fld.next()) {
      if (!fld.access_flags().is_static()) {
<span class="line-new-header">--- 948,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1775,11 ***</span>
  // records as we go. Once that is done we write records for some of the GC
  // roots.
  
  void VM_HeapDumper::doit() {
  
<span class="line-removed">-   HandleMark hm;</span>
    CollectedHeap* ch = Universe::heap();
  
    ch-&gt;ensure_parsability(false); // must happen, even if collection does
                                   // not happen (e.g. due to GCLocker)
  
<span class="line-new-header">--- 1769,10 ---</span>
</pre>
<center><a href="attachListener.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="threadService.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>