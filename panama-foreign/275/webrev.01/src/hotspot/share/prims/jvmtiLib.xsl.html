<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New src/hotspot/share/prims/jvmtiLib.xsl</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
  <body>
    <pre>
   1 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
   2 &lt;!--
   3 
   4  Copyright (c) 2002, 2020, Oracle and/or its affiliates. All rights reserved.
   5  DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   6 
   7  This code is free software; you can redistribute it and/or modify it
   8  under the terms of the GNU General Public License version 2 only, as
   9  published by the Free Software Foundation.
  10 
  11  This code is distributed in the hope that it will be useful, but WITHOUT
  12  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  version 2 for more details (a copy is included in the LICENSE file that
  15  accompanied this code).
  16 
  17  You should have received a copy of the GNU General Public License version
  18  2 along with this work; if not, write to the Free Software Foundation,
  19  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20 
  21  Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  or visit www.oracle.com if you need additional information or have any
  23  questions.
  24   
  25 --&gt;
  26 
  27 &lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
  28                 version=&quot;1.0&quot;&gt;
  29 
  30   &lt;xsl:param name=&quot;majorversion&quot;&gt;&lt;/xsl:param&gt;
  31 
  32   &lt;xsl:template name=&quot;microversion&quot;&gt;
  33     &lt;!-- Now microversion is always 0 --&gt;
  34     &lt;xsl:text&gt;0&lt;/xsl:text&gt;
  35   &lt;/xsl:template&gt;
  36 
  37   &lt;xsl:template name=&quot;showbasicversion&quot;&gt;
  38     &lt;xsl:value-of select=&quot;$majorversion&quot;/&gt;
  39     &lt;!-- Now minorversion is always 0 --&gt;
  40     &lt;xsl:text&gt;.0&lt;/xsl:text&gt;
  41   &lt;/xsl:template&gt;
  42 
  43   &lt;xsl:template name=&quot;showversion&quot;&gt;
  44     &lt;xsl:call-template name=&quot;showbasicversion&quot;/&gt;
  45     &lt;xsl:text&gt;.&lt;/xsl:text&gt;
  46     &lt;xsl:call-template name=&quot;microversion&quot;/&gt;
  47   &lt;/xsl:template&gt;
  48 
  49   &lt;xsl:variable name=&quot;GPL_header&quot;&gt;
  50     &lt;!-- The Copyright comment from jvmti.xml --&gt;
  51     &lt;xsl:value-of select=&quot;/comment()[position()=1]&quot;/&gt;
  52   &lt;/xsl:variable&gt;
  53 
  54   &lt;xsl:variable name=&quot;GPL_CP_header_body&quot;&gt;
  55     &lt;xsl:text&gt; * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.&amp;#xA;&lt;/xsl:text&gt;
  56     &lt;xsl:text&gt; *&amp;#xA;&lt;/xsl:text&gt;
  57     &lt;xsl:text&gt; * This code is free software; you can redistribute it and/or modify it&amp;#xA;&lt;/xsl:text&gt;
  58     &lt;xsl:text&gt; * under the terms of the GNU General Public License version 2 only, as&amp;#xA;&lt;/xsl:text&gt;
  59     &lt;xsl:text&gt; * published by the Free Software Foundation.  Oracle designates this&amp;#xA;&lt;/xsl:text&gt;
  60     &lt;xsl:text&gt; * particular file as subject to the &quot;Classpath&quot; exception as provided&amp;#xA;&lt;/xsl:text&gt;
  61     &lt;xsl:text&gt; * by Oracle in the LICENSE file that accompanied this code.&amp;#xA;&lt;/xsl:text&gt;
  62     &lt;xsl:text&gt; *&amp;#xA;&lt;/xsl:text&gt;
  63     &lt;xsl:text&gt; * This code is distributed in the hope that it will be useful, but WITHOUT&amp;#xA;&lt;/xsl:text&gt;
  64     &lt;xsl:text&gt; * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or&amp;#xA;&lt;/xsl:text&gt;
  65     &lt;xsl:text&gt; * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License&amp;#xA;&lt;/xsl:text&gt;
  66     &lt;xsl:text&gt; * version 2 for more details (a copy is included in the LICENSE file that&amp;#xA;&lt;/xsl:text&gt;
  67     &lt;xsl:text&gt; * accompanied this code).&amp;#xA;&lt;/xsl:text&gt;
  68     &lt;xsl:text&gt; *&amp;#xA;&lt;/xsl:text&gt;
  69     &lt;xsl:text&gt; * You should have received a copy of the GNU General Public License version&amp;#xA;&lt;/xsl:text&gt;
  70     &lt;xsl:text&gt; * 2 along with this work; if not, write to the Free Software Foundation,&amp;#xA;&lt;/xsl:text&gt;
  71     &lt;xsl:text&gt; * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.&amp;#xA;&lt;/xsl:text&gt;
  72     &lt;xsl:text&gt; *&amp;#xA;&lt;/xsl:text&gt;
  73     &lt;xsl:text&gt; * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA&amp;#xA;&lt;/xsl:text&gt;
  74     &lt;xsl:text&gt; * or visit www.oracle.com if you need additional information or have any&amp;#xA;&lt;/xsl:text&gt;
  75     &lt;xsl:text&gt; * questions.&amp;#xA;&lt;/xsl:text&gt;
  76   &lt;/xsl:variable&gt;
  77 
  78   &lt;xsl:template name=&quot;copyrightComment&quot;&gt;
  79     &lt;xsl:text&gt;/*&lt;/xsl:text&gt;
  80     &lt;!-- The Copyright comment from jvmti.xml --&gt;
  81     &lt;xsl:value-of select=&quot;$GPL_header&quot;/&gt;
  82     &lt;xsl:text&gt; */&amp;#xA;&amp;#xA;&lt;/xsl:text&gt;
  83   &lt;/xsl:template&gt;
  84 
  85   &lt;xsl:template name=&quot;GPL_CP_copyrightComment&quot;&gt;
  86     &lt;xsl:text&gt;/*&amp;#xA; *&lt;/xsl:text&gt;
  87     &lt;!-- The Copyright year from jvmti.xml --&gt;
  88     &lt;xsl:value-of select=&quot;substring-after(substring-before($GPL_header, &#39; DO NOT ALTER&#39;), &#39;&amp;#xA;&#39;)&quot;/&gt;
  89     &lt;!-- The GPL+CP Copyright header body --&gt;
  90     &lt;xsl:value-of select=&quot;$GPL_CP_header_body&quot;/&gt;
  91     &lt;xsl:text&gt; */&amp;#xA;&amp;#xA;&lt;/xsl:text&gt;
  92   &lt;/xsl:template&gt;
  93 
  94   &lt;xsl:template name=&quot;include_GPL_CP_Header&quot;&gt;
  95     &lt;xsl:call-template name=&quot;GPL_CP_copyrightComment&quot;/&gt;
  96     &lt;xsl:text&gt; /* AUTOMATICALLY GENERATED FILE - DO NOT EDIT */&amp;#xA;&lt;/xsl:text&gt;    
  97   &lt;/xsl:template&gt;
  98 
  99   &lt;xsl:template name=&quot;includeHeader&quot;&gt;
 100     &lt;xsl:call-template name=&quot;copyrightComment&quot;/&gt;
 101     &lt;xsl:text&gt; /* AUTOMATICALLY GENERATED FILE - DO NOT EDIT */&amp;#xA;&lt;/xsl:text&gt;    
 102   &lt;/xsl:template&gt;
 103 
 104   &lt;xsl:template name=&quot;sourceHeader&quot;&gt;
 105     &lt;xsl:call-template name=&quot;copyrightComment&quot;/&gt;
 106     &lt;xsl:text&gt; // AUTOMATICALLY GENERATED FILE - DO NOT EDIT&amp;#xA;&lt;/xsl:text&gt;    
 107   &lt;/xsl:template&gt;
 108 
 109 
 110 &lt;xsl:template match=&quot;parameters&quot; mode=&quot;signature&quot;&gt;
 111   &lt;xsl:param name=&quot;comma&quot;&gt;
 112     &lt;xsl:text&gt;,
 113             &lt;/xsl:text&gt;
 114   &lt;/xsl:param&gt;
 115   &lt;xsl:if test=&quot;count(param) != 0&quot;&gt;
 116     &lt;xsl:value-of select=&quot;$comma&quot;/&gt;
 117   &lt;/xsl:if&gt;
 118   &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;signaturenoleadcomma&quot;&gt;
 119     &lt;xsl:with-param name=&quot;comma&quot; select=&quot;$comma&quot;/&gt;
 120   &lt;/xsl:apply-templates&gt;
 121 &lt;/xsl:template&gt;
 122 
 123 
 124 &lt;xsl:template match=&quot;parameters&quot; mode=&quot;signaturenoleadcomma&quot;&gt;
 125   &lt;xsl:param name=&quot;comma&quot;&gt;
 126     &lt;xsl:text&gt;,
 127             &lt;/xsl:text&gt;
 128   &lt;/xsl:param&gt;
 129   &lt;xsl:variable name=&quot;length&quot; select=&quot;count(param)&quot;/&gt;
 130   &lt;xsl:for-each select=&quot;param&quot;&gt;
 131     &lt;xsl:variable name=&quot;separator&quot;&gt;
 132         &lt;xsl:choose&gt;
 133           &lt;xsl:when test=&quot;position()=$length&quot;&gt;
 134             &lt;xsl:text&gt;&lt;/xsl:text&gt;
 135           &lt;/xsl:when&gt;
 136           &lt;xsl:otherwise&gt;
 137             &lt;xsl:value-of select=&quot;$comma&quot;/&gt;
 138           &lt;/xsl:otherwise&gt;
 139         &lt;/xsl:choose&gt;
 140     &lt;/xsl:variable&gt;
 141     &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;signature&quot;&gt;
 142       &lt;xsl:with-param name=&quot;comma&quot; select=&quot;$separator&quot;/&gt;
 143     &lt;/xsl:apply-templates&gt;
 144   &lt;/xsl:for-each&gt;
 145 &lt;/xsl:template&gt;
 146 
 147 
 148 &lt;!-- remove jclass parameters that are jclass/jmethodID pairs.
 149      since the jclass was removed in JVMTI.
 150 --&gt;
 151 &lt;xsl:template match=&quot;param&quot; mode=&quot;signature&quot;&gt;
 152   &lt;xsl:param name=&quot;comma&quot;/&gt;
 153   &lt;xsl:variable name=&quot;id&quot; select=&quot;@id&quot;/&gt;
 154   &lt;xsl:for-each select=&quot;child::*[position()=1]&quot;&gt;
 155     &lt;xsl:if test=&quot;count(@method)=0&quot;&gt;
 156       &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;signature&quot;/&gt;
 157       &lt;xsl:text&gt; &lt;/xsl:text&gt;
 158       &lt;xsl:value-of select=&quot;$id&quot;/&gt;
 159       &lt;xsl:value-of select=&quot;$comma&quot;/&gt;
 160     &lt;/xsl:if&gt;
 161   &lt;/xsl:for-each&gt;
 162 &lt;/xsl:template&gt;
 163 
 164 
 165 &lt;xsl:template match=&quot;field&quot; mode=&quot;signature&quot;&gt;
 166   &lt;xsl:text&gt;    &lt;/xsl:text&gt;
 167   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt;
 168   &lt;xsl:text&gt; &lt;/xsl:text&gt;
 169   &lt;xsl:value-of select=&quot;@id&quot;/&gt;
 170   &lt;xsl:text&gt;;
 171 &lt;/xsl:text&gt;
 172 &lt;/xsl:template&gt;
 173 
 174 &lt;xsl:template match=&quot;nullok&quot; mode=&quot;funcdescription&quot;&gt;
 175   If
 176   &lt;code&gt;
 177     &lt;xsl:value-of select=&quot;../../@id&quot;/&gt;
 178   &lt;/code&gt;
 179   is
 180   &lt;code&gt;NULL&lt;/code&gt;, &lt;xsl:apply-templates/&gt;.
 181 &lt;/xsl:template&gt;
 182 
 183 &lt;xsl:template match=&quot;vmbuf|allocfieldbuf|struct&quot; mode=&quot;funcdescription&quot;&gt;
 184   &lt;xsl:message terminate=&quot;yes&quot;&gt;
 185     vmbuf|allocfieldbuf|struct as type of function parameter
 186   &lt;/xsl:message&gt;
 187 &lt;/xsl:template&gt;
 188 
 189 &lt;xsl:template match=&quot;ptrtype&quot; mode=&quot;funcdescription&quot;&gt;
 190   &lt;div class=&quot;sep&quot;/&gt;
 191   &lt;xsl:apply-templates select=&quot;nullok&quot; mode=&quot;funcdescription&quot;/&gt;
 192 &lt;/xsl:template&gt;
 193 
 194 &lt;xsl:template match=&quot;inptr&quot; mode=&quot;funcdescription&quot;&gt;
 195   &lt;div class=&quot;sep&quot;/&gt;
 196   &lt;xsl:variable name=&quot;child&quot; select=&quot;child::*[position()=1]&quot;/&gt;
 197   &lt;xsl:text&gt;Agent passes in a pointer&lt;/xsl:text&gt;
 198   &lt;xsl:if test=&quot;name($child)!=&#39;void&#39;&quot;&gt;
 199     &lt;xsl:text&gt; to &lt;/xsl:text&gt;
 200     &lt;code&gt;
 201       &lt;xsl:apply-templates select=&quot;$child&quot; mode=&quot;signature&quot;/&gt; 
 202     &lt;/code&gt;
 203   &lt;/xsl:if&gt;
 204   &lt;xsl:text&gt;. &lt;/xsl:text&gt;
 205   &lt;xsl:apply-templates select=&quot;nullok&quot; mode=&quot;funcdescription&quot;/&gt;
 206 &lt;/xsl:template&gt;
 207 
 208 &lt;xsl:template match=&quot;inbuf&quot; mode=&quot;funcdescription&quot;&gt;
 209   &lt;div class=&quot;sep&quot;/&gt;
 210   &lt;xsl:variable name=&quot;child&quot; select=&quot;child::*[position()=1]&quot;/&gt;
 211   &lt;xsl:text&gt;Agent passes in &lt;/xsl:text&gt;
 212   &lt;xsl:choose&gt;
 213     &lt;xsl:when test=&quot;name($child)=&#39;void&#39;&quot;&gt;
 214       &lt;xsl:text&gt; a pointer&lt;/xsl:text&gt;
 215     &lt;/xsl:when&gt;
 216     &lt;xsl:otherwise&gt;
 217       &lt;xsl:text&gt; an array of &lt;/xsl:text&gt;
 218       &lt;xsl:if test=&quot;count(@incount)=1 and @incount!=&#39;&#39;&quot;&gt;
 219         &lt;code&gt;
 220           &lt;xsl:value-of select=&quot;@incount&quot;/&gt;
 221         &lt;/code&gt;
 222         &lt;xsl:text&gt; elements of &lt;/xsl:text&gt;
 223       &lt;/xsl:if&gt;
 224       &lt;code&gt;
 225         &lt;xsl:apply-templates select=&quot;$child&quot; mode=&quot;signature&quot;/&gt; 
 226       &lt;/code&gt;
 227     &lt;/xsl:otherwise&gt;
 228   &lt;/xsl:choose&gt;
 229   &lt;xsl:text&gt;. &lt;/xsl:text&gt;
 230   &lt;xsl:apply-templates select=&quot;nullok&quot; mode=&quot;funcdescription&quot;/&gt;
 231 &lt;/xsl:template&gt;
 232 
 233 &lt;xsl:template match=&quot;outptr&quot; mode=&quot;funcdescription&quot;&gt;
 234   &lt;div class=&quot;sep&quot;/&gt;
 235   &lt;xsl:text&gt;Agent passes a pointer to a &lt;/xsl:text&gt;
 236   &lt;code&gt;
 237     &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt; 
 238   &lt;/code&gt;
 239   &lt;xsl:text&gt;. &lt;/xsl:text&gt;
 240   &lt;xsl:text&gt;On return, the &lt;/xsl:text&gt;
 241   &lt;code&gt;
 242     &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt; 
 243   &lt;/code&gt;
 244   &lt;xsl:text&gt; has been set. &lt;/xsl:text&gt;
 245   &lt;xsl:apply-templates select=&quot;nullok&quot; mode=&quot;funcdescription&quot;/&gt;
 246   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;returndescription&quot;/&gt;
 247 &lt;/xsl:template&gt;
 248 
 249 &lt;xsl:template match=&quot;allocbuf&quot; mode=&quot;funcdescription&quot;&gt;
 250   &lt;div class=&quot;sep&quot;/&gt;
 251   &lt;xsl:text&gt;Agent passes a pointer to a &lt;/xsl:text&gt;
 252   &lt;code&gt;
 253     &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt; 
 254     &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 255   &lt;/code&gt;
 256   &lt;xsl:text&gt;. &lt;/xsl:text&gt;
 257   &lt;xsl:text&gt;On return, the &lt;/xsl:text&gt;
 258   &lt;code&gt;
 259     &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt; 
 260     &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 261   &lt;/code&gt;
 262   &lt;xsl:text&gt; points to a newly allocated array&lt;/xsl:text&gt;
 263   &lt;xsl:choose&gt;
 264     &lt;xsl:when test=&quot;count(@outcount)=1 and @outcount!=&#39;&#39;&quot;&gt;
 265       &lt;xsl:text&gt; of size &lt;/xsl:text&gt;
 266       &lt;code&gt;
 267         &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 268         &lt;xsl:value-of select=&quot;@outcount&quot;/&gt;
 269       &lt;/code&gt;
 270     &lt;/xsl:when&gt;
 271     &lt;xsl:otherwise&gt;
 272       &lt;xsl:if test=&quot;count(@incount)=1 and @incount!=&#39;&#39;&quot;&gt;
 273         &lt;xsl:text&gt; of size &lt;/xsl:text&gt;
 274         &lt;code&gt;
 275           &lt;xsl:value-of select=&quot;@incount&quot;/&gt;
 276         &lt;/code&gt;
 277       &lt;/xsl:if&gt;
 278     &lt;/xsl:otherwise&gt;
 279   &lt;/xsl:choose&gt;
 280   &lt;xsl:text&gt;.  The array should be freed with &lt;/xsl:text&gt;
 281   &lt;a href=&quot;#Deallocate&quot;&gt;&lt;code&gt;Deallocate&lt;/code&gt;&lt;/a&gt;
 282   &lt;xsl:text&gt;. &lt;/xsl:text&gt;
 283   &lt;xsl:apply-templates select=&quot;nullok&quot; mode=&quot;funcdescription&quot;/&gt;
 284   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;returndescription&quot;&gt;
 285     &lt;xsl:with-param name=&quot;plural&quot; select=&quot;&#39;plural&#39;&quot;/&gt;
 286   &lt;/xsl:apply-templates&gt;
 287 &lt;/xsl:template&gt;
 288 
 289 &lt;xsl:template match=&quot;allocallocbuf&quot; mode=&quot;funcdescription&quot;&gt;
 290   &lt;div class=&quot;sep&quot;/&gt;
 291   &lt;xsl:text&gt;Agent passes a pointer to a &lt;/xsl:text&gt;
 292   &lt;code&gt;
 293     &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt; 
 294     &lt;xsl:text&gt;**&lt;/xsl:text&gt;
 295   &lt;/code&gt;
 296   &lt;xsl:text&gt;. &lt;/xsl:text&gt;
 297   &lt;xsl:text&gt;On return, the &lt;/xsl:text&gt;
 298   &lt;code&gt;
 299     &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt; 
 300     &lt;xsl:text&gt;**&lt;/xsl:text&gt;
 301   &lt;/code&gt;
 302   &lt;xsl:text&gt; points to a newly allocated array&lt;/xsl:text&gt;
 303   &lt;xsl:choose&gt;
 304     &lt;xsl:when test=&quot;count(@outcount)=1 and @outcount!=&#39;&#39;&quot;&gt;
 305       &lt;xsl:text&gt; of size &lt;/xsl:text&gt;
 306       &lt;code&gt;
 307         &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 308         &lt;xsl:value-of select=&quot;@outcount&quot;/&gt;
 309       &lt;/code&gt;
 310     &lt;/xsl:when&gt;
 311     &lt;xsl:otherwise&gt;
 312       &lt;xsl:if test=&quot;count(@incount)=1 and @incount!=&#39;&#39;&quot;&gt;
 313         &lt;xsl:text&gt; of size &lt;/xsl:text&gt;
 314         &lt;code&gt;
 315           &lt;xsl:value-of select=&quot;@incount&quot;/&gt;
 316         &lt;/code&gt;
 317       &lt;/xsl:if&gt;
 318     &lt;/xsl:otherwise&gt;
 319   &lt;/xsl:choose&gt;
 320   &lt;xsl:text&gt;, each element of which is also newly allocated.
 321   The array should be freed with &lt;/xsl:text&gt;
 322   &lt;a href=&quot;#Deallocate&quot;&gt;&lt;code&gt;Deallocate&lt;/code&gt;&lt;/a&gt;
 323   &lt;xsl:text&gt;. 
 324   Each of the elements should be freed with &lt;/xsl:text&gt;
 325   &lt;a href=&quot;#Deallocate&quot;&gt;&lt;code&gt;Deallocate&lt;/code&gt;&lt;/a&gt;
 326   &lt;xsl:text&gt;. &lt;/xsl:text&gt;
 327   &lt;xsl:apply-templates select=&quot;nullok&quot; mode=&quot;funcdescription&quot;/&gt;
 328   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;returndescription&quot;&gt;
 329     &lt;xsl:with-param name=&quot;plural&quot; select=&quot;&#39;plural&#39;&quot;/&gt;
 330   &lt;/xsl:apply-templates&gt;
 331 &lt;/xsl:template&gt;
 332 
 333 &lt;xsl:template match=&quot;outbuf&quot; mode=&quot;funcdescription&quot;&gt;
 334   &lt;div class=&quot;sep&quot;/&gt;
 335   &lt;xsl:text&gt;Agent passes an array &lt;/xsl:text&gt;
 336   &lt;xsl:if test=&quot;count(@incount)=1 and @incount!=&#39;&#39;&quot;&gt;
 337     &lt;xsl:text&gt;large enough to hold &lt;/xsl:text&gt;
 338     &lt;code&gt;
 339       &lt;xsl:value-of select=&quot;@incount&quot;/&gt;
 340     &lt;/code&gt;
 341     &lt;xsl:text&gt; elements &lt;/xsl:text&gt;
 342   &lt;/xsl:if&gt;
 343   &lt;xsl:text&gt;of &lt;/xsl:text&gt;
 344   &lt;code&gt;
 345     &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt; 
 346   &lt;/code&gt;
 347   &lt;xsl:text&gt;. The incoming values of the elements of the array are ignored. &lt;/xsl:text&gt;
 348   &lt;xsl:text&gt;On return, &lt;/xsl:text&gt;
 349   &lt;xsl:if test=&quot;count(@outcount)=1 and @outcount!=&#39;&#39;&quot;&gt;
 350     &lt;code&gt;
 351       &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 352       &lt;xsl:value-of select=&quot;@outcount&quot;/&gt;
 353     &lt;/code&gt;
 354     &lt;xsl:text&gt; of &lt;/xsl:text&gt;
 355   &lt;/xsl:if&gt;
 356   &lt;xsl:text&gt;the elements are set. &lt;/xsl:text&gt;
 357   &lt;xsl:apply-templates select=&quot;nullok&quot; mode=&quot;funcdescription&quot;/&gt;
 358   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;returndescription&quot;&gt;
 359     &lt;xsl:with-param name=&quot;plural&quot; select=&quot;&#39;plural&#39;&quot;/&gt;
 360   &lt;/xsl:apply-templates&gt;
 361 &lt;/xsl:template&gt;
 362 
 363 &lt;xsl:template match=&quot;agentbuf&quot; mode=&quot;funcdescription&quot;&gt;
 364   &lt;div class=&quot;sep&quot;/&gt;
 365   &lt;xsl:apply-templates select=&quot;nullok&quot; mode=&quot;funcdescription&quot;/&gt;
 366   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;returndescription&quot;&gt;
 367     &lt;xsl:with-param name=&quot;plural&quot; select=&quot;&#39;plural&#39;&quot;/&gt;
 368   &lt;/xsl:apply-templates&gt;
 369 &lt;/xsl:template&gt;
 370 
 371 &lt;xsl:template match=&quot;jmethodID|jfieldID|jframeID|jrawMonitorID|jclass|jobject|jvalue|jthreadGroup|enum|jint|jchar|jlong|jfloat|jdouble|jlocation|jboolean|char|uchar|size_t|void|varargs|struct&quot; mode=&quot;funcdescription&quot;&gt;
 372 &lt;/xsl:template&gt;
 373 
 374 &lt;xsl:template match=&quot;jthread&quot; mode=&quot;funcdescription&quot;&gt;
 375   &lt;xsl:if test=&quot;count(@null)!=0&quot;&gt;
 376     If
 377     &lt;code&gt;
 378       &lt;xsl:value-of select=&quot;../@id&quot;/&gt;
 379     &lt;/code&gt;
 380     is
 381     &lt;code&gt;NULL&lt;/code&gt;, the current thread is used.
 382   &lt;/xsl:if&gt;
 383 &lt;/xsl:template&gt;
 384 
 385 &lt;xsl:template match=&quot;jmethodID|jfieldID|jframeID|jrawMonitorID|enum|jint|jchar|jlong|jfloat|jdouble|jlocation|jboolean|char|uchar|size_t|void|varargs&quot; mode=&quot;returndescription&quot;&gt;
 386 &lt;/xsl:template&gt;
 387 
 388 &lt;xsl:template match=&quot;struct&quot; mode=&quot;returndescription&quot;&gt;
 389   &lt;xsl:param name=&quot;plural&quot;/&gt;
 390   &lt;xsl:variable name=&quot;structname&quot; select=&quot;.&quot;/&gt;
 391   &lt;xsl:for-each select=&quot;//typedef[@id=$structname]|//uniontypedef[@id=$structname]&quot;&gt;
 392     &lt;xsl:for-each select=&quot;field&quot;&gt;
 393       &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;fieldreturndescription&quot;&gt;
 394         &lt;xsl:with-param name=&quot;plural&quot; select=&quot;$plural&quot;/&gt;
 395       &lt;/xsl:apply-templates&gt;
 396     &lt;/xsl:for-each&gt;
 397   &lt;/xsl:for-each&gt;
 398 &lt;/xsl:template&gt;
 399 
 400 &lt;xsl:template match=&quot;jclass|jthread|jobject|jvalue|jthreadGroup&quot; mode=&quot;returndescription&quot;&gt;
 401   &lt;xsl:param name=&quot;plural&quot;/&gt;
 402   &lt;xsl:text&gt;The object&lt;/xsl:text&gt;
 403   &lt;xsl:if test=&quot;$plural=&#39;plural&#39;&quot;&gt;
 404     &lt;xsl:text&gt;s&lt;/xsl:text&gt;
 405   &lt;/xsl:if&gt;
 406   &lt;xsl:text&gt; returned by &lt;/xsl:text&gt;
 407   &lt;code&gt;
 408     &lt;xsl:value-of select=&quot;../../@id&quot;/&gt;
 409   &lt;/code&gt;
 410   &lt;xsl:choose&gt;    
 411     &lt;xsl:when test=&quot;$plural=&#39;plural&#39;&quot;&gt;
 412       &lt;xsl:text&gt; are JNI local references and must be &lt;/xsl:text&gt;
 413     &lt;/xsl:when&gt;
 414     &lt;xsl:otherwise&gt;
 415       &lt;xsl:text&gt; is a JNI local reference and must be &lt;/xsl:text&gt;
 416     &lt;/xsl:otherwise&gt;
 417   &lt;/xsl:choose&gt;
 418   &lt;a href=&quot;#refs&quot;&gt;managed&lt;/a&gt;.
 419 &lt;/xsl:template&gt;
 420 
 421 &lt;xsl:template match=&quot;outptr|inptr|inbuf|agentbuf|allocbuf|allocallocbuf&quot; mode=&quot;fieldreturndescription&quot;&gt;
 422   &lt;xsl:variable name=&quot;field&quot; select=&quot;ancestor::field&quot;/&gt;
 423   &lt;xsl:message terminate=&quot;yes&quot;&gt;
 424     outptr, allocallocbuf, outbuf, vmbuf, allocbuf, inptr, inbuf or agentbuf as type of returned field:
 425     &lt;xsl:value-of select=&quot;$field/@id&quot;/&gt; of &lt;xsl:value-of select=&quot;$field/../@id&quot;/&gt;
 426   &lt;/xsl:message&gt;
 427 &lt;/xsl:template&gt;
 428 
 429 &lt;xsl:template match=&quot;outbuf&quot; mode=&quot;fieldreturndescription&quot;&gt;
 430   &lt;!-- hand document this special case.
 431   --&gt;
 432 &lt;/xsl:template&gt;
 433 
 434 &lt;xsl:template match=&quot;struct&quot; mode=&quot;fieldreturndescription&quot;&gt;
 435   &lt;xsl:param name=&quot;plural&quot;/&gt;
 436   &lt;xsl:variable name=&quot;structname&quot; select=&quot;.&quot;/&gt;
 437   &lt;xsl:for-each select=&quot;//typedef[@id=$structname]|//uniontypedef[@id=$structname]&quot;&gt;
 438     &lt;xsl:for-each select=&quot;field&quot;&gt;
 439       &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;fieldreturndescription&quot;&gt;
 440         &lt;xsl:with-param name=&quot;plural&quot; select=&quot;$plural&quot;/&gt;
 441       &lt;/xsl:apply-templates&gt;
 442     &lt;/xsl:for-each&gt;
 443   &lt;/xsl:for-each&gt;
 444 &lt;/xsl:template&gt;
 445 
 446 &lt;xsl:template match=&quot;allocfieldbuf&quot; mode=&quot;fieldreturndescription&quot;&gt;
 447   &lt;xsl:param name=&quot;plural&quot;/&gt;
 448   &lt;xsl:variable name=&quot;field&quot; select=&quot;ancestor::field&quot;/&gt;
 449   &lt;xsl:text&gt;The pointer&lt;/xsl:text&gt;
 450   &lt;xsl:if test=&quot;$plural=&#39;plural&#39;&quot;&gt;
 451     &lt;xsl:text&gt;s&lt;/xsl:text&gt;
 452   &lt;/xsl:if&gt;
 453   &lt;xsl:text&gt; returned in the field &lt;/xsl:text&gt;
 454   &lt;code&gt;
 455     &lt;xsl:value-of select=&quot;$field/@id&quot;/&gt;
 456   &lt;/code&gt;
 457   &lt;xsl:text&gt; of &lt;/xsl:text&gt;
 458   &lt;code&gt;
 459     &lt;xsl:value-of select=&quot;$field/../@id&quot;/&gt;
 460   &lt;/code&gt;
 461   &lt;xsl:choose&gt;    
 462     &lt;xsl:when test=&quot;$plural=&#39;plural&#39;&quot;&gt;
 463       &lt;xsl:text&gt; are newly allocated arrays. The arrays&lt;/xsl:text&gt;
 464     &lt;/xsl:when&gt;
 465     &lt;xsl:otherwise&gt;
 466       &lt;xsl:text&gt; is a newly allocated array. The array&lt;/xsl:text&gt;
 467     &lt;/xsl:otherwise&gt;
 468   &lt;/xsl:choose&gt;
 469   &lt;xsl:text&gt; should be freed with &lt;/xsl:text&gt;
 470   &lt;a href=&quot;#Deallocate&quot;&gt;&lt;code&gt;Deallocate&lt;/code&gt;&lt;/a&gt;
 471   &lt;xsl:text&gt;. &lt;/xsl:text&gt;
 472 
 473   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;fieldreturndescription&quot;&gt;
 474     &lt;xsl:with-param name=&quot;plural&quot; select=&quot;&#39;plural&#39;&quot;/&gt;
 475   &lt;/xsl:apply-templates&gt;
 476 &lt;/xsl:template&gt;
 477 
 478 &lt;xsl:template match=&quot;ptrtype|vmbuf|jmethodID|jfieldID|jframeID|jrawMonitorID|enum|jint|jchar|jlong|jfloat|jdouble|jlocation|jboolean|char|uchar|size_t|void&quot; mode=&quot;fieldreturndescription&quot;&gt;
 479 &lt;/xsl:template&gt;
 480 
 481 &lt;xsl:template match=&quot;jclass|jthread|jobject|jvalue|jthreadGroup&quot; mode=&quot;fieldreturndescription&quot;&gt;
 482   &lt;xsl:param name=&quot;plural&quot;/&gt;
 483   &lt;xsl:variable name=&quot;field&quot; select=&quot;ancestor::field&quot;/&gt;
 484   &lt;xsl:text&gt;The object&lt;/xsl:text&gt;
 485   &lt;xsl:if test=&quot;$plural=&#39;plural&#39;&quot;&gt;
 486     &lt;xsl:text&gt;s&lt;/xsl:text&gt;
 487   &lt;/xsl:if&gt;
 488   &lt;xsl:text&gt; returned in the field &lt;/xsl:text&gt;
 489   &lt;code&gt;
 490     &lt;xsl:value-of select=&quot;$field/@id&quot;/&gt;
 491   &lt;/code&gt;
 492   &lt;xsl:text&gt; of &lt;/xsl:text&gt;
 493   &lt;code&gt;
 494     &lt;xsl:value-of select=&quot;$field/../@id&quot;/&gt;
 495   &lt;/code&gt;
 496   &lt;xsl:choose&gt;    
 497     &lt;xsl:when test=&quot;$plural=&#39;plural&#39;&quot;&gt;
 498       &lt;xsl:text&gt; are JNI local references and must be &lt;/xsl:text&gt;
 499     &lt;/xsl:when&gt;
 500     &lt;xsl:otherwise&gt;
 501       &lt;xsl:text&gt; is a JNI local reference and must be &lt;/xsl:text&gt;
 502     &lt;/xsl:otherwise&gt;
 503   &lt;/xsl:choose&gt;
 504   &lt;a href=&quot;#refs&quot;&gt;managed&lt;/a&gt;.
 505 &lt;/xsl:template&gt;
 506 
 507 &lt;xsl:template match=&quot;nullok&quot; mode=&quot;signature&quot;&gt;
 508 &lt;/xsl:template&gt;
 509 
 510 &lt;xsl:template match=&quot;jmethodID|jfieldID|jrawMonitorID|jclass|jthread|jobject|jvalue|jthreadGroup|jint|jchar|jlong|jfloat|jdouble|jlocation|jboolean|char|size_t|void&quot; mode=&quot;signature&quot;&gt;
 511   &lt;xsl:value-of select=&quot;name()&quot;/&gt;
 512 &lt;/xsl:template&gt;
 513 
 514 &lt;xsl:template match=&quot;jframeID&quot; mode=&quot;signature&quot;&gt;
 515   &lt;xsl:text&gt;jint&lt;/xsl:text&gt;
 516 &lt;/xsl:template&gt;
 517 
 518 &lt;xsl:template match=&quot;uchar&quot; mode=&quot;signature&quot;&gt;
 519   &lt;xsl:text&gt;unsigned char&lt;/xsl:text&gt;
 520 &lt;/xsl:template&gt;
 521 
 522 &lt;xsl:template match=&quot;enum|struct&quot; mode=&quot;signature&quot;&gt;
 523   &lt;xsl:value-of select=&quot;.&quot;/&gt;
 524 &lt;/xsl:template&gt;
 525 
 526 &lt;xsl:template match=&quot;varargs&quot; mode=&quot;signature&quot;&gt;
 527 &lt;/xsl:template&gt;
 528 
 529 &lt;xsl:template match=&quot;outptr|outbuf|allocfieldbuf&quot; mode=&quot;signature&quot;&gt;
 530   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt;
 531   &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 532 &lt;/xsl:template&gt;
 533 
 534 &lt;xsl:template match=&quot;ptrtype&quot; mode=&quot;signature&quot;&gt;
 535   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt;
 536 &lt;/xsl:template&gt;
 537 
 538 &lt;xsl:template match=&quot;inptr|inbuf|vmbuf&quot; mode=&quot;signature&quot;&gt;
 539   &lt;xsl:text&gt;const &lt;/xsl:text&gt;
 540   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt;
 541   &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 542 &lt;/xsl:template&gt;
 543 
 544 &lt;xsl:template match=&quot;allocbuf|agentbuf&quot; mode=&quot;signature&quot;&gt;
 545   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt;
 546   &lt;xsl:text&gt;**&lt;/xsl:text&gt;
 547 &lt;/xsl:template&gt;
 548 
 549 &lt;xsl:template match=&quot;allocallocbuf&quot; mode=&quot;signature&quot;&gt;
 550   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;signature&quot;/&gt;
 551   &lt;xsl:text&gt;***&lt;/xsl:text&gt;
 552 &lt;/xsl:template&gt;
 553 
 554 &lt;xsl:template match=&quot;nullok&quot; mode=&quot;link&quot;&gt;
 555 &lt;/xsl:template&gt;
 556 
 557 &lt;xsl:template match=&quot;jmethodID|jfieldID|jrawMonitorID|jclass|jthread|jobject|jvalue|jint|jchar|jlong|jfloat|jdouble|jlocation|jboolean|jthreadGroup&quot; mode=&quot;link&quot;&gt;
 558   &lt;a&gt;
 559     &lt;xsl:attribute name=&quot;href&quot;&gt;
 560       &lt;xsl:text&gt;#&lt;/xsl:text&gt;&lt;xsl:value-of select=&quot;name()&quot;/&gt;
 561     &lt;/xsl:attribute&gt;
 562     &lt;xsl:value-of select=&quot;name()&quot;/&gt;
 563   &lt;/a&gt;
 564 &lt;/xsl:template&gt;
 565 
 566 &lt;xsl:template match=&quot;jframeID&quot; mode=&quot;link&quot;&gt;
 567   &lt;a&gt;
 568     &lt;xsl:attribute name=&quot;href&quot;&gt;
 569       &lt;xsl:text&gt;#jint&lt;/xsl:text&gt;
 570     &lt;/xsl:attribute&gt;
 571     &lt;xsl:text&gt;jint&lt;/xsl:text&gt;
 572   &lt;/a&gt;
 573 &lt;/xsl:template&gt;
 574 
 575 &lt;xsl:template match=&quot;enum|struct&quot; mode=&quot;link&quot;&gt;
 576   &lt;a&gt;
 577     &lt;xsl:attribute name=&quot;href&quot;&gt;
 578       &lt;xsl:text&gt;#&lt;/xsl:text&gt;
 579       &lt;xsl:value-of select=&quot;.&quot;/&gt;
 580     &lt;/xsl:attribute&gt;
 581     &lt;xsl:value-of select=&quot;.&quot;/&gt;
 582   &lt;/a&gt;
 583 &lt;/xsl:template&gt;
 584 
 585 &lt;xsl:template match=&quot;char|size_t|void&quot; mode=&quot;link&quot;&gt;
 586     &lt;xsl:value-of select=&quot;name()&quot;/&gt;
 587 &lt;/xsl:template&gt;
 588 
 589 &lt;xsl:template match=&quot;uchar&quot; mode=&quot;link&quot;&gt;
 590     &lt;xsl:text&gt;unsigned char&lt;/xsl:text&gt;
 591 &lt;/xsl:template&gt;
 592 
 593 &lt;xsl:template match=&quot;varargs&quot; mode=&quot;link&quot;&gt;
 594   &lt;xsl:text&gt;...&lt;/xsl:text&gt;
 595 &lt;/xsl:template&gt;
 596 
 597 &lt;xsl:template match=&quot;ptrtype&quot; mode=&quot;link&quot;&gt;
 598   &lt;xsl:apply-templates mode=&quot;link&quot;/&gt;
 599 &lt;/xsl:template&gt;
 600 
 601 &lt;xsl:template match=&quot;outptr|outbuf|allocfieldbuf&quot; mode=&quot;link&quot;&gt;
 602   &lt;xsl:apply-templates mode=&quot;link&quot;/&gt;
 603   &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 604 &lt;/xsl:template&gt;
 605 
 606 &lt;xsl:template match=&quot;inptr|inbuf|vmbuf&quot; mode=&quot;link&quot;&gt;
 607   &lt;xsl:text&gt;const &lt;/xsl:text&gt;
 608   &lt;xsl:apply-templates mode=&quot;link&quot;/&gt;
 609   &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 610 &lt;/xsl:template&gt;
 611 
 612 &lt;xsl:template match=&quot;allocbuf|agentbuf&quot; mode=&quot;link&quot;&gt;
 613   &lt;xsl:apply-templates mode=&quot;link&quot;/&gt;
 614   &lt;xsl:text&gt;**&lt;/xsl:text&gt;
 615 &lt;/xsl:template&gt;
 616 
 617 &lt;xsl:template match=&quot;allocallocbuf&quot; mode=&quot;link&quot;&gt;
 618   &lt;xsl:apply-templates mode=&quot;link&quot;/&gt;
 619   &lt;xsl:text&gt;***&lt;/xsl:text&gt;
 620 &lt;/xsl:template&gt;
 621 
 622 &lt;xsl:template match=&quot;jmethodID|jfieldID|jframeID|jrawMonitorID|jclass|jobject|jvalue|jthreadGroup|jthread|jint|jchar|jlong|jfloat|jdouble|jlocation|jboolean|char|size_t|void&quot; mode=&quot;btsig&quot;&gt;
 623   &lt;xsl:value-of select=&quot;name()&quot;/&gt;
 624 &lt;/xsl:template&gt;
 625 
 626 &lt;xsl:template match=&quot;uchar&quot; mode=&quot;btsig&quot;&gt;
 627   &lt;xsl:text&gt;unsigned char&lt;/xsl:text&gt;
 628 &lt;/xsl:template&gt;
 629 
 630 &lt;xsl:template match=&quot;enum|struct&quot; mode=&quot;btsig&quot;&gt;
 631   &lt;xsl:value-of select=&quot;.&quot;/&gt;
 632 &lt;/xsl:template&gt;
 633 
 634 &lt;xsl:template match=&quot;outbuf&quot; mode=&quot;btsig&quot;&gt;
 635   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;btsig&quot;/&gt;
 636   &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 637 &lt;/xsl:template&gt;
 638 
 639 &lt;xsl:template name=&quot;gentypedef&quot;&gt;
 640   &lt;xsl:param name=&quot;tdef&quot;/&gt;
 641   &lt;xsl:text&gt;typedef struct {
 642 &lt;/xsl:text&gt;
 643 &lt;xsl:apply-templates select=&quot;$tdef/field&quot; mode=&quot;signature&quot;/&gt;
 644   &lt;xsl:text&gt;} &lt;/xsl:text&gt;
 645   &lt;xsl:value-of select=&quot;$tdef/@id&quot;/&gt;
 646   &lt;xsl:text&gt;;&lt;/xsl:text&gt;
 647 &lt;/xsl:template&gt;
 648 
 649 &lt;xsl:template name=&quot;genuniontypedef&quot;&gt;
 650   &lt;xsl:param name=&quot;tdef&quot;/&gt;
 651   &lt;xsl:text&gt;typedef union {
 652 &lt;/xsl:text&gt;
 653 &lt;xsl:apply-templates select=&quot;$tdef/field&quot; mode=&quot;signature&quot;/&gt;
 654   &lt;xsl:text&gt;} &lt;/xsl:text&gt;
 655   &lt;xsl:value-of select=&quot;$tdef/@id&quot;/&gt;
 656   &lt;xsl:text&gt;;&lt;/xsl:text&gt;
 657 &lt;/xsl:template&gt;
 658 
 659 
 660 &lt;xsl:template match=&quot;capabilitiestypedef&quot; mode=&quot;genstruct&quot;&gt;
 661   &lt;xsl:variable name=&quot;caps&quot; select=&quot;count(capabilityfield)&quot;/&gt;
 662   &lt;xsl:text&gt;typedef struct {
 663 &lt;/xsl:text&gt;
 664   &lt;xsl:apply-templates select=&quot;capabilityfield&quot; mode=&quot;signature&quot;/&gt;
 665   &lt;xsl:variable name=&quot;rem&quot; select=&quot;$caps mod 16&quot;/&gt;
 666   &lt;xsl:if test=&quot;$rem != 0&quot;&gt;
 667     &lt;xsl:text&gt;    unsigned int : &lt;/xsl:text&gt;
 668     &lt;xsl:value-of select=&quot;16 - $rem&quot;/&gt;
 669     &lt;xsl:text&gt;;
 670 &lt;/xsl:text&gt;
 671   &lt;/xsl:if&gt;
 672   &lt;xsl:if test=&quot;$caps &amp;lt;= 32&quot;&gt;
 673     &lt;xsl:text&gt;    unsigned int : 16;
 674 &lt;/xsl:text&gt;
 675   &lt;/xsl:if&gt;
 676   &lt;xsl:if test=&quot;$caps &amp;lt;= 48&quot;&gt;
 677     &lt;xsl:text&gt;    unsigned int : 16;
 678 &lt;/xsl:text&gt;
 679   &lt;/xsl:if&gt;
 680   &lt;xsl:if test=&quot;$caps &amp;lt;= 64&quot;&gt;
 681     &lt;xsl:text&gt;    unsigned int : 16;
 682 &lt;/xsl:text&gt;
 683   &lt;/xsl:if&gt;
 684   &lt;xsl:if test=&quot;$caps &amp;lt;= 80&quot;&gt;
 685     &lt;xsl:text&gt;    unsigned int : 16;
 686 &lt;/xsl:text&gt;
 687   &lt;/xsl:if&gt;
 688   &lt;xsl:if test=&quot;$caps &amp;lt;= 96&quot;&gt;
 689     &lt;xsl:text&gt;    unsigned int : 16;
 690 &lt;/xsl:text&gt;
 691   &lt;/xsl:if&gt;
 692   &lt;xsl:if test=&quot;$caps &amp;lt;= 112&quot;&gt;
 693     &lt;xsl:text&gt;    unsigned int : 16;
 694 &lt;/xsl:text&gt;
 695   &lt;/xsl:if&gt;
 696   &lt;xsl:text&gt;} &lt;/xsl:text&gt;
 697   &lt;xsl:value-of select=&quot;@id&quot;/&gt;
 698   &lt;xsl:text&gt;;&lt;/xsl:text&gt;
 699 &lt;/xsl:template&gt;
 700 
 701 &lt;xsl:template match=&quot;capabilityfield&quot; mode=&quot;signature&quot;&gt;
 702   &lt;xsl:text&gt;    unsigned int &lt;/xsl:text&gt;
 703   &lt;xsl:value-of select=&quot;@id&quot;/&gt;
 704   &lt;xsl:text&gt; : 1;
 705 &lt;/xsl:text&gt;
 706 &lt;/xsl:template&gt;
 707 
 708 &lt;xsl:template match=&quot;constants&quot; mode=&quot;enum&quot;&gt;
 709   &lt;xsl:text&gt;
 710 typedef &lt;/xsl:text&gt;
 711   &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;enumcore&quot;/&gt;
 712   &lt;xsl:text&gt; &lt;/xsl:text&gt;
 713   &lt;xsl:value-of select=&quot;@id&quot;/&gt;
 714   &lt;xsl:text&gt;;&lt;/xsl:text&gt;
 715 &lt;/xsl:template&gt;
 716 
 717 &lt;xsl:template match=&quot;constants&quot; mode=&quot;constants&quot;&gt;
 718   &lt;xsl:text&gt;
 719 &lt;/xsl:text&gt;
 720   &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;enumcore&quot;/&gt;
 721   &lt;xsl:text&gt;;&lt;/xsl:text&gt;
 722 &lt;/xsl:template&gt;
 723 
 724 &lt;xsl:template match=&quot;constants&quot; mode=&quot;enumcore&quot;&gt;
 725   &lt;xsl:text&gt;enum {
 726 &lt;/xsl:text&gt;
 727   &lt;xsl:for-each select=&quot;constant&quot;&gt;
 728     &lt;xsl:if test=&quot;position() &amp;gt; 1&quot;&gt;
 729       &lt;xsl:text&gt;,
 730 &lt;/xsl:text&gt;
 731     &lt;/xsl:if&gt;
 732     &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;enum&quot;/&gt;
 733   &lt;/xsl:for-each&gt;
 734   &lt;xsl:text&gt;
 735 }&lt;/xsl:text&gt;
 736 &lt;/xsl:template&gt;
 737 
 738 &lt;xsl:template match=&quot;event&quot; mode=&quot;enum&quot;&gt;
 739   &lt;xsl:text&gt;    &lt;/xsl:text&gt;
 740   &lt;xsl:value-of select=&quot;@const&quot;/&gt;
 741   &lt;xsl:text&gt; = &lt;/xsl:text&gt;
 742   &lt;xsl:value-of select=&quot;@num&quot;/&gt;
 743 &lt;/xsl:template&gt;
 744 
 745 &lt;xsl:template match=&quot;constant|errorid&quot; mode=&quot;enum&quot;&gt;
 746   &lt;xsl:text&gt;    &lt;/xsl:text&gt;
 747   &lt;xsl:value-of select=&quot;@id&quot;/&gt;
 748   &lt;xsl:text&gt; = &lt;/xsl:text&gt;
 749   &lt;xsl:value-of select=&quot;@num&quot;/&gt;
 750 &lt;/xsl:template&gt;
 751 
 752 
 753   &lt;xsl:template name=&quot;eventStruct&quot;&gt;
 754     &lt;xsl:param name=&quot;events&quot;/&gt;
 755     &lt;xsl:param name=&quot;index&quot;/&gt;
 756     &lt;xsl:param name=&quot;started&quot;/&gt;
 757     &lt;xsl:param name=&quot;comment&quot;/&gt;
 758     &lt;xsl:variable name=&quot;thisEvent&quot; select=&quot;$events[@num=$index]&quot;/&gt;
 759     &lt;xsl:choose&gt;
 760       &lt;xsl:when test=&quot;count($thisEvent)=1&quot;&gt;
 761         &lt;xsl:if test=&quot;$comment=&#39;Yes&#39;&quot;&gt;
 762           &lt;xsl:text&gt;                              /* &lt;/xsl:text&gt;
 763           &lt;xsl:number value=&quot;$index&quot; format=&quot;  1&quot;/&gt;
 764           &lt;xsl:text&gt; : &lt;/xsl:text&gt;
 765           &lt;xsl:value-of select=&quot;$thisEvent/@label&quot;/&gt;
 766           &lt;xsl:text&gt; */
 767 &lt;/xsl:text&gt;
 768         &lt;/xsl:if&gt;
 769         &lt;xsl:text&gt;    jvmtiEvent&lt;/xsl:text&gt;
 770         &lt;xsl:value-of select=&quot;$thisEvent/@id&quot;/&gt;
 771         &lt;xsl:text&gt; &lt;/xsl:text&gt;
 772         &lt;xsl:value-of select=&quot;$thisEvent/@id&quot;/&gt;
 773         &lt;xsl:text&gt;;
 774 &lt;/xsl:text&gt;
 775     &lt;/xsl:when&gt;
 776     &lt;xsl:otherwise&gt;
 777       &lt;xsl:if test=&quot;$started&quot;&gt;
 778         &lt;xsl:if test=&quot;$comment=&#39;Yes&#39;&quot;&gt;
 779           &lt;xsl:text&gt;                              /* &lt;/xsl:text&gt;
 780           &lt;xsl:number value=&quot;$index&quot; format=&quot;  1&quot;/&gt;
 781           &lt;xsl:text&gt; */
 782 &lt;/xsl:text&gt;
 783         &lt;/xsl:if&gt;
 784         &lt;xsl:text&gt;    jvmtiEventReserved reserved&lt;/xsl:text&gt;        
 785         &lt;xsl:value-of select=&quot;$index&quot;/&gt;
 786         &lt;xsl:text&gt;;
 787 &lt;/xsl:text&gt;     
 788     &lt;/xsl:if&gt;
 789   &lt;/xsl:otherwise&gt;
 790 &lt;/xsl:choose&gt;
 791     &lt;xsl:if test=&quot;count($events[@num &amp;gt; $index]) &amp;gt; 0&quot;&gt;
 792       &lt;xsl:call-template name=&quot;eventStruct&quot;&gt;
 793         &lt;xsl:with-param name=&quot;events&quot; select=&quot;$events&quot;/&gt;
 794         &lt;xsl:with-param name=&quot;index&quot; select=&quot;1+$index&quot;/&gt;
 795         &lt;xsl:with-param name=&quot;started&quot; select=&quot;$started or count($thisEvent)=1&quot;/&gt;
 796         &lt;xsl:with-param name=&quot;comment&quot; select=&quot;$comment&quot;/&gt;
 797       &lt;/xsl:call-template&gt;
 798     &lt;/xsl:if&gt;
 799   &lt;/xsl:template&gt;
 800 
 801 
 802 &lt;!-- ======== HotSpotType ======== --&gt;
 803 
 804 &lt;xsl:template match=&quot;parameters&quot; mode=&quot;HotSpotSig&quot;&gt;
 805   &lt;xsl:variable name=&quot;length&quot; select=&quot;count(param)&quot;/&gt;
 806   &lt;xsl:for-each select=&quot;param&quot;&gt;
 807     &lt;xsl:variable name=&quot;separator&quot;&gt;
 808         &lt;xsl:choose&gt;
 809           &lt;xsl:when test=&quot;position()=$length&quot;&gt;
 810             &lt;xsl:text&gt;&lt;/xsl:text&gt;
 811           &lt;/xsl:when&gt;
 812           &lt;xsl:otherwise&gt;
 813             &lt;xsl:text&gt;, &lt;/xsl:text&gt;
 814           &lt;/xsl:otherwise&gt;
 815         &lt;/xsl:choose&gt;
 816     &lt;/xsl:variable&gt;
 817     &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;HotSpotSig&quot;&gt;
 818       &lt;xsl:with-param name=&quot;comma&quot; select=&quot;$separator&quot;/&gt;
 819     &lt;/xsl:apply-templates&gt;
 820   &lt;/xsl:for-each&gt;
 821 &lt;/xsl:template&gt;
 822 
 823 &lt;xsl:template match=&quot;param&quot; mode=&quot;HotSpotSig&quot;&gt;
 824   &lt;xsl:param name=&quot;comma&quot;/&gt;
 825   &lt;xsl:variable name=&quot;result&quot;&gt;
 826     &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;HotSpotType&quot;/&gt;
 827   &lt;/xsl:variable&gt;
 828   &lt;xsl:if test=&quot;string-length($result)!=0&quot;&gt;
 829     &lt;xsl:value-of select=&quot;$result&quot;/&gt;
 830     &lt;xsl:text&gt; &lt;/xsl:text&gt;
 831     &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;HotSpotName&quot;&gt;
 832       &lt;xsl:with-param name=&quot;name&quot; select=&quot;@id&quot;/&gt;
 833     &lt;/xsl:apply-templates&gt;
 834     &lt;xsl:value-of select=&quot;$comma&quot;/&gt;    
 835   &lt;/xsl:if&gt;
 836 &lt;/xsl:template&gt;
 837 
 838 &lt;xsl:template match=&quot;jthread&quot; mode=&quot;HotSpotType&quot;&gt;
 839   &lt;xsl:choose&gt;
 840     &lt;xsl:when test=&quot;count(@impl)=0 or not(contains(@impl,&#39;noconvert&#39;))&quot;&gt;
 841       &lt;xsl:text&gt;JavaThread*&lt;/xsl:text&gt;
 842     &lt;/xsl:when&gt;
 843     &lt;xsl:otherwise&gt;
 844       &lt;xsl:value-of select=&quot;name()&quot;/&gt;
 845     &lt;/xsl:otherwise&gt;
 846   &lt;/xsl:choose&gt;
 847 &lt;/xsl:template&gt;
 848 
 849 &lt;xsl:template match=&quot;jrawMonitorID&quot; mode=&quot;HotSpotType&quot;&gt;
 850   &lt;xsl:text&gt;JvmtiRawMonitor *&lt;/xsl:text&gt;
 851 &lt;/xsl:template&gt;
 852 
 853 &lt;xsl:template match=&quot;jframeID&quot; mode=&quot;HotSpotType&quot;&gt;
 854   &lt;xsl:text&gt;jint&lt;/xsl:text&gt;
 855 &lt;/xsl:template&gt;
 856 
 857 &lt;xsl:template match=&quot;jmethodID&quot; mode=&quot;HotSpotType&quot;&gt;
 858   &lt;xsl:text&gt;Method*&lt;/xsl:text&gt;
 859 &lt;/xsl:template&gt;
 860 
 861 &lt;xsl:template match=&quot;jfieldID&quot; mode=&quot;HotSpotType&quot;&gt;
 862   &lt;xsl:text&gt;fieldDescriptor*&lt;/xsl:text&gt;
 863 &lt;/xsl:template&gt;
 864 
 865 &lt;xsl:template match=&quot;jclass&quot; mode=&quot;HotSpotType&quot;&gt;
 866   &lt;!--
 867     classes passed as part of a class/method or class/field pair are used
 868     by the wrapper to get the internal type but are not needed by nor 
 869     passed to the implementation layer.
 870   --&gt;
 871   &lt;xsl:if test=&quot;count(@method|@field)=0&quot;&gt;
 872     &lt;xsl:text&gt;oop&lt;/xsl:text&gt;
 873   &lt;/xsl:if&gt;
 874 &lt;/xsl:template&gt;
 875 
 876 &lt;xsl:template match=&quot;nullok&quot; mode=&quot;HotSpotType&quot;&gt;
 877 &lt;/xsl:template&gt;
 878 
 879 &lt;xsl:template match=&quot;jobject|jvalue|jthreadGroup|enum|jint|jchar|jlong|jfloat|jdouble|jlocation|jboolean|char|uchar|size_t|void|struct&quot; mode=&quot;HotSpotType&quot;&gt;
 880   &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;btsig&quot;/&gt;
 881 &lt;/xsl:template&gt;
 882 
 883 &lt;xsl:template match=&quot;varargs&quot; mode=&quot;HotSpotType&quot;&gt;
 884   &lt;xsl:text&gt; &lt;/xsl:text&gt;
 885 &lt;/xsl:template&gt;
 886 
 887 &lt;xsl:template match=&quot;outptr|outbuf|allocfieldbuf&quot; mode=&quot;HotSpotType&quot;&gt;
 888   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;btsig&quot;/&gt;
 889   &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 890 &lt;/xsl:template&gt;
 891 
 892 &lt;xsl:template match=&quot;ptrtype&quot; mode=&quot;HotSpotType&quot;&gt;
 893   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;btsig&quot;/&gt;
 894 &lt;/xsl:template&gt;
 895 
 896 &lt;xsl:template match=&quot;inptr|inbuf|vmbuf&quot; mode=&quot;HotSpotType&quot;&gt;
 897   &lt;xsl:text&gt;const &lt;/xsl:text&gt;
 898   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;btsig&quot;/&gt;
 899   &lt;xsl:text&gt;*&lt;/xsl:text&gt;
 900 &lt;/xsl:template&gt;
 901 
 902 &lt;xsl:template match=&quot;allocbuf|agentbuf&quot; mode=&quot;HotSpotType&quot;&gt;
 903   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;btsig&quot;/&gt;
 904   &lt;xsl:text&gt;**&lt;/xsl:text&gt;
 905 &lt;/xsl:template&gt;
 906 
 907 &lt;xsl:template match=&quot;allocallocbuf&quot; mode=&quot;HotSpotType&quot;&gt;
 908   &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;btsig&quot;/&gt;
 909   &lt;xsl:text&gt;***&lt;/xsl:text&gt;
 910 &lt;/xsl:template&gt;
 911 
 912 &lt;!-- ========  HotSpotName ======== --&gt;
 913 
 914 &lt;xsl:template match=&quot;jthread&quot; mode=&quot;HotSpotName&quot;&gt;
 915   &lt;xsl:param name=&quot;name&quot;/&gt;
 916   &lt;xsl:choose&gt;
 917     &lt;xsl:when test=&quot;count(@impl)=0 or not(contains(@impl,&#39;noconvert&#39;))&quot;&gt;
 918       &lt;xsl:text&gt;java_thread&lt;/xsl:text&gt;
 919     &lt;/xsl:when&gt;
 920     &lt;xsl:otherwise&gt;
 921       &lt;xsl:value-of select=&quot;$name&quot;/&gt;
 922     &lt;/xsl:otherwise&gt;
 923   &lt;/xsl:choose&gt;
 924 &lt;/xsl:template&gt;
 925 
 926 &lt;xsl:template match=&quot;jrawMonitorID&quot; mode=&quot;HotSpotName&quot;&gt;
 927   &lt;xsl:text&gt;rmonitor&lt;/xsl:text&gt;
 928 &lt;/xsl:template&gt;
 929 
 930 &lt;xsl:template match=&quot;jframeID&quot; mode=&quot;HotSpotName&quot;&gt;
 931   &lt;xsl:text&gt;depth&lt;/xsl:text&gt;
 932 &lt;/xsl:template&gt;
 933 
 934 &lt;xsl:template match=&quot;jmethodID&quot; mode=&quot;HotSpotName&quot;&gt;
 935   &lt;xsl:text&gt;checked_method&lt;/xsl:text&gt;
 936 &lt;/xsl:template&gt;
 937 
 938 &lt;xsl:template match=&quot;jfieldID&quot; mode=&quot;HotSpotName&quot;&gt;
 939   &lt;xsl:text&gt;fdesc_ptr&lt;/xsl:text&gt;
 940 &lt;/xsl:template&gt;
 941 
 942 &lt;xsl:template match=&quot;jclass&quot; mode=&quot;HotSpotName&quot;&gt;
 943   &lt;!--
 944     classes passed as part of a class/method or class/field pair are used
 945     by the wrapper to get the internal type but are not needed by nor 
 946     passed to the implementation layer.  This value is checked for empty.
 947   --&gt;
 948   &lt;xsl:if test=&quot;count(@method|@field)=0&quot;&gt;
 949     &lt;xsl:text&gt;k_mirror&lt;/xsl:text&gt;
 950   &lt;/xsl:if&gt;
 951 &lt;/xsl:template&gt;
 952 
 953 &lt;xsl:template match=&quot;nullok&quot; mode=&quot;HotSpotName&quot;&gt;
 954 &lt;/xsl:template&gt;
 955 
 956 &lt;xsl:template match=&quot;jobject|jvalue|jthreadGroup|enum|jint|jchar|jlong|jfloat|jdouble|jlocation|jboolean|char|uchar|size_t|void|varargs|struct|outptr|outbuf|allocfieldbuf|ptrtype|inptr|inbuf|vmbuf|allocbuf|agentbuf|allocallocbuf&quot; mode=&quot;HotSpotName&quot;&gt;
 957   &lt;xsl:param name=&quot;name&quot;/&gt;
 958   &lt;xsl:value-of select=&quot;$name&quot;/&gt;
 959 &lt;/xsl:template&gt;
 960 
 961 &lt;!-- ======== HotSpotValue ======== --&gt;
 962 
 963 
 964 &lt;xsl:template match=&quot;parameters&quot; mode=&quot;HotSpotValue&quot;&gt;
 965   &lt;xsl:variable name=&quot;length&quot; select=&quot;count(param)&quot;/&gt;
 966   &lt;xsl:for-each select=&quot;param&quot;&gt;
 967     &lt;xsl:variable name=&quot;separator&quot;&gt;
 968         &lt;xsl:choose&gt;
 969           &lt;xsl:when test=&quot;position()=$length&quot;&gt;
 970             &lt;xsl:text&gt;&lt;/xsl:text&gt;
 971           &lt;/xsl:when&gt;
 972           &lt;xsl:otherwise&gt;
 973             &lt;xsl:text&gt;, &lt;/xsl:text&gt;
 974           &lt;/xsl:otherwise&gt;
 975         &lt;/xsl:choose&gt;
 976     &lt;/xsl:variable&gt;
 977     &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;HotSpotValue&quot;&gt;
 978       &lt;xsl:with-param name=&quot;comma&quot; select=&quot;$separator&quot;/&gt;
 979     &lt;/xsl:apply-templates&gt;
 980   &lt;/xsl:for-each&gt;
 981 &lt;/xsl:template&gt;
 982 
 983 &lt;xsl:template match=&quot;param&quot; mode=&quot;HotSpotValue&quot;&gt;
 984   &lt;xsl:param name=&quot;comma&quot;/&gt;
 985   &lt;xsl:variable name=&quot;result&quot;&gt;
 986     &lt;xsl:apply-templates select=&quot;child::*[position()=1]&quot; mode=&quot;HotSpotValue&quot;&gt;
 987       &lt;xsl:with-param name=&quot;name&quot; select=&quot;@id&quot;/&gt;
 988     &lt;/xsl:apply-templates&gt;
 989   &lt;/xsl:variable&gt;
 990   &lt;xsl:if test=&quot;string-length($result)!=0&quot;&gt;
 991     &lt;xsl:value-of select=&quot;$result&quot;/&gt;
 992     &lt;xsl:value-of select=&quot;$comma&quot;/&gt;    
 993   &lt;/xsl:if&gt;
 994 &lt;/xsl:template&gt;
 995 
 996 &lt;xsl:template match=&quot;jframeID|jmethodID|jrawMonitorID|jthread|jclass|nullok&quot; mode=&quot;HotSpotValue&quot;&gt;
 997   &lt;xsl:param name=&quot;name&quot;/&gt;
 998   &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;HotSpotName&quot;&gt;
 999     &lt;xsl:with-param name=&quot;name&quot; select=&quot;$name&quot;/&gt;
1000   &lt;/xsl:apply-templates&gt;
1001 &lt;/xsl:template&gt;
1002 
1003 &lt;xsl:template match=&quot;jfieldID&quot; mode=&quot;HotSpotValue&quot;&gt;
1004   &lt;xsl:text&gt;&amp;amp;fdesc&lt;/xsl:text&gt;
1005 &lt;/xsl:template&gt;
1006 
1007 &lt;xsl:template match=&quot;jobject|jvalue|jthreadGroup|enum|jint|jchar|jlong|jfloat|jdouble|jlocation|jboolean|char|uchar|size_t|void|struct|outptr|outbuf|allocfieldbuf|ptrtype|inptr|inbuf|vmbuf|allocbuf|agentbuf|allocallocbuf&quot; mode=&quot;HotSpotValue&quot;&gt;
1008   &lt;xsl:param name=&quot;name&quot;/&gt;
1009   &lt;xsl:value-of select=&quot;$name&quot;/&gt;
1010 &lt;/xsl:template&gt;
1011 
1012 &lt;xsl:template match=&quot;varargs&quot; mode=&quot;HotSpotValue&quot;&gt;
1013   &lt;xsl:text&gt;NULL&lt;/xsl:text&gt;
1014 &lt;/xsl:template&gt;
1015 
1016 &lt;/xsl:stylesheet&gt;
1017 
    </pre>
  </body>
</html>