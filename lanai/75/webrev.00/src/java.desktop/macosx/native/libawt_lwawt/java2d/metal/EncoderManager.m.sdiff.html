<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/EncoderManager.m</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/EncoderManager.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
355       ca.clearColor = MTLClearColorMake(0.0f, 0.0f, 0.0f, 0.0f);
356       ca.loadAction = MTLLoadActionClear;
357       ca.storeAction = MTLStoreActionMultisampleResolve;
358     } else {
359       ca.texture = dest;
360       ca.loadAction = MTLLoadActionLoad;
361       ca.storeAction = MTLStoreActionStore;
362     }
363 
364     if (_useStencil &amp;&amp; !renderOptions-&gt;isAA) {
365         // If you enable stencil testing or stencil writing, the
366         // MTLRenderPassDescriptor must include a stencil attachment.
367         rpd.stencilAttachment.loadAction = MTLLoadActionLoad;
368         rpd.stencilAttachment.storeAction = MTLStoreActionStore;
369         rpd.stencilAttachment.texture = _mtlc.clip.stencilTextureRef;
370     }
371 
372     // J2dTraceLn1(J2D_TRACE_VERBOSE, &quot;created render encoder to draw on
373     // tex=%p&quot;, dest);
374     _encoder = [[cbw getCommandBuffer] renderCommandEncoderWithDescriptor:rpd];
<span class="line-removed">375     [rpd release];</span>
376 
377     [_encoderStates reset:dest
378                isDstOpaque:renderOptions-&gt;dstFlags.isOpaque
379         isDstPremultiplied:YES
380                       isAA:renderOptions-&gt;isAA];
381   }
382 
383   //
384   // 3. update encoder states
385   //
386   [_encoderStates updateEncoder:_encoder
387                         context:_mtlc
388                   renderOptions:renderOptions
389                     forceUpdate:forceUpdate];
390 
391   return _encoder;
392 }
393 
394 - (id&lt;MTLBlitCommandEncoder&gt; _Nonnull) createBlitEncoder {
395     [self endEncoder];
</pre>
</td>
<td>
<hr />
<pre>
355       ca.clearColor = MTLClearColorMake(0.0f, 0.0f, 0.0f, 0.0f);
356       ca.loadAction = MTLLoadActionClear;
357       ca.storeAction = MTLStoreActionMultisampleResolve;
358     } else {
359       ca.texture = dest;
360       ca.loadAction = MTLLoadActionLoad;
361       ca.storeAction = MTLStoreActionStore;
362     }
363 
364     if (_useStencil &amp;&amp; !renderOptions-&gt;isAA) {
365         // If you enable stencil testing or stencil writing, the
366         // MTLRenderPassDescriptor must include a stencil attachment.
367         rpd.stencilAttachment.loadAction = MTLLoadActionLoad;
368         rpd.stencilAttachment.storeAction = MTLStoreActionStore;
369         rpd.stencilAttachment.texture = _mtlc.clip.stencilTextureRef;
370     }
371 
372     // J2dTraceLn1(J2D_TRACE_VERBOSE, &quot;created render encoder to draw on
373     // tex=%p&quot;, dest);
374     _encoder = [[cbw getCommandBuffer] renderCommandEncoderWithDescriptor:rpd];

375 
376     [_encoderStates reset:dest
377                isDstOpaque:renderOptions-&gt;dstFlags.isOpaque
378         isDstPremultiplied:YES
379                       isAA:renderOptions-&gt;isAA];
380   }
381 
382   //
383   // 3. update encoder states
384   //
385   [_encoderStates updateEncoder:_encoder
386                         context:_mtlc
387                   renderOptions:renderOptions
388                     forceUpdate:forceUpdate];
389 
390   return _encoder;
391 }
392 
393 - (id&lt;MTLBlitCommandEncoder&gt; _Nonnull) createBlitEncoder {
394     [self endEncoder];
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>